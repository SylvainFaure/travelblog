(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{284:function(e,t,l){"use strict";l.r(t);l(60);var r=l(283),n={props:{type:r.a.string.def("primary"),label:r.a.string.def("Save"),iconBtn:r.a.bool.def(!1),icon:r.a.string.def("checkmark"),additionalClasses:r.a.string.def("")},computed:{classes:function(){var e=this.iconBtn?"px-4 py-2":"p-2";return"bg-".concat(this.type||"primary"," ").concat(e)}}},c=l(23),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("button",{class:[e.classes,e.additionalClasses,"border text-white rounded text-center"],attrs:{type:"button"},on:{click:function(t){return e.$emit("click")}}},[e.iconBtn?l("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.label,expression:"label"}]},[l("Icon",{attrs:{name:e.icon}})],1):l("span",[e._v(e._s(e.label))])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:l(286).default})},286:function(e,t,l){"use strict";l.r(t);var r=l(283),n={props:{name:r.a.string.def(""),small:r.a.bool.def(!1)}},c=l(23),component=Object(c.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({class:{"fill-current icon":!0,"cursor-pointer":!!this.$listeners,"w-2 h-2":this.small,"w-4 h-4":!this.small}},this.$listeners),[t("use",{attrs:{"xlink:href":"#icon-"+this.name}})])}),[],!1,null,null,null);t.default=component.exports},288:function(e,t,l){"use strict";l.r(t);var r=l(283),n={props:{type:r.a.string.def("text"),name:r.a.string.def("input"),id:r.a.string.def("input"),label:r.a.string.def(""),placeholder:r.a.string.def(""),required:r.a.bool.def(!1),disabled:r.a.bool.def(!1),value:r.a.string.def(""),small:r.a.bool.def(!1)}},c=l(23),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{class:{"mt-2 mb-4":!e.small}},[e.label?l("h4",{staticClass:"label font-bold my-4"},[l("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),l("input",{class:[e.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:e.id,type:e.type,name:e.name,required:e.required,disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("enter")},input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports},292:function(e,t,l){"use strict";l.r(t);var r={},n=l(23),component=Object(n.a)(r,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("portal",{attrs:{to:"modal"}},[l("div",{staticClass:"flex flex-col justify-center items-center m-16"},[l("h4",{staticClass:"font-bold text-lg text-center mb-4"},[e._v(e._s(e.$t("general.sure")))]),e._v(" "),l("div",{staticClass:"flex justify-center"},[l("Btn",{attrs:{label:e.$t("general.confirm"),"additional-classes":"mr-4"},on:{click:function(t){return e.$emit("confirm")}}}),e._v(" "),l("Btn",{attrs:{label:e.$t("general.cancel"),type:"secondary"},on:{click:function(t){return e.$emit("cancel")}}})],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:l(284).default})},297:function(e,t,l){"use strict";l.r(t);var r=l(329),n=l.n(r),c=l(283),o=(l(330),{components:{vSelect:n.a},props:{label:c.a.string.def(null),placeholder:c.a.string.def(null),options:c.a.array.def([]),optionLabel:c.a.string.def("label"),multiple:c.a.bool.def(!1),taggable:c.a.bool.def(!1),pushTags:c.a.bool.def(!1),value:c.a.oneOfType([c.a.object,c.a.array]).def(null),small:c.a.bool.def(!1)}}),d=(l(336),l(23)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[e.label?l("h4",{staticClass:"label font-bold my-4"},[l("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),l("v-select",{attrs:{options:e.options,label:e.optionLabel,multiple:e.multiple,taggable:e.taggable,"push-tags":e.pushTags,placeholder:e.placeholder,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1)}),[],!1,null,null,null);t.default=component.exports},309:function(e,t,l){"use strict";l.r(t);l(19),l(40),l(31),l(17),l(48),l(53),l(190),l(46),l(47),l(32),l(39),l(56),l(61),l(63),l(18),l(27);var r=l(4),n=l(13),c=l(362),o=l(283),d=l(26);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={props:{assets:o.a.array.def([]),pick:o.a.string.def(null),picked:o.a.oneOfType([o.a.array,o.a.object]).def(null),data:o.a.object.def({}),pickLimit:o.a.number.def(null)},data:function(){return{locale:"",pickedAsset:null,pickedAssetsIds:[],assetToRemove:null,assetToEdit:null,filters:{travel:null,place:null}}},computed:m(m({},Object(d.c)("modal",["modalId"])),{},{places:function(){var e=this;return this.data.articles.map((function(article){var t=article["article_place_".concat(e.locale)];if(t)return{key:t.toLowerCase().replaceAll(" ","_"),label:t}})).filter((function(e){return!!e}))},filteredAssets:function(){var e=this;return this.assets.filter((function(t){return e.filters.travel&&e.filters.place?e.filters.travel===Number(t.asset_travel_id)&&!!t["asset_place_".concat(e.locale)]&&e.filters.place===t["asset_place_".concat(e.locale)]:!e.filters.travel&&!e.filters.place||(e.filters.travel===Number(t.asset_travel_id)||e.filters.place===t["asset_place_".concat(e.locale)])}))}}),mounted:function(){var e=this;this.locale=this.$i18n.locale,this.picked&&("multiple"===this.pick?this.pickedAssetsIds=this.picked.map((function(p){return p.asset_id})):(this.pickedAsset=this.picked,this.$nextTick((function(){e.initWithPicked()}))))},methods:m(m({},Object(d.b)("modal",["setVisible","setModalId"])),{},{getUploadDate:function(e){var t=e.split("_")[0];return Object(c.a)(new Date(Number(t)),"dd/MM/yyyy")},initWithPicked:function(){var e=this;this.$refs.asset.forEach((function(a){Number(a.getAttribute("id"))!==Number(e.pickedAsset.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")}))},handlePickOneAsset:function(e){var t=this;this.$refs.asset.forEach((function(a){t.pickedAsset&&t.pickedAsset.asset_id===e.asset_id?a.classList.remove("opacity-50"):Number(a.getAttribute("id"))!==Number(e.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")})),this.pickedAsset=e},handleAssetPick:function(e,t){var l,r=this;(t.stopPropagation(),t.preventDefault(),"one"===this.pick&&(this.handlePickOneAsset(e),this.$emit("pick",e)),"multiple"===this.pick)&&((!this.pickLimit||this.pickedAssetsIds.length<this.pickLimit||this.pickedAssetsIds.length===this.pickLimit&&!t.target.checked)&&(t.target.checked?(l="add",this.pickedAssetsIds.push(e.asset_id)):(l="remove",this.pickedAssetsIds=this.pickedAssetsIds.filter((function(a){return a!==e.asset_id}))),this.pickedAssetsIds.length===this.pickLimit?this.$refs.assetContainer.forEach((function(a){r.pickedAssetsIds.includes(Number(a.getAttribute("id").replace("container_","")))||(a.classList.add("pointer-events-none"),a.classList.add("opacity-50"))})):this.$refs.assetContainer.forEach((function(a){a.classList.remove("pointer-events-none"),a.classList.remove("opacity-50")})),this.$emit("picks",this.pickedAssetsIds,e,l)))},handleEdit:function(e){this.assetToEdit=e,this.setVisible(!0),this.setModalId("asset-edit")},handleRemove:function(e){this.assetToRemove=e,this.setVisible(!0),this.setModalId("asset-remove")},removeAsset:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/assets/delete",{ids:[e.assetToRemove.asset_id],names:[e.assetToRemove.asset_name]});case 3:e.$toast.success(e.$t("assets.removed_success")),e.$emit("change"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e.$toast.error(e.$t("assets.removed_error"));case 11:return t.prev=11,e.closeRemoveModal(),e.assetToRemove=null,t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,7,11,15]])})))()},updateAsset:function(e,t){var l=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=m(m({},t),{},(c={},Object(n.a)(c,"asset_desc_".concat(l.locale),e.description),Object(n.a)(c,"asset_title_".concat(l.locale),e.title),Object(n.a)(c,"asset_article_ids",JSON.stringify(e.article_ids.map((function(e){return Number(e.article_id)})))),Object(n.a)(c,"asset_travel_id",Number(e.travel.travel_id)),c)),r.prev=1,r.next=4,l.$axios.put("/api/assets/".concat(t.asset_id),o);case 4:l.$toast.success(l.$t("assets.updated_success")),l.$emit("change"),l.assetToEdit=null,r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.log(r.t0),l.$toast.error(l.$t("assets.updated_error"));case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},closeRemoveModal:function(){this.setVisible(!1),this.setModalId(null)},handleFilter:function(e){e.travel_id?this.filters.travel=this.filters.travel===e.travel_id?null:e.travel_id:this.filters.place=this.filters.place===e.label?null:e.label}})},h=(l(338),l(23)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("section",[l("div",{staticClass:"m-6"},[l("div",{staticClass:"flex my-4"},[l("div",{staticClass:"w-1/2 flex flex-col items-center"},[l("h4",[e._v(e._s(e.$t("assets.filter_by_travel")))]),e._v(" "),l("div",{staticClass:"flex flex-wrap justify-center w-full"},e._l(e.data.travels,(function(t){return l("Tag",{key:t.travel_id,staticClass:"mr-2 my-2",attrs:{tag:t["travel_title_"+e.locale],selectable:"",selected:e.filters.travel===t.travel_id},on:{click:function(l){return e.handleFilter(t)}}})})),1)]),e._v(" "),l("div",{staticClass:"w-1/2 flex flex-col items-center"},[l("h4",[e._v(e._s(e.$t("assets.filter_by_place")))]),e._v(" "),l("div",{staticClass:"flex flex-wrap justify-center w-full"},e._l(e.places,(function(t){return l("Tag",{key:t.key,staticClass:"mr-2 my-2",attrs:{tag:t.label,selectable:"",selected:e.filters.place===t.label},on:{click:function(l){return e.handleFilter(t)}}})})),1)])]),e._v(" "),l("div",{staticClass:"flex flex-wrap justify-center"},[e._l(e.filteredAssets,(function(t,i){return l("div",{key:i,ref:"assetContainer",refInFor:!0,class:{"w-64 mr-4 my-2 relative":!0,"h-72 border border-grey-100":!e.pick},attrs:{id:"container_"+t.asset_id}},["multiple"===e.pick?l("span",{staticClass:"absolute top-0 right-0"},[l("input",{staticClass:"mr-2 mt-2 z-20",attrs:{type:"checkbox"},domProps:{checked:e.pickedAssetsIds.includes(t.asset_id)},on:{change:function(l){return e.handleAssetPick(t,l)}}})]):e._e(),e._v(" "),l("div",{class:{"backdrop-container max-h-2/3 overflow-hidden relative flex justify-center items-center":!e.pick}},[e.pick?e._e():l("div",{staticClass:"backdrop opacity-0 absolute inset-0 h-full w-full hover:opacity-100 transition-opacity duration-300 bg-blue-100 bg-opacity-50"}),e._v(" "),e.pick?e._e():l("div",{staticClass:"backdrop-content z-10 flex absolute inset-0 justify-center items-center opacity-0"},[l("Btn",{attrs:{"icon-btn":"",icon:"pencil"},on:{click:function(l){return e.handleEdit(t)}}}),e._v(" "),l("Btn",{attrs:{"icon-btn":"",type:"secondary",icon:"bin"},on:{click:function(l){return e.handleRemove(t)}}})],1),e._v(" "),l("img",{ref:"asset",refInFor:!0,class:{"max-h-2/3":!e.pick,"cursor-pointer":e.pick,"w-full overflow-hidden":!0},attrs:{id:t.asset_id,src:t.asset_src},on:{click:function(l){return e.handleAssetPick(t,l)}}})]),e._v(" "),e.pick?e._e():l("div",{staticClass:"asset__infos p-4"},[t["asset_title_"+e.$i18n.locale]?l("p",{staticClass:"font-bold text-lg"},[e._v("\n            "+e._s(t["asset_title_"+e.$i18n.locale])+"\n          ")]):e._e(),e._v(" "),l("p",{staticClass:"text-sm text-gray-600"},[e._v("\n            "+e._s(e.$t("assets.uploaded"))+"\n            "+e._s(e.getUploadDate(t.asset_name))+"\n          ")]),e._v(" "),t["asset_desc_"+e.$i18n.locale]?l("p",{staticClass:"text-sm text-gray-600"},[e._v("\n            "+e._s(e.$t("assets.description"))+"\n            "+e._s(t["asset_desc_"+e.$i18n.locale])+"\n          ")]):e._e()])])})),e._v(" "),e.filteredAssets.length?e._e():l("div",{staticClass:"flex justify-center max-w-1/4 my-16"},[e._v("\n        "+e._s(e.$t("assets.filtered_empty"))+"\n      ")])],2),e._v(" "),"asset-remove"===e.modalId?l("RemoveModal",{on:{confirm:e.removeAsset,cancel:e.closeRemoveModal}}):e._e(),e._v(" "),"asset-edit"===e.modalId?l("EditAssetModal",{attrs:{travels:e.data.travels,articles:e.data.articles,image:e.assetToEdit},on:{confirm:e.updateAsset,cancel:e.closeRemoveModal}}):e._e()],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Tag:l(335).default,Btn:l(284).default,RemoveModal:l(292).default,EditAssetModal:l(359).default})},310:function(e,t,l){"use strict";l.r(t);var r=l(283),n={props:{name:r.a.string.def("textarea"),placeholder:r.a.string.def(""),label:r.a.string.def(null),required:r.a.bool.def(!1),rows:r.a.number.def(4),value:r.a.string.def(""),classes:r.a.string.def("")}},c=l(23),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[e.label?l("h4",{staticClass:"label font-bold my-4"},[l("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),l("textarea",{class:[e.classes,"w-full p-2 rounded border border-grey-600"],attrs:{name:e.name,placeholder:e.placeholder,required:e.required,rows:e.rows},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Textarea:l(310).default})},315:function(e,t,l){var content=l(337);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(81).default)("2bea4cae",content,!0,{sourceMap:!1})},316:function(e,t,l){var content=l(339);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(81).default)("fba0ba2a",content,!0,{sourceMap:!1})},335:function(e,t,l){"use strict";l.r(t);l(60);var r=l(283),n={props:{deletable:r.a.bool.def(!1),selectable:r.a.bool.def(!1),selected:r.a.bool.def(!1),tag:r.a.string.def("")},computed:{color:function(){var e=["gray","indigo","red","orange","yellow","green","teal","blue","purple","pink"];return"".concat(this.selectable&&!this.selected?"border-2 border-":"text-white bg-").concat(e[Math.floor(Math.random()*(e.length-1))],"-500")}}},c=l(23),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{class:[e.color,"text-xs rounded-md px-2 py-1",{"cursor-pointer":e.selectable}],on:{click:function(t){return e.$emit("click")}}},[l("span",[e._v(e._s(e.tag?"#"+e.tag:"# No place"))]),e._v(" "),e.deletable?l("span",{staticClass:"cursor-pointer font-bold",on:{click:function(t){return e.$emit("remove",e.tag)}}},[e._v("x")]):e._e()])}),[],!1,null,null,null);t.default=component.exports},336:function(e,t,l){"use strict";var r=l(315);l.n(r).a},337:function(e,t,l){(t=l(80)(!1)).push([e.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),e.exports=t},338:function(e,t,l){"use strict";var r=l(316);l.n(r).a},339:function(e,t,l){(t=l(80)(!1)).push([e.i,".backdrop,.backdrop-content{transition:opacity .3s}.backdrop-container:hover>.backdrop,.backdrop-container:hover>.backdrop-content{opacity:1}.backdrop-container:hover>.backdrop{filter:blur(5px) grayscale(.7)}",""]),e.exports=t},359:function(e,t,l){"use strict";l.r(t);l(19),l(31),l(82),l(17),l(48),l(46),l(47),l(32),l(56),l(18);var r=l(13),n=l(283),c=l(26);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{image:n.a.object.def(null),articles:n.a.array.def([]),travels:n.a.array.def([])},data:function(){return{locale:"",model:{name:"",title:"",description:"",article_ids:[],travel:null}}},mounted:function(){var e=this.$i18n.locale;this.locale=e;var t=this.image,l=t.asset_name,r=t.asset_article_ids,n=t.asset_travel_id;this.model={name:l,title:this.image["asset_title_".concat(e)],description:this.image["asset_desc_".concat(e)],article_ids:r?this.articles.filter((function(article){return r.includes(article.article_id)})):[],travel:n?this.travels.find((function(e){return e.travel_id===n})):null}},methods:d(d({},Object(c.b)("modal",["setVisible","setModalId"])),{},{handleConfirm:function(){this.$emit("confirm",this.model,this.image),this.closeModal()},handleCancel:function(){this.closeModal()},closeModal:function(){this.setModalId(null),this.setVisible(!1)},handleReduce:function(option){return option["article_title_".concat(this.locale)]}})},m=l(23),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("portal",{attrs:{to:"modal"}},[l("div",[l("div",{staticClass:"h-full flex"},[l("div",{staticClass:"m-8"},[l("img",{staticClass:"h-48",attrs:{src:e.image.asset_src}})]),e._v(" "),l("div",{staticClass:"mr-8 mb-8 max-w-1/2"},[l("InputText",{attrs:{label:e.$t("assets.edit.name"),disabled:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),e._v(" "),l("InputText",{attrs:{label:e.$t("assets.edit.title")},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),e._v(" "),l("Textarea",{attrs:{label:e.$t("assets.edit.description")},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}}),e._v(" "),l("Select",{attrs:{multiple:"",label:e.$t("assets.edit.articles"),options:e.articles,"option-label":"article_title_"+e.locale},model:{value:e.model.article_ids,callback:function(t){e.$set(e.model,"article_ids",t)},expression:"model.article_ids"}}),e._v(" "),l("Select",{attrs:{label:e.$t("assets.edit.travel"),options:e.travels,"option-label":"travel_title_"+e.locale},model:{value:e.model.travel,callback:function(t){e.$set(e.model,"travel",t)},expression:"model.travel"}})],1)]),e._v(" "),l("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[l("div",{staticClass:"flex justify-end"},[l("Btn",{attrs:{label:e.$t("general.confirm")},on:{click:e.handleConfirm}}),e._v(" "),l("Btn",{attrs:{label:e.$t("general.cancel"),type:"secondary"},on:{click:e.handleCancel}})],1)])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{InputText:l(288).default,Textarea:l(310).default,Select:l(297).default,Btn:l(284).default})}}]);