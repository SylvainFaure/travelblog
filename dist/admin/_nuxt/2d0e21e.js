(window.webpackJsonp=window.webpackJsonp||[]).push([[40,36],{471:function(t,e,n){"use strict";n.r(e);n(57);var o=n(470),r={props:{type:o.a.string.def("primary"),label:o.a.string.def("Save"),iconBtn:o.a.bool.def(!1),icon:o.a.string.def("checkmark"),additionalClasses:o.a.string.def("")},computed:{classes:function(){var t=this.iconBtn?"px-4 py-2":"p-2";return"cursor-pointer bg-".concat(this.type||"primary"," ").concat("raw"===this.type?"":"border text-white"," ").concat(t)}}},l=n(36),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("button",{class:[t.classes,t.additionalClasses,"rounded text-center flex items-center"],attrs:{type:"button"},on:{click:function(e){return t.$emit("click")}}},[t.iconBtn?t._e():e("span",[t._v(t._s(t.label))]),t._v(" "),t.icon&&!t.iconBtn?e("span",{staticClass:"pl-2"},[e("Icon",{attrs:{name:t.icon}})],1):e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.label,expression:"label"}]},[e("Icon",{attrs:{name:t.icon}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(472).default})},472:function(t,e,n){"use strict";n.r(e);n(473),n(26);var o=n(470),r={props:{name:o.a.string.def(""),small:o.a.bool.def(!1)}},l=n(36),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("svg",t._g({class:{"fill-current icon":!0,"cursor-pointer":!!t.$listeners,"w-2 h-2":t.small,"w-4 h-4":!t.small}},t.$listeners),[e("use",{attrs:{"xlink:href":"#icon-".concat(t.name)}})])}),[],!1,null,null,null);e.default=component.exports},474:function(t,e,n){"use strict";n.r(e);n(473),n(26);var o=n(470),r={props:{type:o.a.string.def("text"),name:o.a.string.def("input"),id:o.a.string.def("input"),label:o.a.string.def(""),placeholder:o.a.string.def(""),required:o.a.bool.def(!1),disabled:o.a.bool.def(!1),value:o.a.string.def(""),small:o.a.bool.def(!1)}},l=n(36),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{class:{"mt-2 mb-4":!t.small}},[t.label?e("h4",{staticClass:"label font-bold my-4"},[e("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),e("input",{class:[t.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:t.id,type:t.type,name:t.name,required:t.required,disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("enter")},input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports},477:function(t,e,n){"use strict";n.r(e);var o=n(510),r=n.n(o),l=n(470),c=(n(511),{components:{vSelect:r.a},props:{label:l.a.string.def(null),sublabel:l.a.string.def(null),placeholder:l.a.string.def(null),options:l.a.array.def([]),optionLabel:l.a.string.def("label"),multiple:l.a.bool.def(!1),taggable:l.a.bool.def(!1),pushTags:l.a.bool.def(!1),value:l.a.oneOfType([l.a.object,l.a.array]).def(null),small:l.a.bool.def(!1)}}),d=(n(485),n(36)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",[t.label?e("h4",{staticClass:"label font-bold my-4"},[e("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),t.sublabel?e("p",[t._v(t._s(t.sublabel))]):t._e(),t._v(" "),e("v-select",{attrs:{options:t.options,label:t.optionLabel,multiple:t.multiple,taggable:t.taggable,"push-tags":t.pushTags,placeholder:t.placeholder,value:t.value},on:{input:function(e){return t.$emit("input",e)}}})],1)}),[],!1,null,null,null);e.default=component.exports},478:function(t,e,n){var content=n(486);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("afdcce92",content,!0,{sourceMap:!1})},479:function(t,e,n){var content=n(488);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("e8fc41cc",content,!0,{sourceMap:!1})},480:function(t,e,n){var content=n(493);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("158f622b",content,!0,{sourceMap:!1})},485:function(t,e,n){"use strict";n(478)},486:function(t,e,n){var o=n(84)(!1);o.push([t.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),t.exports=o},487:function(t,e,n){"use strict";n(479)},488:function(t,e,n){var o=n(84)(!1);o.push([t.i,"#map{height:100%;min-height:400px}#infowindow-content .title{font-weight:700}#infowindow-content{display:none}#map #infowindow-content{display:inline}",""]),t.exports=o},489:function(t,e,n){"use strict";n.r(e);n(25),n(18),n(30),n(11),n(39),n(20),n(40);var o=n(13),r=n(470),l=n(31);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{anecdotes:r.a.array.def([])},data:function(){return{anecdoteModel:{}}},methods:d(d({},Object(l.b)("editor",["setValue"])),{},{handleInput:function(input){this.setValue(input),this.anecdoteModel=input}})},h=n(36),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"p-8"},[e("Select",{attrs:{options:t.anecdotes,"option-label":"anecdote_title",value:t.anecdoteModel},on:{input:t.handleInput}}),t._v(" "),e("div",{staticClass:"flex justify-end my-4"},[e("Btn",{attrs:{label:t.$t("general.confirm"),"additional-classes":"confirm-anecdote"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Select:n(477).default,Btn:n(471).default})},490:function(t,e,n){"use strict";n.r(e);var o={},r=(n(487),n(36)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"p-8"},[e("input-text",{attrs:{id:"pac-input",type:"text",placeholder:"Lieu - Luogo"}}),t._v(" "),e("div",{attrs:{id:"map"}}),t._v(" "),e("div",{attrs:{id:"infowindow-content"}},[e("img",{attrs:{id:"place-icon",src:"",width:"16",height:"16"}}),t._v(" "),e("span",{staticClass:"title",attrs:{id:"place-name"}}),e("br"),t._v(" "),e("span",{attrs:{id:"place-address"}})]),t._v(" "),e("div",{staticClass:"flex justify-end my-4"},[e("Btn",{attrs:{label:t.$t("general.confirm"),"additional-classes":"confirm-map-point"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputText:n(474).default,Btn:n(471).default})},492:function(t,e,n){"use strict";n(480)},493:function(t,e,n){var o=n(84)(!1);o.push([t.i,"[id^=editor]{width:100%;min-width:50vw;padding:20px;border:1px solid #d3d3d3;min-height:200px}",""]),t.exports=o},494:function(t,e,n){"use strict";n.r(e);n(26),n(25),n(18),n(30),n(11),n(39),n(20),n(40);var o=n(6),r=n(179),l=n(13),c=(n(52),n(57),n(51),n(470)),d=n(31),f=n(513),h=n.n(f),m=n(514),v=n.n(m),y=n(180),w=n(181),_=(n(44),n(58),n(45),n(32),n(106),n(139),function(){function t(e){var n=e.api;e.config;Object(y.a)(this,t),this.api=n,this.store=window.$nuxt.$store,this.button=null,this._state=!1,this.address=void 0,this.input=null,this.mapInitialized=!1,this.tag="SPAN",this.class="map-point"}return Object(w.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}},{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML='<svg class="fill-current w-4 h-4 icon cursor-pointer">\n                              <use xlink:href="#icon-location"></use>\n                            </svg>',this.button}},{key:"surround",value:function(t){this.state?this.unwrap(t):this.wrap(t)}},{key:"wrap",value:function(t){var e=t.extractContents(),n=document.createElement(this.tag),o=Math.floor(1e4*Math.random());n.classList.add(this.class),n.setAttribute("id","map-point-".concat(o)),n.appendChild(e),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(t){var e=this.api.selection.findParentTag(this.tag,this.class),text=t.extractContents();e.remove(),t.insertNode(text)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag);this.state=t&&Array.from(t.classList).includes("map-point"),this.mapPointId=t&&t.getAttribute("id"),this.state?this.showActions():this.hideActions()}},{key:"renderActions",value:function(){return this.anecdotePicker=document.createElement("input"),this.anecdotePicker.type="text",this.anecdotePicker.value="",this.anecdotePicker.hidden=!0,this.anecdotePicker}},{key:"showActions",value:function(){var t=this;console.log("show action",this.mapPointId),this.store.commit("modal/setVisible",!0),this.store.commit("modal/setModalId","map-point"),setTimeout((function(){t.mapInitialized||t.initMap(),document.querySelector(".confirm-map-point").addEventListener("click",(function(e){if(t.address){var n=t.address,address=n.address,o=n.lat,r=n.lng,l=document.querySelector("#".concat(t.mapPointId));l.getAttribute("data-address")||(l.setAttribute("data-address",address),l.setAttribute("data-lat",o),l.setAttribute("data-lng",r)),t.address=null,t.input.value="",t.store.commit("modal/setVisible",!1),t.store.commit("modal/setModalId",null),t.mapPoint=null,t.mapPointId=null}}))}))}},{key:"initMap",value:function(){var t=this,map=new window.google.maps.Map(document.getElementById("map"),{center:{lat:-33.8688,lng:151.2195},zoom:13});this.mapInitialized=!0,this.input=document.getElementById("pac-input");var e=new window.google.maps.places.Autocomplete(this.input);e.bindTo("bounds",map),e.setFields(["address_components","geometry","icon","name"]);var n=new window.google.maps.InfoWindow,o=document.getElementById("infowindow-content");n.setContent(o);var marker=new window.google.maps.Marker({map:map,anchorPoint:new window.google.maps.Point(0,-29)});e.addListener("place_changed",(function(){n.close(),marker.setVisible(!1);var r=e.getPlace();if(r.geometry){r.geometry.viewport?map.fitBounds(r.geometry.viewport):(map.setCenter(r.geometry.location),map.setZoom(17)),marker.setPosition(r.geometry.location),marker.setVisible(!0);var l=r.geometry.location.lat(),c=r.geometry.location.lng(),address="";r.address_components&&(address=[r.address_components[0]&&r.address_components[0].short_name||"",r.address_components[1]&&r.address_components[1].short_name||"",r.address_components[2]&&r.address_components[2].short_name||""].join(" ")),o&&(o.children["place-icon"].src=r.icon,o.children["place-name"].textContent=r.name,o.children["place-address"].textContent=address),n.open(map,marker),t.address={address:address,lat:l,lng:c}}else window.alert("No details available for input: '"+r.name+"'")}))}},{key:"hideActions",value:function(){}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:!0}}}]),t}()),k=function(){function t(e){var n=e.api;e.config;Object(y.a)(this,t),this.store=window.$nuxt.$store,this.api=n,this.button=null,this._state=!1,this.tag="SPAN",this.class="anecdote"}return Object(w.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}},{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=' <svg class="fill-current w-4 h-4 icon cursor-pointer">\n                                <use xlink:href="#icon-file-empty"></use>\n                              </svg>',this.button}},{key:"surround",value:function(t){this.state?this.unwrap(t):this.wrap(t)}},{key:"wrap",value:function(t){var e=t.extractContents(),n=document.createElement(this.tag);n.classList.add(this.class),n.appendChild(e),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(t){var e=this.api.selection.findParentTag(this.tag,this.class),text=t.extractContents();e.remove(),t.insertNode(text)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag);this.state=t&&Array.from(t.classList).includes("anecdote"),this.state?this.showActions(t):this.hideActions()}},{key:"renderActions",value:function(){return this.anecdotePicker=document.createElement("input"),this.anecdotePicker.type="text",this.anecdotePicker.value="",this.anecdotePicker.hidden=!0,this.anecdotePicker}},{key:"showActions",value:function(t){var e=this;this.store.commit("modal/setVisible",!0),this.store.commit("modal/setModalId","anecdote"),setTimeout((function(){document.querySelector(".confirm-anecdote").addEventListener("click",(function(n){var o=e.store.state.editor.value;t.classList.add("anecdote-".concat(o.anecdote_id)),t.setAttribute("data-title",o.anecdote_title),e.store.commit("modal/setVisible",!1),e.store.commit("modal/setModalId",null)}))}))}},{key:"hideActions",value:function(){}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:!0}}}]),t}(),x=function(t){var e={paragraph:"p"};return t.blocks.map((function(t){var n=document.createElement(e[t.type]);n.innerHTML=t.data.text;return function t(e){Array.from(e.children).forEach((function(e){e.getAttribute("style")&&e.removeAttribute("style"),Array.from(e.children).length&&t(e)}))}(n),n.outerHTML})).join("")};function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j={props:{name:c.a.string.def("editor"),data:c.a.object.def({}),anecdotes:c.a.array.def([]),tools:c.a.array.def([])},data:function(){return{editor:null,saveTrigger:!1,toolsMap:{list:v.a,map:{class:_,inlineToolbar:!0,config:{}},anecdote:{class:k,inlineToolbar:!0}}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(d.c)("modal",["modalId"])),watch:{saveTrigger:function(t,e){t!==e&&this.saveContent()}},mounted:function(){this.editor=new h.a({holder:"editor-".concat(this.name),tools:this.getTools(),data:this.data})},methods:{getTools:function(){var t=this,e={};return[].concat(Object(r.a)(this.tools),["list"]).map((function(n){e[n]=t.toolsMap[n]})),e},saveContent:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.editor.save();case 2:return n=e.sent,content=x(n),t.$emit("save",{content:content,rawContent:n}),e.abrupt("return",{content:content,rawContent:n});case 6:case"end":return e.stop()}}),e)})))()}}},P=j,C=(n(492),n(36)),component=Object(C.a)(P,(function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"editor-".concat(t.name)}}),t._v(" "),"anecdote"===t.modalId?e("AnecdoteModal",{attrs:{anecdotes:t.anecdotes}}):t._e(),t._v(" "),"map-point"===t.modalId?e("MapPointModal"):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AnecdoteModal:n(489).default,MapPointModal:n(490).default})}}]);