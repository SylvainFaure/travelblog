(window.webpackJsonp=window.webpackJsonp||[]).push([[51,3,14,15,16,36,40,60],{471:function(t,e,n){"use strict";n.r(e);n(57);var r=n(470),o={props:{type:r.a.string.def("primary"),label:r.a.string.def("Save"),iconBtn:r.a.bool.def(!1),icon:r.a.string.def("checkmark"),additionalClasses:r.a.string.def("")},computed:{classes:function(){var t=this.iconBtn?"px-4 py-2":"p-2";return"cursor-pointer bg-".concat(this.type||"primary"," ").concat("raw"===this.type?"":"border text-white"," ").concat(t)}}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("button",{class:[t.classes,t.additionalClasses,"rounded text-center flex items-center"],attrs:{type:"button"},on:{click:function(e){return t.$emit("click")}}},[t.iconBtn?t._e():e("span",[t._v(t._s(t.label))]),t._v(" "),t.icon&&!t.iconBtn?e("span",{staticClass:"pl-2"},[e("Icon",{attrs:{name:t.icon}})],1):e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.label,expression:"label"}]},[e("Icon",{attrs:{name:t.icon}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(472).default})},472:function(t,e,n){"use strict";n.r(e);n(473),n(26);var r=n(470),o={props:{name:r.a.string.def(""),small:r.a.bool.def(!1)}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("svg",t._g({class:{"fill-current icon":!0,"cursor-pointer":!!t.$listeners,"w-2 h-2":t.small,"w-4 h-4":!t.small}},t.$listeners),[e("use",{attrs:{"xlink:href":"#icon-".concat(t.name)}})])}),[],!1,null,null,null);e.default=component.exports},474:function(t,e,n){"use strict";n.r(e);n(473),n(26);var r=n(470),o={props:{type:r.a.string.def("text"),name:r.a.string.def("input"),id:r.a.string.def("input"),label:r.a.string.def(""),placeholder:r.a.string.def(""),required:r.a.bool.def(!1),disabled:r.a.bool.def(!1),value:r.a.string.def(""),small:r.a.bool.def(!1)}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{class:{"mt-2 mb-4":!t.small}},[t.label?e("h4",{staticClass:"label font-bold my-4"},[e("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),e("input",{class:[t.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:t.id,type:t.type,name:t.name,required:t.required,disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("enter")},input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports},477:function(t,e,n){"use strict";n.r(e);var r=n(510),o=n.n(r),c=n(470),l=(n(511),{components:{vSelect:o.a},props:{label:c.a.string.def(null),sublabel:c.a.string.def(null),placeholder:c.a.string.def(null),options:c.a.array.def([]),optionLabel:c.a.string.def("label"),multiple:c.a.bool.def(!1),taggable:c.a.bool.def(!1),pushTags:c.a.bool.def(!1),value:c.a.oneOfType([c.a.object,c.a.array]).def(null),small:c.a.bool.def(!1)}}),d=(n(485),n(36)),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("div",[t.label?e("h4",{staticClass:"label font-bold my-4"},[e("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),t.sublabel?e("p",[t._v(t._s(t.sublabel))]):t._e(),t._v(" "),e("v-select",{attrs:{options:t.options,label:t.optionLabel,multiple:t.multiple,taggable:t.taggable,"push-tags":t.pushTags,placeholder:t.placeholder,value:t.value},on:{input:function(e){return t.$emit("input",e)}}})],1)}),[],!1,null,null,null);e.default=component.exports},478:function(t,e,n){var content=n(486);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("afdcce92",content,!0,{sourceMap:!1})},479:function(t,e,n){var content=n(488);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("e8fc41cc",content,!0,{sourceMap:!1})},480:function(t,e,n){var content=n(493);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("158f622b",content,!0,{sourceMap:!1})},481:function(t,e,n){"use strict";n.r(e);n(25),n(18),n(39),n(20),n(40);var r=n(13),o=(n(30),n(11),n(470)),c=n(31);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{assets:o.a.array.def([]),picked:o.a.oneOfType([o.a.object,o.a.array]).def(null),pick:o.a.string.def("one"),pickLimit:o.a.number.def(null),data:o.a.object.def(null)},data:function(){return{pickedImage:null,pickedImages:[]}},mounted:function(){this.picked&&("one"===this.pick?this.pickedImage=this.picked:"multiple"===this.pick&&(this.pickedImages=this.picked))},methods:d(d({},Object(c.b)("modal",["setVisible","setModalId"])),{},{handlePick:function(image){this.pickedImage=image},handlePicks:function(t,e,n){"add"===n?this.pickedImages.push(e):this.pickedImages=this.pickedImages.filter((function(a){return a.asset_id!==e.asset_id}))},handleConfirm:function(){var t="one"===this.pick?this.pickedImage:this.pickedImages;this.$emit("confirm",t),this.setModalId(null),this.setVisible(!1)},handleCancel:function(){this.setModalId(null),this.setVisible(!1)}})},h=n(36),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"relative h-full"},["one"===t.pick&&t.pickedImage?e("div",{staticClass:"m-8"},[e("img",{staticClass:"h-48",attrs:{src:t.pickedImage.asset_src}})]):"multiple"===t.pick&&t.pickedImages?e("div",{staticClass:"m-8 flex flex-wrap"},t._l(t.pickedImages,(function(img){return e("div",{key:img.asset_id,staticClass:"mr-4"},[e("img",{staticClass:"h-32 m-2",attrs:{src:img.asset_src}})])})),0):t._e(),t._v(" "),e("AssetPickerLibrary",{attrs:{assets:t.assets,picked:t.picked,pick:t.pick,"pick-limit":t.pickLimit,data:t.data},on:{pick:t.handlePick,picks:t.handlePicks}}),t._v(" "),e("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[e("div",{staticClass:"flex justify-end"},[e("Btn",{attrs:{label:t.$t("general.confirm")},on:{click:t.handleConfirm}}),t._v(" "),e("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:t.handleCancel}})],1)])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AssetPickerLibrary:n(495).default,Btn:n(471).default})},482:function(t,e,n){"use strict";n.r(e);n(26);var r=n(470),o={props:{name:r.a.string.def("textarea"),placeholder:r.a.string.def(""),label:r.a.string.def(null),required:r.a.bool.def(!1),rows:r.a.number.def(4),value:r.a.string.def(""),classes:r.a.string.def("")}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",[t.label?e("h4",{staticClass:"label font-bold my-4"},[e("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),e("textarea",{class:[t.classes,"w-full p-2 rounded border border-grey-600"],attrs:{name:t.name,placeholder:t.placeholder,required:t.required,rows:t.rows},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Textarea:n(482).default})},483:function(t,e,n){"use strict";n.r(e);n(25),n(18),n(30),n(11),n(39),n(20),n(40);var r=n(6),o=n(13),c=(n(52),n(44),n(470)),l=n(31);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={props:{id:c.a.string.def("new-block"),type:c.a.string.def("paragraph"),content:c.a.any.def(null),edit:c.a.bool.def(!1),assets:c.a.array.def([]),data:c.a.object.def({})},data:function(){return{imageType:"desktop",model:{desktop:null,mobile:null,playlist:""}}},computed:f({},Object(l.c)("modal",["modalId"])),methods:f(f({},Object(l.b)("modal",["setVisible","setModalId"])),{},{getTools:function(t){return"map-description"===t?["map"]:"anecdote"===t?["anecdote"]:[]},selectImage:function(t){this.imageType=t,this.setModalId("editor-asset"),this.setVisible(!0)},handleConfirm:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(content="",["image","playlist"].includes(t.type)){e.next=7;break}return e.next=4,t.$refs.textEditor.saveContent();case 4:content=e.sent,e.next=8;break;case 7:"image"===t.type?content={content:{desktop:t.model.desktop||t.content.desktop,mobile:t.model.mobile||t.content.mobile}}:"playlist"===t.type&&(content={content:t.model[t.type]});case 8:t.$emit("confirm",t.type,content,t.id);case 9:case"end":return e.stop()}}),e)})))()},handleCancel:function(){this.$emit("cancel")},handleConfirmImage:function(t){this.model[this.imageType]=t}})},v=n(36),component=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-2"},["image"===t.type?e("div",{staticClass:"flex justify-center"},[e("div",{staticClass:"h-full flex justify-center"},[t.edit||t.model.desktop?e("img",{staticClass:"h-48",attrs:{src:t.model.desktop?t.model.desktop.asset_src:t.content.desktop.asset_src}}):t._e(),t._v(" "),e("div",{class:{"h-full flex items-center ml-4":t.edit||t.model.desktop,"flex justify-center mx-4":!t.edit}},[e("Btn",{attrs:{"icon-btn":"",icon:"pencil",label:t.$t("general.desktop")},on:{click:function(e){return t.selectImage("desktop")}}})],1)]),t._v(" "),e("div",{staticClass:"h-full flex justify-center"},[t.edit||t.model.mobile?e("img",{staticClass:"h-48",attrs:{src:t.model.mobile?t.model.mobile.asset_src:t.content.mobile.asset_src}}):t._e(),t._v(" "),e("div",{class:{"h-full flex items-center ml-4":t.edit||t.model.mobile,"flex justify-center mx-4":!t.edit}},[e("Btn",{attrs:{"icon-btn":"",icon:"pencil",label:t.$t("general.mobile")},on:{click:function(e){return t.selectImage("mobile")}}})],1)])]):"playlist"===t.type?e("div",[e("InputText",{attrs:{value:t.edit?t.content:""},model:{value:t.model.playlist,callback:function(e){t.$set(t.model,"playlist",e)},expression:"model.playlist"}})],1):e("div",[e("TextEditor",{ref:"textEditor",attrs:{name:"block-editor-comp-".concat(t.type),data:t.edit?t.content:null,anecdotes:t.data?t.data.anecdotes:null,tools:t.getTools(t.type)}})],1),t._v(" "),e("div",{staticClass:"flex justify-center my-2"},[e("Btn",{attrs:{label:t.$t("general.confirm")},on:{click:t.handleConfirm}}),t._v(" "),e("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:t.handleCancel}})],1),t._v(" "),"editor-asset"===t.modalId?e("AssetsModal",{attrs:{assets:t.assets,data:t.data,picked:t.edit?t.content[t.imageType]:null},on:{confirm:t.handleConfirmImage}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Btn:n(471).default,InputText:n(474).default,TextEditor:n(494).default,AssetsModal:n(481).default})},484:function(t,e,n){"use strict";n.r(e);var r={},o=n(36),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"flex flex-col justify-center items-center m-16"},[e("h4",{staticClass:"font-bold text-lg text-center mb-4"},[t._v(t._s(t.$t("general.sure")))]),t._v(" "),e("div",{staticClass:"flex justify-center"},[e("Btn",{attrs:{label:t.$t("general.confirm"),"additional-classes":"mr-4"},on:{click:function(e){return t.$emit("confirm")}}}),t._v(" "),e("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:function(e){return t.$emit("cancel")}}})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Btn:n(471).default})},485:function(t,e,n){"use strict";n(478)},486:function(t,e,n){var r=n(84)(!1);r.push([t.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),t.exports=r},487:function(t,e,n){"use strict";n(479)},488:function(t,e,n){var r=n(84)(!1);r.push([t.i,"#map{height:100%;min-height:400px}#infowindow-content .title{font-weight:700}#infowindow-content{display:none}#map #infowindow-content{display:inline}",""]),t.exports=r},489:function(t,e,n){"use strict";n.r(e);n(25),n(18),n(30),n(11),n(39),n(20),n(40);var r=n(13),o=n(470),c=n(31);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{anecdotes:o.a.array.def([])},data:function(){return{anecdoteModel:{}}},methods:d(d({},Object(c.b)("editor",["setValue"])),{},{handleInput:function(input){this.setValue(input),this.anecdoteModel=input}})},h=n(36),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"p-8"},[e("Select",{attrs:{options:t.anecdotes,"option-label":"anecdote_title",value:t.anecdoteModel},on:{input:t.handleInput}}),t._v(" "),e("div",{staticClass:"flex justify-end my-4"},[e("Btn",{attrs:{label:t.$t("general.confirm"),"additional-classes":"confirm-anecdote"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Select:n(477).default,Btn:n(471).default})},490:function(t,e,n){"use strict";n.r(e);var r={},o=(n(487),n(36)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"p-8"},[e("input-text",{attrs:{id:"pac-input",type:"text",placeholder:"Lieu - Luogo"}}),t._v(" "),e("div",{attrs:{id:"map"}}),t._v(" "),e("div",{attrs:{id:"infowindow-content"}},[e("img",{attrs:{id:"place-icon",src:"",width:"16",height:"16"}}),t._v(" "),e("span",{staticClass:"title",attrs:{id:"place-name"}}),e("br"),t._v(" "),e("span",{attrs:{id:"place-address"}})]),t._v(" "),e("div",{staticClass:"flex justify-end my-4"},[e("Btn",{attrs:{label:t.$t("general.confirm"),"additional-classes":"confirm-map-point"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputText:n(474).default,Btn:n(471).default})},491:function(t,e,n){var content=n(508);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("79a66dfc",content,!0,{sourceMap:!1})},492:function(t,e,n){"use strict";n(480)},493:function(t,e,n){var r=n(84)(!1);r.push([t.i,"[id^=editor]{width:100%;min-width:50vw;padding:20px;border:1px solid #d3d3d3;min-height:200px}",""]),t.exports=r},494:function(t,e,n){"use strict";n.r(e);n(26),n(25),n(18),n(30),n(11),n(39),n(20),n(40);var r=n(6),o=n(179),c=n(13),l=(n(52),n(57),n(51),n(470)),d=n(31),f=n(513),h=n.n(f),v=n(514),m=n.n(v),_=n(180),y=n(181),k=(n(44),n(58),n(45),n(32),n(106),n(139),function(){function t(e){var n=e.api;e.config;Object(_.a)(this,t),this.api=n,this.store=window.$nuxt.$store,this.button=null,this._state=!1,this.address=void 0,this.input=null,this.mapInitialized=!1,this.tag="SPAN",this.class="map-point"}return Object(y.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}},{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML='<svg class="fill-current w-4 h-4 icon cursor-pointer">\n                              <use xlink:href="#icon-location"></use>\n                            </svg>',this.button}},{key:"surround",value:function(t){this.state?this.unwrap(t):this.wrap(t)}},{key:"wrap",value:function(t){var e=t.extractContents(),n=document.createElement(this.tag),r=Math.floor(1e4*Math.random());n.classList.add(this.class),n.setAttribute("id","map-point-".concat(r)),n.appendChild(e),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(t){var e=this.api.selection.findParentTag(this.tag,this.class),text=t.extractContents();e.remove(),t.insertNode(text)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag);this.state=t&&Array.from(t.classList).includes("map-point"),this.mapPointId=t&&t.getAttribute("id"),this.state?this.showActions():this.hideActions()}},{key:"renderActions",value:function(){return this.anecdotePicker=document.createElement("input"),this.anecdotePicker.type="text",this.anecdotePicker.value="",this.anecdotePicker.hidden=!0,this.anecdotePicker}},{key:"showActions",value:function(){var t=this;console.log("show action",this.mapPointId),this.store.commit("modal/setVisible",!0),this.store.commit("modal/setModalId","map-point"),setTimeout((function(){t.mapInitialized||t.initMap(),document.querySelector(".confirm-map-point").addEventListener("click",(function(e){if(t.address){var n=t.address,address=n.address,r=n.lat,o=n.lng,c=document.querySelector("#".concat(t.mapPointId));c.getAttribute("data-address")||(c.setAttribute("data-address",address),c.setAttribute("data-lat",r),c.setAttribute("data-lng",o)),t.address=null,t.input.value="",t.store.commit("modal/setVisible",!1),t.store.commit("modal/setModalId",null),t.mapPoint=null,t.mapPointId=null}}))}))}},{key:"initMap",value:function(){var t=this,map=new window.google.maps.Map(document.getElementById("map"),{center:{lat:-33.8688,lng:151.2195},zoom:13});this.mapInitialized=!0,this.input=document.getElementById("pac-input");var e=new window.google.maps.places.Autocomplete(this.input);e.bindTo("bounds",map),e.setFields(["address_components","geometry","icon","name"]);var n=new window.google.maps.InfoWindow,r=document.getElementById("infowindow-content");n.setContent(r);var marker=new window.google.maps.Marker({map:map,anchorPoint:new window.google.maps.Point(0,-29)});e.addListener("place_changed",(function(){n.close(),marker.setVisible(!1);var o=e.getPlace();if(o.geometry){o.geometry.viewport?map.fitBounds(o.geometry.viewport):(map.setCenter(o.geometry.location),map.setZoom(17)),marker.setPosition(o.geometry.location),marker.setVisible(!0);var c=o.geometry.location.lat(),l=o.geometry.location.lng(),address="";o.address_components&&(address=[o.address_components[0]&&o.address_components[0].short_name||"",o.address_components[1]&&o.address_components[1].short_name||"",o.address_components[2]&&o.address_components[2].short_name||""].join(" ")),r&&(r.children["place-icon"].src=o.icon,r.children["place-name"].textContent=o.name,r.children["place-address"].textContent=address),n.open(map,marker),t.address={address:address,lat:c,lng:l}}else window.alert("No details available for input: '"+o.name+"'")}))}},{key:"hideActions",value:function(){}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:!0}}}]),t}()),O=function(){function t(e){var n=e.api;e.config;Object(_.a)(this,t),this.store=window.$nuxt.$store,this.api=n,this.button=null,this._state=!1,this.tag="SPAN",this.class="anecdote"}return Object(y.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}},{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=' <svg class="fill-current w-4 h-4 icon cursor-pointer">\n                                <use xlink:href="#icon-file-empty"></use>\n                              </svg>',this.button}},{key:"surround",value:function(t){this.state?this.unwrap(t):this.wrap(t)}},{key:"wrap",value:function(t){var e=t.extractContents(),n=document.createElement(this.tag);n.classList.add(this.class),n.appendChild(e),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(t){var e=this.api.selection.findParentTag(this.tag,this.class),text=t.extractContents();e.remove(),t.insertNode(text)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag);this.state=t&&Array.from(t.classList).includes("anecdote"),this.state?this.showActions(t):this.hideActions()}},{key:"renderActions",value:function(){return this.anecdotePicker=document.createElement("input"),this.anecdotePicker.type="text",this.anecdotePicker.value="",this.anecdotePicker.hidden=!0,this.anecdotePicker}},{key:"showActions",value:function(t){var e=this;this.store.commit("modal/setVisible",!0),this.store.commit("modal/setModalId","anecdote"),setTimeout((function(){document.querySelector(".confirm-anecdote").addEventListener("click",(function(n){var r=e.store.state.editor.value;t.classList.add("anecdote-".concat(r.anecdote_id)),t.setAttribute("data-title",r.anecdote_title),e.store.commit("modal/setVisible",!1),e.store.commit("modal/setModalId",null)}))}))}},{key:"hideActions",value:function(){}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:!0}}}]),t}(),j=function(t){var e={paragraph:"p"};return t.blocks.map((function(t){var n=document.createElement(e[t.type]);n.innerHTML=t.data.text;return function t(e){Array.from(e.children).forEach((function(e){e.getAttribute("style")&&e.removeAttribute("style"),Array.from(e.children).length&&t(e)}))}(n),n.outerHTML})).join("")};function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var x={props:{name:l.a.string.def("editor"),data:l.a.object.def({}),anecdotes:l.a.array.def([]),tools:l.a.array.def([])},data:function(){return{editor:null,saveTrigger:!1,toolsMap:{list:m.a,map:{class:k,inlineToolbar:!0,config:{}},anecdote:{class:O,inlineToolbar:!0}}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(d.c)("modal",["modalId"])),watch:{saveTrigger:function(t,e){t!==e&&this.saveContent()}},mounted:function(){this.editor=new h.a({holder:"editor-".concat(this.name),tools:this.getTools(),data:this.data})},methods:{getTools:function(){var t=this,e={};return[].concat(Object(o.a)(this.tools),["list"]).map((function(n){e[n]=t.toolsMap[n]})),e},saveContent:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.editor.save();case 2:return n=e.sent,content=j(n),t.$emit("save",{content:content,rawContent:n}),e.abrupt("return",{content:content,rawContent:n});case 6:case"end":return e.stop()}}),e)})))()}}},C=x,$=(n(492),n(36)),component=Object($.a)(C,(function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"editor-".concat(t.name)}}),t._v(" "),"anecdote"===t.modalId?e("AnecdoteModal",{attrs:{anecdotes:t.anecdotes}}):t._e(),t._v(" "),"map-point"===t.modalId?e("MapPointModal"):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AnecdoteModal:n(489).default,MapPointModal:n(490).default})},495:function(t,e,n){"use strict";n.r(e);n(44),n(58),n(25),n(39),n(40);var r=n(6),o=n(13),c=(n(52),n(30),n(11),n(51),n(27),n(70),n(505),n(499),n(138),n(20),n(18),n(46),n(586)),l=n(470),d=n(31);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={props:{assets:l.a.array.def([]),pick:l.a.string.def(null),picked:l.a.oneOfType([l.a.array,l.a.object]).def(null),data:l.a.object.def({}),pickLimit:l.a.number.def(null)},data:function(){var t=this.$i18n.locale;return{locale:t,otherLocale:"fr"===t?"it":"fr",pickedAsset:null,pickedAssetsIds:[],assetToRemove:null,assetToEdit:null,filters:{travel:null,place:null}}},computed:h(h({},Object(d.c)("modal",["modalId"])),{},{places:function(){var t=this;return this.data.articles.map((function(article){var e=article["article_place_".concat(t.locale)];if(e)return{key:e.toLowerCase().replaceAll(" ","_"),label:e}})).filter((function(t){return!!t}))},filteredAssets:function(){var t=this;return this.assets.filter((function(e){return t.filters.travel&&t.filters.place?t.filters.travel===Number(e.asset_travel_id)&&!!e["asset_place_".concat(t.locale)]&&t.filters.place===e["asset_place_".concat(t.locale)]:!t.filters.travel&&!t.filters.place||(t.filters.travel===Number(e.asset_travel_id)||t.filters.place===e["asset_place_".concat(t.locale)])}))}}),mounted:function(){var t=this;this.locale=this.$i18n.locale,this.picked&&("multiple"===this.pick?this.pickedAssetsIds=this.picked.map((function(p){return p.asset_id})):(this.pickedAsset=this.picked,this.$nextTick((function(){t.initWithPicked()}))))},methods:h(h({},Object(d.b)("modal",["setVisible","setModalId"])),{},{getUploadDate:function(t){var e=t.split("_")[0];return Object(c.a)(new Date(Number(e)),"dd/MM/yyyy")},getTravelTitle:function(t){var e=this.data.travels.find((function(e){return e.travel_id===t}));return e["travel_title_".concat(this.locale)]?e["travel_title_".concat(this.locale)]:'<span class="italic text-gray-400">'.concat(e["travel_title_".concat(this.otherLocale)],"</span>")},initWithPicked:function(){var t=this;this.$refs.asset.forEach((function(a){Number(a.getAttribute("id"))!==Number(t.pickedAsset.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")}))},handlePickOneAsset:function(t){var e=this;this.$refs.asset.forEach((function(a){e.pickedAsset&&e.pickedAsset.asset_id===t.asset_id?a.classList.remove("opacity-50"):Number(a.getAttribute("id"))!==Number(t.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")})),this.pickedAsset=t},handleAssetPick:function(t,e){var n,r=this;(e.stopPropagation(),e.preventDefault(),"one"===this.pick&&(this.handlePickOneAsset(t),this.$emit("pick",t)),"multiple"===this.pick)&&((!this.pickLimit||this.pickedAssetsIds.length<this.pickLimit||this.pickedAssetsIds.length===this.pickLimit&&!e.target.checked)&&(e.target.checked?(n="add",this.pickedAssetsIds.push(t.asset_id)):(n="remove",this.pickedAssetsIds=this.pickedAssetsIds.filter((function(a){return a!==t.asset_id}))),this.pickedAssetsIds.length===this.pickLimit?this.$refs.assetContainer.forEach((function(a){r.pickedAssetsIds.includes(Number(a.getAttribute("id").replace("container_","")))||(a.classList.add("pointer-events-none"),a.classList.add("opacity-50"))})):this.$refs.assetContainer.forEach((function(a){a.classList.remove("pointer-events-none"),a.classList.remove("opacity-50")})),this.$emit("picks",this.pickedAssetsIds,t,n)))},handleEdit:function(t){this.assetToEdit=t,this.setVisible(!0),this.setModalId("asset-edit")},handleRemove:function(t){this.assetToRemove=t,this.setVisible(!0),this.setModalId("asset-remove")},removeAsset:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/api/assets/delete",{ids:[t.assetToRemove.asset_id],names:[t.assetToRemove.asset_name]});case 3:t.$toast.success(t.$t("assets.removed_success")),t.$emit("change"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.$toast.error(t.$t("assets.removed_error"));case 11:return e.prev=11,t.closeRemoveModal(),t.assetToRemove=null,e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,7,11,15]])})))()},updateAsset:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=h(h({},e),{},(c={},Object(o.a)(c,"asset_desc_".concat(n.locale),t.description),Object(o.a)(c,"asset_title_".concat(n.locale),t.title),Object(o.a)(c,"asset_article_ids",JSON.stringify(t.article_ids.map((function(t){return Number(t.article_id)})))),Object(o.a)(c,"asset_travel_id",Number(t.travel.travel_id)),c)),r.prev=1,r.next=4,n.$axios.put("/api/assets/".concat(e.asset_id),l);case 4:n.$toast.success(n.$t("assets.updated_success")),n.$emit("change"),n.assetToEdit=null,r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.log(r.t0),n.$toast.error(n.$t("assets.updated_error"));case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},closeRemoveModal:function(){this.setVisible(!1),this.setModalId(null)},handleFilter:function(t){t.travel_id?this.filters.travel=this.filters.travel===t.travel_id?null:t.travel_id:this.filters.place=this.filters.place===t.label?null:t.label}})},m=(n(507),n(36)),component=Object(m.a)(v,(function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"m-6"},[e("div",{staticClass:"flex my-4"},[e("div",{staticClass:"w-1/2 flex flex-col items-center"},[e("h4",[t._v(t._s(t.$t("assets.filter_by_travel")))]),t._v(" "),e("div",{staticClass:"flex flex-wrap justify-center w-full"},t._l(t.data.travels,(function(n){return e("Tag",{key:n.travel_id,staticClass:"mr-2 my-2",attrs:{tag:n["travel_title_".concat(t.locale)],selectable:"",selected:t.filters.travel===n.travel_id},on:{click:function(e){return t.handleFilter(n)}}})})),1)]),t._v(" "),e("div",{staticClass:"w-1/2 flex flex-col items-center"},[e("h4",[t._v(t._s(t.$t("assets.filter_by_place")))]),t._v(" "),e("div",{staticClass:"flex flex-wrap justify-center w-full"},t._l(t.places,(function(n){return e("Tag",{key:n.key,staticClass:"mr-2 my-2",attrs:{tag:n.label,selectable:"",selected:t.filters.place===n.label},on:{click:function(e){return t.handleFilter(n)}}})})),1)])]),t._v(" "),e("div",{staticClass:"flex flex-wrap justify-center"},[t._l(t.filteredAssets,(function(n,i){return e("div",{key:i,ref:"assetContainer",refInFor:!0,class:{"w-64 mr-4 my-2 relative":!0,"h-80 border border-grey-100":!t.pick},attrs:{id:"container_".concat(n.asset_id)}},["multiple"===t.pick?e("span",{staticClass:"absolute top-0 right-0"},[e("input",{staticClass:"mr-2 mt-2 z-20",attrs:{type:"checkbox"},domProps:{checked:t.pickedAssetsIds.includes(n.asset_id)},on:{change:function(e){return t.handleAssetPick(n,e)}}})]):t._e(),t._v(" "),e("div",{class:{"backdrop-container max-h-2/3 overflow-hidden relative flex justify-center items-center":!t.pick}},[t.pick?t._e():e("div",{staticClass:"backdrop opacity-0 absolute inset-0 h-full w-full hover:opacity-100 transition-opacity duration-300 bg-blue-100 bg-opacity-50"}),t._v(" "),t.pick?t._e():e("div",{staticClass:"backdrop-content z-10 flex absolute inset-0 justify-center items-center opacity-0"},[e("Btn",{attrs:{"icon-btn":"",icon:"pencil"},on:{click:function(e){return t.handleEdit(n)}}}),t._v(" "),e("Btn",{attrs:{"icon-btn":"",type:"secondary",icon:"bin"},on:{click:function(e){return t.handleRemove(n)}}})],1),t._v(" "),e("img",{ref:"asset",refInFor:!0,class:{"max-h-2/3":!t.pick,"cursor-pointer":t.pick,"w-full overflow-hidden":!0},attrs:{id:n.asset_id,src:n.asset_src},on:{click:function(e){return t.handleAssetPick(n,e)}}})]),t._v(" "),t.pick?t._e():e("div",{staticClass:"asset__infos p-4"},[n["asset_title_".concat(t.$i18n.locale)]?e("p",{staticClass:"font-bold text-lg"},[t._v("\n            "+t._s(n["asset_title_".concat(t.$i18n.locale)])+"\n          ")]):t._e(),t._v(" "),n["asset_place_".concat(t.$i18n.locale)]?e("p",{staticClass:"font-bold text-sm"},[t._v("\n            "+t._s(n["asset_place_".concat(t.$i18n.locale)])+"\n          ")]):t._e(),t._v(" "),e("p",{staticClass:"text-sm text-gray-600"},[t._v("\n            "+t._s(t.$t("assets.uploaded"))+"\n            "+t._s(t.getUploadDate(n.asset_name))+"\n          ")]),t._v(" "),n["asset_desc_".concat(t.$i18n.locale)]?e("p",{staticClass:"text-sm text-gray-600"},[t._v("\n            "+t._s(t.$t("assets.description"))+"\n            "+t._s(n["asset_desc_".concat(t.$i18n.locale)])+"\n          ")]):t._e(),t._v(" "),n.asset_travel_id?e("p",{staticClass:"text-sm text-gray-600 font-bold",domProps:{innerHTML:t._s(t.getTravelTitle(n.asset_travel_id))}}):t._e()])])})),t._v(" "),t.filteredAssets.length?t._e():e("div",{staticClass:"flex justify-center max-w-1/4 my-16"},[t._v("\n        "+t._s(t.$t("assets.filtered_empty"))+"\n      ")])],2),t._v(" "),"asset-remove"===t.modalId?e("RemoveModal",{on:{confirm:t.removeAsset,cancel:t.closeRemoveModal}}):t._e(),t._v(" "),"asset-edit"===t.modalId?e("EditAssetModal",{attrs:{travels:t.data.travels,articles:t.data.articles,image:t.assetToEdit},on:{confirm:t.updateAsset,cancel:t.closeRemoveModal}}):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Tag:n(496).default,Btn:n(471).default,RemoveModal:n(484).default,EditAssetModal:n(500).default})},496:function(t,e,n){"use strict";n.r(e);n(57);var r=n(470),o={props:{deletable:r.a.bool.def(!1),selectable:r.a.bool.def(!1),selected:r.a.bool.def(!1),tag:r.a.string.def("")},computed:{color:function(){var t=["gray","indigo","red","orange","yellow","green","teal","blue","purple","pink"];return"".concat(this.selectable&&!this.selected?"border-2 border-":"text-white bg-").concat(t[Math.floor(Math.random()*(t.length-1))],"-500")}}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{class:[t.color,"text-xs rounded-md px-2 py-1",{"cursor-pointer":t.selectable}],on:{click:function(e){return t.$emit("click")}}},[e("span",[t._v(t._s(t.tag?"#".concat(t.tag):"# No place"))]),t._v(" "),t.deletable?e("span",{staticClass:"cursor-pointer font-bold",on:{click:function(e){return t.$emit("remove",t.tag)}}},[t._v("x")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},497:function(t,e,n){"use strict";n.r(e);n(44);var r=n(470),o={props:{id:r.a.string.def("block"),position:r.a.number.def(0),type:r.a.string.def(null),content:r.a.any.def(null),assets:r.a.array.def([]),data:r.a.object.def({}),rawContent:r.a.object.def({})},data:function(){return{isEditing:!1,actions:[{key:"edit",icon:"pencil"},{key:"remove",icon:"cross"},{key:"up",icon:"arrow-up2"},{key:"down",icon:"arrow-down2"}]}},methods:{handleAction:function(t){this.$emit(t.key,this.id),"edit"===t.key&&(this.isEditing=!0)},confirmModification:function(t,content,e){this.$emit("confirm",t,content,e),this.isEditing=!1}}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",[t.isEditing?e("div",[e("hr"),t._v(" "),e("BlockEditorComp",{attrs:{id:t.id,edit:"",type:t.type,assets:t.assets,data:t.data,content:["image","playlist"].includes(t.type)?t.content:t.rawContent},on:{confirm:t.confirmModification,cancel:function(e){t.isEditing=!1}}})],1):e("div",[e("hr"),t._v(" "),e("div",{staticClass:"my-4"},[e("div",{staticClass:"flex justify-between mb-2"},[e("p",{staticClass:"uppercase"},[t._v(t._s(t.type))]),t._v(" "),e("div",{staticClass:"flex"},t._l(t.actions,(function(n){return e("div",{key:n.key,staticClass:"rounded-full w-8 h-8 mx-1 flex justify-center items-center cursor-pointer border-2 border-black",on:{click:function(e){return t.handleAction(n)}}},[e("Icon",{attrs:{name:n.icon}})],1)})),0)]),t._v(" "),"image"===t.type?e("div",{staticClass:"flex"},[e("div",{staticClass:"mr-2"},[e("img",{staticClass:"h-48",attrs:{src:t.content.desktop?t.content.desktop.asset_src:""}}),t._v(" "),e("p",[t._v(t._s(t.$t("general.desktop")))])]),t._v(" "),e("div",[e("img",{staticClass:"h-48",attrs:{src:t.content.mobile?t.content.mobile.asset_src:""}}),t._v(" "),e("p",[t._v(t._s(t.$t("general.mobile")))])])]):e("p",{domProps:{innerHTML:t._s(t.content)}})])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(472).default,BlockEditorComp:n(483).default})},499:function(t,e,n){"use strict";var r=n(14),o=n(7),c=n(4),l=n(108),d=n(24),f=n(15),h=n(182),v=n(62),m=n(107),_=n(267),y=n(3),k=n(86).f,O=n(59).f,j=n(19).f,w=n(502),x=n(503).trim,C="Number",$=o.Number,P=$.prototype,A=o.TypeError,I=c("".slice),E=c("".charCodeAt),T=function(t){var e=_(t,"number");return"bigint"==typeof e?e:M(e)},M=function(t){var e,n,r,o,c,l,d,code,f=_(t,"number");if(m(f))throw A("Cannot convert a Symbol value to a number");if("string"==typeof f&&f.length>2)if(f=x(f),43===(e=E(f,0))||45===e){if(88===(n=E(f,2))||120===n)return NaN}else if(48===e){switch(E(f,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+f}for(l=(c=I(f,2)).length,d=0;d<l;d++)if((code=E(c,d))<48||code>o)return NaN;return parseInt(c,r)}return+f};if(l(C,!$(" 0o1")||!$("0b1")||$("+0x1"))){for(var B,S=function(t){var e=arguments.length<1?0:$(T(t)),n=this;return v(P,n)&&y((function(){w(n)}))?h(Object(e),n,S):e},L=r?k($):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),N=0;L.length>N;N++)f($,B=L[N])&&!f(S,B)&&j(S,B,O($,B));S.prototype=P,P.constructor=S,d(o,C,S,{constructor:!0})}},500:function(t,e,n){"use strict";n.r(e);n(26),n(18),n(46);var r=n(13),o=(n(30),n(11),n(44),n(58),n(138),n(25),n(39),n(20),n(40),n(470)),c=n(31);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{image:o.a.object.def(null),articles:o.a.array.def([]),travels:o.a.array.def([])},data:function(){return{locale:"",model:{name:"",title:"",place:"",description:"",article_ids:[],travel:null}}},mounted:function(){var t=this.$i18n.locale;this.locale=t;var e=this.image,n=e.asset_name,r=e.asset_article_ids,o=e.asset_travel_id;this.model={name:n,title:this.image["asset_title_".concat(t)],place:this.image["asset_place_".concat(t)],description:this.image["asset_desc_".concat(t)],article_ids:r?this.articles.filter((function(article){return r.includes(article.article_id)})):[],travel:o?this.travels.find((function(t){return t.travel_id===o})):null}},methods:d(d({},Object(c.b)("modal",["setVisible","setModalId"])),{},{handleConfirm:function(){this.$emit("confirm",this.model,this.image),this.closeModal()},handleCancel:function(){this.closeModal()},closeModal:function(){this.setModalId(null),this.setVisible(!1)},handleReduce:function(option){return option["article_title_".concat(this.locale)]}})},h=n(36),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("portal",{attrs:{to:"modal"}},[e("div",[e("div",{staticClass:"h-full flex"},[e("div",{staticClass:"m-8"},[e("img",{staticClass:"h-48",attrs:{src:t.image.asset_src}})]),t._v(" "),e("div",{staticClass:"mr-8 mb-8 w-full max-w-2/3"},[e("InputText",{attrs:{label:t.$t("assets.edit.name"),disabled:""},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),t._v(" "),e("InputText",{attrs:{label:t.$t("assets.edit.title")},model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}}),t._v(" "),e("InputText",{attrs:{label:t.$t("assets.edit.place")},model:{value:t.model.place,callback:function(e){t.$set(t.model,"place",e)},expression:"model.place"}}),t._v(" "),e("Textarea",{attrs:{label:t.$t("assets.edit.description")},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),t._v(" "),e("Select",{attrs:{multiple:"",label:t.$t("assets.edit.articles"),options:t.articles,"option-label":"article_title_".concat(t.locale)},model:{value:t.model.article_ids,callback:function(e){t.$set(t.model,"article_ids",e)},expression:"model.article_ids"}}),t._v(" "),e("Select",{attrs:{label:t.$t("assets.edit.travel"),options:t.travels,"option-label":"travel_title_".concat(t.locale)},model:{value:t.model.travel,callback:function(e){t.$set(t.model,"travel",e)},expression:"model.travel"}})],1)]),t._v(" "),e("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[e("div",{staticClass:"flex justify-end"},[e("Btn",{attrs:{label:t.$t("general.confirm")},on:{click:t.handleConfirm}}),t._v(" "),e("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:t.handleCancel}})],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputText:n(474).default,Textarea:n(482).default,Select:n(477).default,Btn:n(471).default})},501:function(t,e,n){"use strict";n.r(e);n(57),n(25),n(18),n(39),n(20),n(40);var r=n(13),o=n(179),c=(n(51),n(30),n(11),n(44),n(58),n(266),n(138),n(470));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{label:c.a.string.def(""),blocks:c.a.array.def([]),addons:c.a.array.def(null),assets:c.a.array.def([]),data:c.a.object.def({}),removeActions:c.a.array.def([])},data:function(){var t=this,e=this.addons.map((function(t){return"map-description"===t&&(t={key:"map-description",label:"Description avec carte",icon:"map"}),"anecdote"===t&&(t={key:"anecdote",label:"Description avec anecdotes",icon:"file-empty"}),t}));return{orderedBlocks:[],activeAction:null,actions:[].concat([{key:"paragraph",label:"Paragraphe",icon:"paragraph-left"},{key:"subtitle",label:"Sous-titre",icon:"pilcrow"},{key:"image",label:"Image",icon:"image"},{key:"catch",label:"Phrase d'accroche",icon:"bold"},{key:"playlist",label:"Playlist",icon:"spotify"}],Object(o.a)(e)).filter((function(e){return!t.removeActions.includes(e.key)}))}},mounted:function(){this.orderedBlocks=this.blocks?this.blocks.sort((function(a,b){return a.position-b.position})):[]},methods:{confirmModification:function(t,content,e){"new-block"===e?(this.createNewBlock(t,content),this.activeAction=null):this.orderedBlocks=this.orderedBlocks.map((function(n){return n.id===e&&("image"===t?n.content=content.content:n=d(d({},n),content)),n}))},createNewBlock:function(t,content){var e=Math.floor(1e3*Math.random()),component=d({id:"".concat(t,"-").concat(e),type:t,position:this.orderedBlocks.length},content);this.orderedBlocks.push(component)},handleOrder:function(t,e){var n=this.orderedBlocks.find((function(t){return t.id===e}));if("up"===t&&n.position>0){var r=this.orderedBlocks.find((function(t){return t.position===n.position-1})).id;this.orderedBlocks=this.orderedBlocks.map((function(b){return b.id===e?b.position-=1:b.id===r&&(b.position+=1),b})).sort((function(a,b){return a.position-b.position}))}else if("down"===t&&n.position<this.orderedBlocks.length-1){var o=this.orderedBlocks.find((function(t){return t.position===n.position+1})).id;this.orderedBlocks=this.orderedBlocks.map((function(b){return b.id===e?b.position+=1:b.id===o&&(b.position-=1),b})).sort((function(a,b){return a.position-b.position}))}},handleRemove:function(t){var e=this.orderedBlocks.find((function(b){return b.id===t}));this.orderedBlocks=this.orderedBlocks.map((function(b){return b.position>e.position&&(b.position-=1),b})).filter((function(b){return b.id!==t}))},getBlocks:function(){return this.orderedBlocks}}},h=f,v=n(36),component=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-16"},[t.label?e("h4",{staticClass:"label font-bold my-4"},[e("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),e("div",{staticClass:"flex justify-center flex-wrap mb-4"},t._l(t.actions,(function(n){return e("div",{key:n.key,staticClass:"border-2 border-black w-24 h-24 rounded-full flex flex-col items-center justify-center text-sm font-bold cursor-pointer text-center p-4 m-2",on:{click:function(e){t.activeAction=n.key}}},[e("p",[t._v(t._s(n.label))]),t._v(" "),e("div",[e("Icon",{attrs:{name:n.icon}})],1)])})),0),t._v(" "),t.activeAction?e("div",{staticClass:"my-4"},[e("BlockEditorComp",{attrs:{type:t.activeAction,assets:t.assets,data:t.data},on:{confirm:t.confirmModification,cancel:function(e){t.activeAction=null}}})],1):t._e(),t._v(" "),e("div",{staticClass:"my-4"},t._l(t.orderedBlocks,(function(n,i){return e("BlockPreview",t._b({key:"".concat(n.type,"-").concat(i,"-").concat(n.position),attrs:{data:t.data,assets:t.assets},on:{up:function(e){return t.handleOrder("up",e)},down:function(e){return t.handleOrder("down",e)},remove:t.handleRemove,confirm:t.confirmModification}},"BlockPreview",n,!1))})),1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(472).default,BlockEditorComp:n(483).default,BlockPreview:n(497).default})},502:function(t,e,n){var r=n(4);t.exports=r(1..valueOf)},503:function(t,e,n){var r=n(4),o=n(41),c=n(16),l=n(504),d=r("".replace),f="["+l+"]",h=RegExp("^"+f+f+"*"),v=RegExp(f+f+"*$"),m=function(t){return function(e){var n=c(o(e));return 1&t&&(n=d(n,h,"")),2&t&&(n=d(n,v,"")),n}};t.exports={start:m(1),end:m(2),trim:m(3)}},504:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},505:function(t,e,n){n(506)},506:function(t,e,n){"use strict";var r=n(2),o=n(8),c=n(4),l=n(41),d=n(9),f=n(47),h=n(140),v=n(16),m=n(63),_=n(183),y=n(268),k=n(10),O=n(34),j=k("replace"),w=TypeError,x=c("".indexOf),C=c("".replace),$=c("".slice),P=Math.max,A=function(t,e,n){return n>t.length?-1:""===e?n:x(t,e,n)};r({target:"String",proto:!0},{replaceAll:function(t,e){var n,r,c,k,I,E,T,M,B,S=l(this),L=0,N=0,R="";if(!f(t)){if((n=h(t))&&(r=v(l(_(t))),!~x(r,"g")))throw w("`.replaceAll` does not allow non-global regexes");if(c=m(t,j))return o(c,t,S,e);if(O&&n)return C(v(S),t,e)}for(k=v(S),I=v(t),(E=d(e))||(e=v(e)),T=I.length,M=P(1,T),L=A(k,I,0);-1!==L;)B=E?v(e(I,L,k)):y(I,k,L,[],void 0,e),R+=$(k,N,L)+B,N=L+T,L=A(k,I,L+M);return N<k.length&&(R+=$(k,N)),R}})},507:function(t,e,n){"use strict";n(491)},508:function(t,e,n){var r=n(84)(!1);r.push([t.i,".backdrop,.backdrop-content{transition:opacity .3s}.backdrop-container:hover>.backdrop,.backdrop-container:hover>.backdrop-content{opacity:1}.backdrop-container:hover>.backdrop{filter:blur(5px) grayscale(.7)}",""]),t.exports=r},512:function(t,e,n){"use strict";n.r(e);var r=n(470),o={props:{isNew:r.a.bool.def(!1),isPublished:r.a.bool.def(!1),saveOnly:r.a.bool.def(!1),canRemove:r.a.bool.def(!1)}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-center items-center"},[e("div",{class:[{"w-2/3":!t.saveOnly,"mx-8":t.saveOnly},"flex flex-col items-end"]},[e("div",{staticClass:"flex mt-8 mb-24"},[e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.save"),icon:"floppy-disk"},on:{click:function(e){return t.$emit("save")}}}),t._v(" "),t.saveOnly&&t.canRemove?e("span",[t.isNew?t._e():e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}})],1):t._e(),t._v(" "),t.saveOnly?t._e():e("span",[e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.publish"),icon:"rocket"},on:{click:function(e){return t.$emit("publish")}}}),t._v(" "),t.isNew?t._e():e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}}),t._v(" "),t.isPublished?e("Btn",{attrs:{"icon-btn":"",type:"error",label:t.$t("general.unpublish"),icon:"fire"},on:{click:function(e){return t.$emit("unpublish")}}}):t._e()],1)],1),t._v(" "),t._t("default"),t._v(" "),e("div",{staticClass:"flex mt-24 mb-8"},[e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.save"),icon:"floppy-disk"},on:{click:function(e){return t.$emit("save")}}}),t._v(" "),t.saveOnly&&t.canRemove?e("span",[t.isNew?t._e():e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}})],1):t._e(),t._v(" "),t.saveOnly?t._e():e("span",[e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.publish"),icon:"rocket"},on:{click:function(e){return t.$emit("publish")}}}),t._v(" "),t.isNew?t._e():e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}}),t._v(" "),t.isPublished?e("Btn",{attrs:{"icon-btn":"",type:"error",label:t.$t("general.unpublish"),icon:"fire"},on:{click:function(e){return t.$emit("unpublish")}}}):t._e()],1)],1)],2)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Btn:n(471).default})},530:function(t,e,n){"use strict";n.r(e);n(139),n(57);var r=n(470),o={props:{entity:r.a.object.def(null),type:r.a.string.def(""),unpublished:r.a.bool.def(!1)},data:function(){var t=this.$i18n.locale;return{locale:t,otherLocale:"fr"===t?"it":"fr"}},computed:{title:function(){return this.entity["".concat(this.type,"_title_").concat(this.locale)]?this.entity["".concat(this.type,"_title_").concat(this.locale)]:'<span class="italic text-gray-500">'.concat(this.entity["".concat(this.type,"_title_").concat(this.otherLocale)],"</span>")},articleCountry:function(){return this.entity["".concat(this.type,"_country_").concat(this.locale)]?this.entity["".concat(this.type,"_country_").concat(this.locale)]:'<span class="italic text-gray-500">'.concat(this.entity["".concat(this.type,"_country_").concat(this.otherLocale)],"</span>")},travelCountries:function(){return this.entity["".concat(this.type,"_countries_").concat(this.locale)]?this.entity["".concat(this.type,"_countries_").concat(this.locale)].join(", "):'<span class="italic text-gray-500">'.concat(this.entity["".concat(this.type,"_countries_").concat(this.otherLocale)].join(", "),"</span>")}}},c=n(36),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex"},[e("div",{class:[{"bg-gray-200 pointer-events-none":t.unpublished},"w-full border border-gray-500 rounded py-2 px-4 flex"]},[e("div",{staticClass:"font-bold",domProps:{innerHTML:t._s(t.title)}}),t._v(" "),"article"===t.type?e("div",{staticClass:"mx-2",domProps:{innerHTML:t._s(t.articleCountry)}}):t._e(),t._v(" "),"travel"===t.type?e("div",{staticClass:"mx-2",domProps:{innerHTML:t._s(t.travelCountries)}},[t._v("\n      "+t._s(t.entity["".concat(t.type,"_countries_").concat(t.locale)].join(", "))+"\n    ")]):t._e()]),t._v(" "),t.unpublished?e("div",{staticClass:"flex items-center"},[e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.edit"),icon:"pencil",type:"raw"},on:{click:function(e){return t.$emit("edit")}}})],1):e("div",{staticClass:"flex items-center px-2 text-gray-600"},[e("Icon",{attrs:{name:"menu2"}}),t._v(" "),e("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"cross",type:"raw"},on:{click:function(e){return t.$emit("remove")}}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(472).default,Btn:n(471).default})},552:function(t,e,n){(function(t,n){var r="__lodash_hash_undefined__",o=9007199254740991,c="[object Arguments]",l="[object Array]",d="[object Boolean]",f="[object Date]",h="[object Error]",v="[object Function]",m="[object Map]",_="[object Number]",y="[object Object]",k="[object Promise]",O="[object RegExp]",j="[object Set]",w="[object String]",x="[object Symbol]",C="[object WeakMap]",$="[object ArrayBuffer]",P="[object DataView]",A=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[c]=E[l]=E[$]=E[d]=E[P]=E[f]=E[h]=E[v]=E[m]=E[_]=E[y]=E[O]=E[j]=E[w]=E[C]=!1;var T="object"==typeof t&&t&&t.Object===Object&&t,M="object"==typeof self&&self&&self.Object===Object&&self,B=T||M||Function("return this")(),S=e&&!e.nodeType&&e,L=S&&"object"==typeof n&&n&&!n.nodeType&&n,N=L&&L.exports===S,R=N&&T.process,D=function(){try{return R&&R.binding&&R.binding("util")}catch(t){}}(),z=D&&D.isTypedArray;function V(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function F(map){var t=-1,e=Array(map.size);return map.forEach((function(n,r){e[++t]=[r,n]})),e}function H(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var U,J,W,G=Array.prototype,X=Function.prototype,Y=Object.prototype,Z=B["__core-js_shared__"],K=X.toString,Q=Y.hasOwnProperty,tt=(U=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",et=Y.toString,nt=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=N?B.Buffer:void 0,at=B.Symbol,st=B.Uint8Array,ot=Y.propertyIsEnumerable,ct=G.splice,lt=at?at.toStringTag:void 0,ut=Object.getOwnPropertySymbols,pt=it?it.isBuffer:void 0,ft=(J=Object.keys,W=Object,function(t){return J(W(t))}),ht=Ft(B,"DataView"),vt=Ft(B,"Map"),mt=Ft(B,"Promise"),bt=Ft(B,"Set"),_t=Ft(B,"WeakMap"),yt=Ft(Object,"create"),gt=Jt(ht),kt=Jt(vt),Ot=Jt(mt),jt=Jt(bt),wt=Jt(_t),xt=at?at.prototype:void 0,Ct=xt?xt.valueOf:void 0;function $t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function It(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new At;++e<n;)this.add(t[e])}function Et(t){var data=this.__data__=new Pt(t);this.size=data.size}function Tt(t,e){var n=Xt(t),r=!n&&Gt(t),o=!n&&!r&&Yt(t),c=!n&&!r&&!o&&ee(t),l=n||r||o||c,d=l?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],f=d.length;for(var h in t)!e&&!Q.call(t,h)||l&&("length"==h||o&&("offset"==h||"parent"==h)||c&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||qt(h,f))||d.push(h);return d}function Mt(t,e){for(var n=t.length;n--;)if(Wt(t[n][0],e))return n;return-1}function Bt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":lt&&lt in Object(t)?function(t){var e=Q.call(t,lt),n=t[lt];try{t[lt]=void 0;var r=!0}catch(t){}var o=et.call(t);r&&(e?t[lt]=n:delete t[lt]);return o}(t):function(t){return et.call(t)}(t)}function St(t){return te(t)&&Bt(t)==c}function Lt(t,e,n,r,o){return t===e||(null==t||null==e||!te(t)&&!te(e)?t!=t&&e!=e:function(object,t,e,n,r,o){var v=Xt(object),k=Xt(t),C=v?l:Ut(object),A=k?l:Ut(t),I=(C=C==c?y:C)==y,E=(A=A==c?y:A)==y,T=C==A;if(T&&Yt(object)){if(!Yt(t))return!1;v=!0,I=!1}if(T&&!I)return o||(o=new Et),v||ee(object)?Dt(object,t,e,n,r,o):function(object,t,e,n,r,o,c){switch(e){case P:if(object.byteLength!=t.byteLength||object.byteOffset!=t.byteOffset)return!1;object=object.buffer,t=t.buffer;case $:return!(object.byteLength!=t.byteLength||!o(new st(object),new st(t)));case d:case f:case _:return Wt(+object,+t);case h:return object.name==t.name&&object.message==t.message;case O:case w:return object==t+"";case m:var l=F;case j:var v=1&n;if(l||(l=H),object.size!=t.size&&!v)return!1;var y=c.get(object);if(y)return y==t;n|=2,c.set(object,t);var k=Dt(l(object),l(t),n,r,o,c);return c.delete(object),k;case x:if(Ct)return Ct.call(object)==Ct.call(t)}return!1}(object,t,C,e,n,r,o);if(!(1&e)){var M=I&&Q.call(object,"__wrapped__"),B=E&&Q.call(t,"__wrapped__");if(M||B){var S=M?object.value():object,L=B?t.value():t;return o||(o=new Et),r(S,L,e,n,o)}}if(!T)return!1;return o||(o=new Et),function(object,t,e,n,r,o){var c=1&e,l=zt(object),d=l.length,f=zt(t).length;if(d!=f&&!c)return!1;var h=d;for(;h--;){var v=l[h];if(!(c?v in t:Q.call(t,v)))return!1}var m=o.get(object);if(m&&o.get(t))return m==t;var _=!0;o.set(object,t),o.set(t,object);var y=c;for(;++h<d;){var k=object[v=l[h]],O=t[v];if(n)var j=c?n(O,k,v,t,object,o):n(k,O,v,object,t,o);if(!(void 0===j?k===O||r(k,O,e,n,o):j)){_=!1;break}y||(y="constructor"==v)}if(_&&!y){var w=object.constructor,x=t.constructor;w==x||!("constructor"in object)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(_=!1)}return o.delete(object),o.delete(t),_}(object,t,e,n,r,o)}(t,e,n,r,Lt,o))}function Nt(t){return!(!Qt(t)||function(t){return!!tt&&tt in t}(t))&&(Zt(t)?nt:A).test(Jt(t))}function Rt(object){if(e=(t=object)&&t.constructor,n="function"==typeof e&&e.prototype||Y,t!==n)return ft(object);var t,e,n,r=[];for(var o in Object(object))Q.call(object,o)&&"constructor"!=o&&r.push(o);return r}function Dt(t,e,n,r,o,c){var l=1&n,d=t.length,f=e.length;if(d!=f&&!(l&&f>d))return!1;var h=c.get(t);if(h&&c.get(e))return h==e;var v=-1,m=!0,_=2&n?new It:void 0;for(c.set(t,e),c.set(e,t);++v<d;){var y=t[v],k=e[v];if(r)var O=l?r(k,y,v,e,t,c):r(y,k,v,t,e,c);if(void 0!==O){if(O)continue;m=!1;break}if(_){if(!V(e,(function(t,e){if(l=e,!_.has(l)&&(y===t||o(y,t,n,r,c)))return _.push(e);var l}))){m=!1;break}}else if(y!==k&&!o(y,k,n,r,c)){m=!1;break}}return c.delete(t),c.delete(e),m}function zt(object){return function(object,t,e){var n=t(object);return Xt(object)?n:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(n,e(object))}(object,ne,Ht)}function Vt(map,t){var e,n,data=map.__data__;return("string"==(n=typeof(e=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?data["string"==typeof t?"string":"hash"]:data.map}function Ft(object,t){var e=function(object,t){return null==object?void 0:object[t]}(object,t);return Nt(e)?e:void 0}$t.prototype.clear=function(){this.__data__=yt?yt(null):{},this.size=0},$t.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$t.prototype.get=function(t){var data=this.__data__;if(yt){var e=data[t];return e===r?void 0:e}return Q.call(data,t)?data[t]:void 0},$t.prototype.has=function(t){var data=this.__data__;return yt?void 0!==data[t]:Q.call(data,t)},$t.prototype.set=function(t,e){var data=this.__data__;return this.size+=this.has(t)?0:1,data[t]=yt&&void 0===e?r:e,this},Pt.prototype.clear=function(){this.__data__=[],this.size=0},Pt.prototype.delete=function(t){var data=this.__data__,e=Mt(data,t);return!(e<0)&&(e==data.length-1?data.pop():ct.call(data,e,1),--this.size,!0)},Pt.prototype.get=function(t){var data=this.__data__,e=Mt(data,t);return e<0?void 0:data[e][1]},Pt.prototype.has=function(t){return Mt(this.__data__,t)>-1},Pt.prototype.set=function(t,e){var data=this.__data__,n=Mt(data,t);return n<0?(++this.size,data.push([t,e])):data[n][1]=e,this},At.prototype.clear=function(){this.size=0,this.__data__={hash:new $t,map:new(vt||Pt),string:new $t}},At.prototype.delete=function(t){var e=Vt(this,t).delete(t);return this.size-=e?1:0,e},At.prototype.get=function(t){return Vt(this,t).get(t)},At.prototype.has=function(t){return Vt(this,t).has(t)},At.prototype.set=function(t,e){var data=Vt(this,t),n=data.size;return data.set(t,e),this.size+=data.size==n?0:1,this},It.prototype.add=It.prototype.push=function(t){return this.__data__.set(t,r),this},It.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new Pt,this.size=0},Et.prototype.delete=function(t){var data=this.__data__,e=data.delete(t);return this.size=data.size,e},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var data=this.__data__;if(data instanceof Pt){var n=data.__data__;if(!vt||n.length<199)return n.push([t,e]),this.size=++data.size,this;data=this.__data__=new At(n)}return data.set(t,e),this.size=data.size,this};var Ht=ut?function(object){return null==object?[]:(object=Object(object),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,c=[];++n<r;){var l=t[n];e(l,n,t)&&(c[o++]=l)}return c}(ut(object),(function(symbol){return ot.call(object,symbol)})))}:function(){return[]},Ut=Bt;function qt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Jt(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Wt(t,e){return t===e||t!=t&&e!=e}(ht&&Ut(new ht(new ArrayBuffer(1)))!=P||vt&&Ut(new vt)!=m||mt&&Ut(mt.resolve())!=k||bt&&Ut(new bt)!=j||_t&&Ut(new _t)!=C)&&(Ut=function(t){var e=Bt(t),n=e==y?t.constructor:void 0,r=n?Jt(n):"";if(r)switch(r){case gt:return P;case kt:return m;case Ot:return k;case jt:return j;case wt:return C}return e});var Gt=St(function(){return arguments}())?St:function(t){return te(t)&&Q.call(t,"callee")&&!ot.call(t,"callee")},Xt=Array.isArray;var Yt=pt||function(){return!1};function Zt(t){if(!Qt(t))return!1;var e=Bt(t);return e==v||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Kt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Qt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function te(t){return null!=t&&"object"==typeof t}var ee=z?function(t){return function(e){return t(e)}}(z):function(t){return te(t)&&Kt(t.length)&&!!E[Bt(t)]};function ne(object){return null!=(t=object)&&Kt(t.length)&&!Zt(t)?Tt(object):Rt(object);var t}n.exports=function(t,e){return Lt(t,e)}}).call(this,n(37),n(142)(t))},554:function(t,e,n){var content=n(572);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(85).default)("39a5154a",content,!0,{sourceMap:!1})},563:function(t,e,n){"use strict";n.r(e);n(57),n(11),n(138),n(266),n(51);var r=n(470),o=n(525),c=n.n(o),l=n(552),d=n.n(l),f={components:{draggable:c.a},props:{type:r.a.string.def("travels"),title:r.a.string.def(""),highlighted:r.a.array.def(null),published:r.a.array.def([]),unpublished:r.a.array.def([])},data:function(){return{locale:this.$i18n.locale,selected:[],mounted:!1}},computed:{filteredPublished:function(){var t=this;return this.published.reduce((function(e,n){return t.selected.find((function(e){return n["".concat(t.type,"_id")]===e["".concat(t.type,"_id")]}))||e.push(n),e}),[])}},watch:{highlighted:function(t,e){var n=this,r=t.map((function(t){return t["".concat(n.type,"_id")]})).sort(),o=e.map((function(t){return t["".concat(n.type,"_id")]})).sort();d()(r,o)||(this.selected=t)}},mounted:function(){this.highlighted&&(this.selected=this.highlighted),this.mounted=!0},methods:{handleSelected:function(t){this.selected.push(t)},getSelected:function(){return this.selected}}},h=n(36),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return t.mounted?e("div",[e("h4",{staticClass:"font-bold text-center text-md"},[t._v(t._s(t.title))]),t._v(" "),e("Select",{staticClass:"min-w-1/3",attrs:{options:t.filteredPublished,label:t.$t("highlights.".concat(t.type,".select")),"option-label":"".concat(t.type,"_title_").concat(t.locale),value:null},on:{input:t.handleSelected}}),t._v(" "),e("div",{staticClass:"my-4"},[e("h4",{staticClass:"font-bold"},[t._v(t._s(t.$t("highlights.".concat(t.type,".selected"))))]),t._v(" "),t.selected.length?t._e():e("p",{staticClass:"text-sm"},[t._v(t._s(t.$t("highlights.".concat(t.type,".selected_empty"))))])]),t._v(" "),e("draggable",{attrs:{list:t.selected}},t._l(t.selected,(function(n){return e("div",{key:"".concat(t.type,"-").concat(n["".concat(t.type,"_id")])},[e("EntityRow",{attrs:{type:t.type,entity:n},on:{remove:function(e){return t.$emit("remove",{type:t.type,id:n["".concat(t.type,"_id")]})}}})],1)})),0),t._v(" "),e("div",{staticClass:"my-4"},[e("h4",{staticClass:"font-bold"},[t._v(t._s(t.$t("highlights.".concat(t.type,".unpublished_title"))))]),t._v(" "),e("p",{staticClass:"text-sm mb-4"},[t._v(t._s(t.$t("highlights.".concat(t.type,".unpublished_subtitle"))))]),t._v(" "),t._l(t.unpublished,(function(n){return e("div",{key:"".concat(t.type,"-").concat(n["".concat(t.type,"_id")])},[e("EntityRow",{attrs:{type:t.type,entity:n,unpublished:""},on:{edit:function(e){return t.$emit("edit",t.type,n["".concat(t.type,"_id")])},publish:function(e){return t.$emit("publish",t.type,n)}}})],1)}))],2)],1):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Select:n(477).default,EntityRow:n(530).default})},571:function(t,e,n){"use strict";n(554)},572:function(t,e,n){var r=n(84)(!1);r.push([t.i,".fade-enter-active,.fade-leave-active{transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}",""]),t.exports=r},590:function(t,e,n){"use strict";n.r(e);n(18),n(39),n(40);var r=n(29),o=n(13),c=n(12),l=n(6),d=(n(52),n(11),n(32),n(33),n(30),n(51),n(138),n(57),n(20),n(25),n(31));function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n,r,l,d,f,h,v,m,_,y,k,O,j,w,x,C,$;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$axios,l=t.app,e.next=3,Promise.all([r.get("/api/travels/published"),r.get("/api/articles/published"),r.get("/api/travels"),r.get("/api/articles"),r.get("/api/settings")]);case 3:return d=e.sent,f=Object(c.a)(d,5),h=f[0],v=f[1],m=f[2],_=f[3],y=f[4],k=h?h.data:[],O=v?v.data:[],j=m?m.data.filter((function(t){return!t["travel_published_".concat(l.i18n.locale)]})):[],w=_?_.data.filter((function(article){return!article["article_published_".concat(l.i18n.locale)]})):[],x=y?y.data:[],C=l.i18n.locale,n={},Object(o.a)(n,"desc_".concat(C),x["desc_".concat(C)]),Object(o.a)(n,"slider_".concat(C),x["slider_".concat(C)].map((function(t){return k.find((function(e){return e.travel_id===t}))}))),Object(o.a)(n,"highlighted_travels_".concat(C),x["highlighted_travels_".concat(C)].map((function(t){return k.find((function(e){return e.travel_id===t}))}))),Object(o.a)(n,"highlighted_articles_".concat(C),x["highlighted_articles_".concat(C)].map((function(t){return O.find((function(article){return article.article_id===t}))}))),$=n,e.abrupt("return",{publishedTravels:k,publishedArticles:O,travels:j,articles:w,settings:x,model:$,locale:C});case 18:case"end":return e.stop()}}),e)})))()},computed:h({},Object(d.c)(["loading"])),methods:{handleEdit:function(t,e){window.open("/".concat(t,"s/").concat(e),"_blank")},handleRemove:function(t,e){var n=e.type,r=e.id,o="".concat(t,"_").concat(this.locale);console.log(t,n,r,o),this.$set(this.model,o,this.model[o].filter((function(t){return t["".concat(n,"_id")]!==r})))},saveSettings:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,desc,c,l,d,f,v,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return desc=t.$refs.homepageDescription.getBlocks(),c=t.$refs.slider.getSelected(),l=t.$refs.highlightsTravels.getSelected(),d=t.$refs.highlightsArticles.getSelected(),Object.keys(t.settings).forEach((function(e){"object"===Object(r.a)(t.settings[e])&&(t.settings[e]=JSON.stringify(t.settings[e]))})),f=h(h({},t.settings),{},(n={},Object(o.a)(n,"desc_".concat(t.locale),JSON.stringify(desc)),Object(o.a)(n,"slider_".concat(t.locale),JSON.stringify(c.map((function(t){return t.travel_id})))),Object(o.a)(n,"highlighted_travels_".concat(t.locale),JSON.stringify(l.map((function(t){return t.travel_id})))),Object(o.a)(n,"highlighted_articles_".concat(t.locale),JSON.stringify(d.map((function(a){return a.article_id})))),n)),e.prev=6,e.next=9,t.$axios.put("/api/settings",f);case 9:v=e.sent,data=v.data,console.debug(data),t.$toast.success(t.$t("settings.save.success")),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.warn(e.t0),t.$toast.error(t.$t("settings.save.error"));case 19:case"end":return e.stop()}}),e,null,[[6,15]])})))()}}},m=(n(571),n(36)),component=Object(m.a)(v,(function(){var t=this,e=t._self._c;return e("EntityActions",{attrs:{"save-only":""},on:{save:t.saveSettings}},[e("div",[e("div",{staticClass:"flex justify-center"},[e("div",{staticClass:"w-1/2"},[e("ChooseHighlights",{ref:"slider",staticClass:"mr-2",attrs:{title:t.$t("highlights.slider_title"),type:"travel",published:t.publishedTravels,unpublished:t.travels,highlighted:t.model["slider_".concat(t.locale)]},on:{edit:t.handleEdit,remove:function(e){return t.handleRemove("slider",e)}}})],1)]),t._v(" "),e("div",{staticClass:"py-8"},[e("BlockEditor",{ref:"homepageDescription",attrs:{label:t.$t("homepage.description"),"remove-actions":["image","playlist"],blocks:t.model["desc_".concat(t.locale)]}})],1),t._v(" "),e("div",{staticClass:"py-8 flex justify-center"},[e("ChooseHighlights",{ref:"highlightsTravels",staticClass:"mr-2",attrs:{title:t.$t("highlights.travel_title"),type:"travel",published:t.publishedTravels,unpublished:t.travels,highlighted:t.model["highlighted_travels_".concat(t.locale)]},on:{edit:t.handleEdit,remove:function(e){return t.handleRemove("highlighted_travels",e)}}}),t._v(" "),e("ChooseHighlights",{ref:"highlightsArticles",staticClass:"ml-2",attrs:{title:t.$t("highlights.article_title"),type:"article",published:t.publishedArticles,unpublished:t.articles,highlighted:t.model["highlighted_articles_".concat(t.locale)]},on:{edit:t.handleEdit,remove:function(e){return t.handleRemove("highlighted_articles",e)}}})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ChooseHighlights:n(563).default,BlockEditor:n(501).default,EntityActions:n(512).default})}}]);