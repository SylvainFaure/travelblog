(window.webpackJsonp=window.webpackJsonp||[]).push([[12,32,36],{471:function(e,t,l){"use strict";l.r(t);l(57);var n=l(470),r={props:{type:n.a.string.def("primary"),label:n.a.string.def("Save"),iconBtn:n.a.bool.def(!1),icon:n.a.string.def("checkmark"),additionalClasses:n.a.string.def("")},computed:{classes:function(){var e=this.iconBtn?"px-4 py-2":"p-2";return"cursor-pointer bg-".concat(this.type||"primary"," ").concat("raw"===this.type?"":"border text-white"," ").concat(e)}}},o=l(36),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("button",{class:[e.classes,e.additionalClasses,"rounded text-center flex items-center"],attrs:{type:"button"},on:{click:function(t){return e.$emit("click")}}},[e.iconBtn?e._e():t("span",[e._v(e._s(e.label))]),e._v(" "),e.icon&&!e.iconBtn?t("span",{staticClass:"pl-2"},[t("Icon",{attrs:{name:e.icon}})],1):t("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.label,expression:"label"}]},[t("Icon",{attrs:{name:e.icon}})],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:l(472).default})},472:function(e,t,l){"use strict";l.r(t);l(473),l(26);var n=l(470),r={props:{name:n.a.string.def(""),small:n.a.bool.def(!1)}},o=l(36),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("svg",e._g({class:{"fill-current icon":!0,"cursor-pointer":!!e.$listeners,"w-2 h-2":e.small,"w-4 h-4":!e.small}},e.$listeners),[t("use",{attrs:{"xlink:href":"#icon-".concat(e.name)}})])}),[],!1,null,null,null);t.default=component.exports},474:function(e,t,l){"use strict";l.r(t);l(473),l(26);var n=l(470),r={props:{type:n.a.string.def("text"),name:n.a.string.def("input"),id:n.a.string.def("input"),label:n.a.string.def(""),placeholder:n.a.string.def(""),required:n.a.bool.def(!1),disabled:n.a.bool.def(!1),value:n.a.string.def(""),small:n.a.bool.def(!1)}},o=l(36),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{class:{"mt-2 mb-4":!e.small}},[e.label?t("h4",{staticClass:"label font-bold my-4"},[t("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),t("input",{class:[e.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:e.id,type:e.type,name:e.name,required:e.required,disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("enter")},input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports},477:function(e,t,l){"use strict";l.r(t);var n=l(510),r=l.n(n),o=l(470),c=(l(511),{components:{vSelect:r.a},props:{label:o.a.string.def(null),sublabel:o.a.string.def(null),placeholder:o.a.string.def(null),options:o.a.array.def([]),optionLabel:o.a.string.def("label"),multiple:o.a.bool.def(!1),taggable:o.a.bool.def(!1),pushTags:o.a.bool.def(!1),value:o.a.oneOfType([o.a.object,o.a.array]).def(null),small:o.a.bool.def(!1)}}),f=(l(485),l(36)),component=Object(f.a)(c,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("h4",{staticClass:"label font-bold my-4"},[t("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),e.sublabel?t("p",[e._v(e._s(e.sublabel))]):e._e(),e._v(" "),t("v-select",{attrs:{options:e.options,label:e.optionLabel,multiple:e.multiple,taggable:e.taggable,"push-tags":e.pushTags,placeholder:e.placeholder,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1)}),[],!1,null,null,null);t.default=component.exports},478:function(e,t,l){var content=l(486);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(85).default)("afdcce92",content,!0,{sourceMap:!1})},485:function(e,t,l){"use strict";l(478)},486:function(e,t,l){var n=l(84)(!1);n.push([e.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),e.exports=n},515:function(e,t,l){var content=l(522);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(85).default)("cc19d234",content,!0,{sourceMap:!1})},521:function(e,t,l){"use strict";l(515)},522:function(e,t,l){var n=l(84)(!1);n.push([e.i,".loader{border:16px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:120px;height:120px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}",""]),e.exports=n},528:function(e,t,l){"use strict";l.r(t);var n={},r=(l(521),l(36)),component=Object(r.a)(n,(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"w-screen h-screen fixed bg-gray-200 inset-0 flex justify-center items-center z-50"},[e("div",{staticClass:"loader animation-spin"})])}],!1,null,null,null);t.default=component.exports},560:function(e,t,l){"use strict";l.r(t);l(26),l(18),l(30),l(39),l(40);var n=l(6),r=l(13),o=(l(52),l(11),l(20),l(27),l(32),l(33),l(553),l(269),l(25),l(57),l(470)),c=l(532);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}var d={components:{FileUpload:l.n(c).a},props:{travels:o.a.array.def([])},data:function(){return{loading:!1,files:[],filesData:[]}},methods:{handleUpload:function(){this.$refs.upload.active=!0,this.loading=!0},handleFillEverything:function(e,t){this.filesData.forEach((function(l){l[t]=e}))},inputFile:function(e,t){(!t||e&&t.name!==e.name)&&(console.log("PUSH NEW FILE DATA"),this.filesData.push(function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({id:e.id,name:e.name},{title_fr:"",title_it:"",place_fr:"",place_it:"",country_fr:"",country_it:"",desc_fr:"",desc_it:"",travel_id:""}))),e&&t&&!e.active&&t.active&&e.xhr},inputFilter:function(e,t,l){if(e&&!t&&!/\.(jpeg|jpe|jpg|gif|png|webp)$/i.test(e.name))return l();e.blob="";var n=window.URL||window.webkitURL;n&&n.createObjectURL&&(e.blob=n.createObjectURL(e.file))},uploadFiles:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=new FormData,e.files.forEach((function(t,n){l.append("file[".concat(n,"]"),t.file),Object.keys(e.filesData[n]).forEach((function(t,i){var r="travel_id"===t?e.filesData[n][t].travel_id:e.filesData[n][t];l.append("infos[".concat(n,"][").concat(t,"]"),r)}))})),t.prev=2,t.next=5,e.$axios.post("/api/assets",l,{headers:{"Content-Type":"multipart/form-data"}});case 5:e.files=[],e.filesData=[],e.$toast.success(e.$t("assets.upload_success")),e.$emit("uploaded"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("ERROR",t.t0),e.$toast.error(e.$t("assets.upload_error"));case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,11,15,18]])})))()}}},v=d,m=l(36),component=Object(m.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-6"},[t("file-upload",{ref:"upload",attrs:{multiple:!0,"custom-action":e.uploadFiles},on:{"input-file":e.inputFile,"input-filter":e.inputFilter},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[e.files.length?e._e():t("btn",{attrs:{type:"primary",label:e.$t("assets.upload")}})],1),e._v(" "),t("div",{staticClass:"flex flex-wrap"},[e.files.length>=2?t("div",{staticClass:"mr-4 my-4 w-56"},[t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.title")},on:{input:function(t){return e.handleFillEverything(t,"title_".concat(e.$i18n.locale))}}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.place")},on:{input:function(t){return e.handleFillEverything(t,"place_".concat(e.$i18n.locale))}}}),e._v(" "),t("Select",{attrs:{placeholder:e.$t("assets.form.travel"),options:e.travels,"option-label":"travel_title_".concat(e.$i18n.locale)},on:{input:function(t){return e.handleFillEverything(t,"travel_id")}}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.country")},on:{input:function(t){return e.handleFillEverything(t,"country_".concat(e.$i18n.locale))}}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.description")},on:{input:function(t){return e.handleFillEverything(t,"desc_".concat(e.$i18n.locale))}}})],1):e._e(),e._v(" "),e._l(e.files,(function(l,i){return t("div",{key:i,staticClass:"mr-4 my-4 w-56"},[t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.title")},model:{value:e.filesData[i]["title_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"title_".concat(e.$i18n.locale),t)},expression:"filesData[i][`title_${$i18n.locale}`]"}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.place")},model:{value:e.filesData[i]["place_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"place_".concat(e.$i18n.locale),t)},expression:"filesData[i][`place_${$i18n.locale}`]"}}),e._v(" "),t("Select",{attrs:{placeholder:e.$t("assets.form.travel"),options:e.travels,"option-label":"travel_title_".concat(e.$i18n.locale)},model:{value:e.filesData[i].travel_id,callback:function(t){e.$set(e.filesData[i],"travel_id",t)},expression:"filesData[i].travel_id"}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.country")},model:{value:e.filesData[i]["country_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"country_".concat(e.$i18n.locale),t)},expression:"filesData[i][`country_${$i18n.locale}`]"}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.description")},model:{value:e.filesData[i]["desc_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"desc_".concat(e.$i18n.locale),t)},expression:"filesData[i][`desc_${$i18n.locale}`]"}}),e._v(" "),t("img",{staticClass:"w-56",attrs:{src:l.blob}}),e._v(" "),t("p",{staticClass:"text-sm"},[e._v("\n        "+e._s(l.name)+"\n      ")])],1)}))],2),e._v(" "),t("btn",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&(!e.$refs.upload||!e.$refs.upload.active),expression:"files.length && (!$refs.upload || !$refs.upload.active)"}],attrs:{type:"primary",label:e.$t("assets.do_upload")},on:{click:e.handleUpload}}),e._v(" "),e.loading?t("Loader"):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:l(471).default,InputText:l(474).default,Select:l(477).default,Loader:l(528).default})}}]);