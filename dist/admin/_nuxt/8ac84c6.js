(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{287:function(t,e,n){"use strict";n.r(e);n(60);var o=n(286),r={props:{type:o.a.string.def("primary"),label:o.a.string.def("Save"),iconBtn:o.a.bool.def(!1),icon:o.a.string.def("checkmark"),additionalClasses:o.a.string.def("")},computed:{classes:function(){var t=this.iconBtn?"px-4 py-2":"p-2";return"bg-".concat(this.type||"primary"," ").concat("raw"===this.type?"":"border text-white"," ").concat(t)}}},l=n(24),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:[t.classes,t.additionalClasses,"rounded text-center flex items-center"],attrs:{type:"button"},on:{click:function(e){return t.$emit("click")}}},[t.iconBtn?t._e():n("span",[t._v(t._s(t.label))]),t._v(" "),t.icon&&!t.iconBtn?n("span",{staticClass:"pl-2"},[n("Icon",{attrs:{name:t.icon}})],1):n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.label,expression:"label"}]},[n("Icon",{attrs:{name:t.icon}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(289).default})},289:function(t,e,n){"use strict";n.r(e);var o=n(286),r={props:{name:o.a.string.def(""),small:o.a.bool.def(!1)}},l=n(24),component=Object(l.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",this._g({class:{"fill-current icon":!0,"cursor-pointer":!!this.$listeners,"w-2 h-2":this.small,"w-4 h-4":!this.small}},this.$listeners),[e("use",{attrs:{"xlink:href":"#icon-"+this.name}})])}),[],!1,null,null,null);e.default=component.exports},291:function(t,e,n){"use strict";n.r(e);var o=n(286),r={props:{type:o.a.string.def("text"),name:o.a.string.def("input"),id:o.a.string.def("input"),label:o.a.string.def(""),placeholder:o.a.string.def(""),required:o.a.bool.def(!1),disabled:o.a.bool.def(!1),value:o.a.string.def(""),small:o.a.bool.def(!1)}},l=n(24),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"mt-2 mb-4":!t.small}},[t.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),n("input",{class:[t.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:t.id,type:t.type,name:t.name,required:t.required,disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("enter")},input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports},293:function(t,e,n){"use strict";n.r(e);var o={},r=n(24),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"modal"}},[n("div",{staticClass:"flex flex-col justify-center items-center m-16"},[n("h4",{staticClass:"font-bold text-lg text-center mb-4"},[t._v(t._s(t.$t("general.sure")))]),t._v(" "),n("div",{staticClass:"flex justify-center"},[n("Btn",{attrs:{label:t.$t("general.confirm"),"additional-classes":"mr-4"},on:{click:function(e){return t.$emit("confirm")}}}),t._v(" "),n("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:function(e){return t.$emit("cancel")}}})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Btn:n(287).default})},294:function(t,e,n){"use strict";n.r(e);var o=n(305),r=n.n(o),l=n(286),c=(n(306),{components:{vSelect:r.a},props:{label:l.a.string.def(null),sublabel:l.a.string.def(null),placeholder:l.a.string.def(null),options:l.a.array.def([]),optionLabel:l.a.string.def("label"),multiple:l.a.bool.def(!1),taggable:l.a.bool.def(!1),pushTags:l.a.bool.def(!1),value:l.a.oneOfType([l.a.object,l.a.array]).def(null),small:l.a.bool.def(!1)}}),d=(n(308),n(24)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),t.sublabel?n("p",[t._v(t._s(t.sublabel))]):t._e(),t._v(" "),n("v-select",{attrs:{options:t.options,label:t.optionLabel,multiple:t.multiple,taggable:t.taggable,"push-tags":t.pushTags,placeholder:t.placeholder,value:t.value},on:{input:function(e){return t.$emit("input",e)}}})],1)}),[],!1,null,null,null);e.default=component.exports},295:function(t,e,n){var content=n(309);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("2bea4cae",content,!0,{sourceMap:!1})},297:function(t,e,n){var content=n(313);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("fba0ba2a",content,!0,{sourceMap:!1})},299:function(t,e,n){"use strict";n.r(e);var o=n(286),r={props:{name:o.a.string.def("textarea"),placeholder:o.a.string.def(""),label:o.a.string.def(null),required:o.a.bool.def(!1),rows:o.a.number.def(4),value:o.a.string.def(""),classes:o.a.string.def("")}},l=n(24),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),n("textarea",{class:[t.classes,"w-full p-2 rounded border border-grey-600"],attrs:{name:t.name,placeholder:t.placeholder,required:t.required,rows:t.rows},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Textarea:n(299).default})},301:function(t,e,n){"use strict";n.r(e);n(19),n(60),n(27),n(82),n(17),n(48),n(53),n(36),n(37),n(28),n(56),n(18);var o=n(9),r=n(136),l=n(286);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{label:l.a.string.def(""),blocks:l.a.array.def([]),addons:l.a.array.def(null),assets:l.a.array.def([]),data:l.a.object.def({}),removeActions:l.a.array.def([])},data:function(){var t=this,e=this.addons.map((function(t){return"map-description"===t&&(t={key:"map-description",label:"Description avec carte",icon:"map"}),"anecdote"===t&&(t={key:"anecdote",label:"Description avec anecdotes",icon:"file-empty"}),t}));return{orderedBlocks:[],activeAction:null,actions:[].concat([{key:"paragraph",label:"Paragraphe",icon:"paragraph-left"},{key:"subtitle",label:"Sous-titre",icon:"pilcrow"},{key:"image",label:"Image",icon:"image"},{key:"catch",label:"Phrase d'accroche",icon:"bold"},{key:"playlist",label:"Playlist",icon:"spotify"}],Object(r.a)(e)).filter((function(e){return!t.removeActions.includes(e.key)}))}},mounted:function(){this.orderedBlocks=this.blocks?this.blocks.sort((function(a,b){return a.position-b.position})):[]},methods:{confirmModification:function(t,content,e){"new-block"===e?(this.createNewBlock(t,content),this.activeAction=null):this.orderedBlocks=this.orderedBlocks.map((function(n){return n.id===e&&("image"===t?n.content=content.content:n=d(d({},n),content)),n}))},createNewBlock:function(t,content){var e=Math.floor(1e3*Math.random()),component=d({id:"".concat(t,"-").concat(e),type:t,position:this.orderedBlocks.length},content);this.orderedBlocks.push(component)},handleOrder:function(t,e){var n=this.orderedBlocks.find((function(t){return t.id===e}));if("up"===t&&n.position>0){var o=this.orderedBlocks.find((function(t){return t.position===n.position-1})).id;this.orderedBlocks=this.orderedBlocks.map((function(b){return b.id===e?b.position-=1:b.id===o&&(b.position+=1),b})).sort((function(a,b){return a.position-b.position}))}else if("down"===t&&n.position<this.orderedBlocks.length-1){var r=this.orderedBlocks.find((function(t){return t.position===n.position+1})).id;this.orderedBlocks=this.orderedBlocks.map((function(b){return b.id===e?b.position+=1:b.id===r&&(b.position-=1),b})).sort((function(a,b){return a.position-b.position}))}},handleRemove:function(t){var e=this.orderedBlocks.find((function(b){return b.id===t}));this.orderedBlocks=this.orderedBlocks.map((function(b){return b.position>e.position&&(b.position-=1),b})).filter((function(b){return b.id!==t}))},getBlocks:function(){return this.orderedBlocks}}},m=n(24),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-16"},[t.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[t._v(t._s(t.label))])]):t._e(),t._v(" "),n("div",{staticClass:"flex justify-center flex-wrap mb-4"},t._l(t.actions,(function(e){return n("div",{key:e.key,staticClass:"border-2 border-black w-24 h-24 rounded-full flex flex-col items-center justify-center text-sm font-bold cursor-pointer text-center p-4 m-2",on:{click:function(n){t.activeAction=e.key}}},[n("p",[t._v(t._s(e.label))]),t._v(" "),n("div",[n("Icon",{attrs:{name:e.icon}})],1)])})),0),t._v(" "),t.activeAction?n("div",{staticClass:"my-4"},[n("BlockEditorComp",{attrs:{type:t.activeAction,assets:t.assets,data:t.data},on:{confirm:t.confirmModification,cancel:function(e){t.activeAction=null}}})],1):t._e(),t._v(" "),n("div",{staticClass:"my-4"},t._l(t.orderedBlocks,(function(e,i){return n("BlockPreview",t._b({key:e.type+"-"+i+"-"+e.position,attrs:{data:t.data,assets:t.assets},on:{up:function(e){return t.handleOrder("up",e)},down:function(e){return t.handleOrder("down",e)},remove:t.handleRemove,confirm:t.confirmModification}},"BlockPreview",e,!1))})),1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(289).default,BlockEditorComp:n(334).default,BlockPreview:n(364).default})},302:function(t,e,n){"use strict";n.r(e);var o=n(286),r={props:{isNew:o.a.bool.def(!1),isPublished:o.a.bool.def(!1),saveOnly:o.a.bool.def(!1),canRemove:o.a.bool.def(!1)}},l=n(24),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex justify-center items-center"},[n("div",{class:[{"w-2/3":!t.saveOnly,"mx-8":t.saveOnly},"flex flex-col items-end"]},[n("div",{staticClass:"flex mt-8 mb-24"},[n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.save"),icon:"floppy-disk"},on:{click:function(e){return t.$emit("save")}}}),t._v(" "),t.saveOnly&&t.canRemove?n("span",[t.isNew?t._e():n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}})],1):t._e(),t._v(" "),t.saveOnly?t._e():n("span",[n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.publish"),icon:"rocket"},on:{click:function(e){return t.$emit("publish")}}}),t._v(" "),t.isNew?t._e():n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}}),t._v(" "),t.isPublished?n("Btn",{attrs:{"icon-btn":"",type:"error",label:t.$t("general.unpublish"),icon:"fire"},on:{click:function(e){return t.$emit("unpublish")}}}):t._e()],1)],1),t._v(" "),t._t("default"),t._v(" "),n("div",{staticClass:"flex mt-24 mb-8"},[n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.save"),icon:"floppy-disk"},on:{click:function(e){return t.$emit("save")}}}),t._v(" "),t.saveOnly&&t.canRemove?n("span",[t.isNew?t._e():n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}})],1):t._e(),t._v(" "),t.saveOnly?t._e():n("span",[n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.publish"),icon:"rocket"},on:{click:function(e){return t.$emit("publish")}}}),t._v(" "),t.isNew?t._e():n("Btn",{attrs:{"icon-btn":"",label:t.$t("general.remove"),icon:"bin"},on:{click:function(e){return t.$emit("remove")}}}),t._v(" "),t.isPublished?n("Btn",{attrs:{"icon-btn":"",type:"error",label:t.$t("general.unpublish"),icon:"fire"},on:{click:function(e){return t.$emit("unpublish")}}}):t._e()],1)],1)],2)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Btn:n(287).default})},303:function(t,e,n){"use strict";n.r(e);n(60);var o=n(286),r={props:{deletable:o.a.bool.def(!1),selectable:o.a.bool.def(!1),selected:o.a.bool.def(!1),tag:o.a.string.def("")},computed:{color:function(){var t=["gray","indigo","red","orange","yellow","green","teal","blue","purple","pink"];return"".concat(this.selectable&&!this.selected?"border-2 border-":"text-white bg-").concat(t[Math.floor(Math.random()*(t.length-1))],"-500")}}},l=n(24),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.color,"text-xs rounded-md px-2 py-1",{"cursor-pointer":t.selectable}],on:{click:function(e){return t.$emit("click")}}},[n("span",[t._v(t._s(t.tag?"#"+t.tag:"# No place"))]),t._v(" "),t.deletable?n("span",{staticClass:"cursor-pointer font-bold",on:{click:function(e){return t.$emit("remove",t.tag)}}},[t._v("x")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},304:function(t,e,n){"use strict";n.r(e);n(19),n(27),n(17),n(36),n(37),n(28),n(18);var o=n(9),r=n(286),l=n(20);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{assets:r.a.array.def([]),picked:r.a.oneOfType([r.a.object,r.a.array]).def(null),pick:r.a.string.def("one"),pickLimit:r.a.number.def(null),data:r.a.object.def(null)},data:function(){return{pickedImage:null,pickedImages:[]}},mounted:function(){this.picked&&("one"===this.pick?this.pickedImage=this.picked:"multiple"===this.pick&&(this.pickedImages=this.picked))},methods:d(d({},Object(l.b)("modal",["setVisible","setModalId"])),{},{handlePick:function(image){this.pickedImage=image},handlePicks:function(t,e,n){"add"===n?this.pickedImages.push(e):this.pickedImages=this.pickedImages.filter((function(a){return a.asset_id!==e.asset_id}))},handleConfirm:function(){var t="one"===this.pick?this.pickedImage:this.pickedImages;this.$emit("confirm",t),this.setModalId(null),this.setVisible(!1)},handleCancel:function(){this.setModalId(null),this.setVisible(!1)}})},m=n(24),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"modal"}},[n("div",{staticClass:"relative h-full"},["one"===t.pick&&t.pickedImage?n("div",{staticClass:"m-8"},[n("img",{staticClass:"h-48",attrs:{src:t.pickedImage.asset_src}})]):"multiple"===t.pick&&t.pickedImages?n("div",{staticClass:"m-8 flex flex-wrap"},t._l(t.pickedImages,(function(img){return n("div",{key:img.asset_id,staticClass:"mr-4"},[n("img",{staticClass:"h-32 m-2",attrs:{src:img.asset_src}})])})),0):t._e(),t._v(" "),n("AssetPickerLibrary",{attrs:{assets:t.assets,picked:t.picked,pick:t.pick,"pick-limit":t.pickLimit,data:t.data},on:{pick:t.handlePick,picks:t.handlePicks}}),t._v(" "),n("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[n("div",{staticClass:"flex justify-end"},[n("Btn",{attrs:{label:t.$t("general.confirm")},on:{click:t.handleConfirm}}),t._v(" "),n("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:t.handleCancel}})],1)])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AssetPickerLibrary:n(325).default,Btn:n(287).default})},308:function(t,e,n){"use strict";var o=n(295);n.n(o).a},309:function(t,e,n){(e=n(61)(!1)).push([t.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),t.exports=e},312:function(t,e,n){"use strict";var o=n(297);n.n(o).a},313:function(t,e,n){(e=n(61)(!1)).push([t.i,".backdrop,.backdrop-content{transition:opacity .3s}.backdrop-container:hover>.backdrop,.backdrop-container:hover>.backdrop-content{opacity:1}.backdrop-container:hover>.backdrop{filter:blur(5px) grayscale(.7)}",""]),t.exports=e},316:function(t,e,n){var content=n(346);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("bea56e00",content,!0,{sourceMap:!1})},317:function(t,e,n){var content=n(348);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("79585b24",content,!0,{sourceMap:!1})},325:function(t,e,n){"use strict";n.r(e);n(19),n(42),n(27),n(82),n(17),n(48),n(53),n(191),n(36),n(37),n(28),n(40),n(56),n(63),n(64),n(18),n(32);var o=n(4),r=n(9),l=n(369),c=n(286),d=n(20);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={props:{assets:c.a.array.def([]),pick:c.a.string.def(null),picked:c.a.oneOfType([c.a.array,c.a.object]).def(null),data:c.a.object.def({}),pickLimit:c.a.number.def(null)},data:function(){var t=this.$i18n.locale;return{locale:t,otherLocale:"fr"===t?"it":"fr",pickedAsset:null,pickedAssetsIds:[],assetToRemove:null,assetToEdit:null,filters:{travel:null,place:null}}},computed:m(m({},Object(d.c)("modal",["modalId"])),{},{places:function(){var t=this;return this.data.articles.map((function(article){var e=article["article_place_".concat(t.locale)];if(e)return{key:e.toLowerCase().replaceAll(" ","_"),label:e}})).filter((function(t){return!!t}))},filteredAssets:function(){var t=this;return this.assets.filter((function(e){return t.filters.travel&&t.filters.place?t.filters.travel===Number(e.asset_travel_id)&&!!e["asset_place_".concat(t.locale)]&&t.filters.place===e["asset_place_".concat(t.locale)]:!t.filters.travel&&!t.filters.place||(t.filters.travel===Number(e.asset_travel_id)||t.filters.place===e["asset_place_".concat(t.locale)])}))}}),mounted:function(){var t=this;this.locale=this.$i18n.locale,this.picked&&("multiple"===this.pick?this.pickedAssetsIds=this.picked.map((function(p){return p.asset_id})):(this.pickedAsset=this.picked,this.$nextTick((function(){t.initWithPicked()}))))},methods:m(m({},Object(d.b)("modal",["setVisible","setModalId"])),{},{getUploadDate:function(t){var e=t.split("_")[0];return Object(l.a)(new Date(Number(e)),"dd/MM/yyyy")},getTravelTitle:function(t){var e=this.data.travels.find((function(e){return e.travel_id===t}));return e["travel_title_".concat(this.locale)]?e["travel_title_".concat(this.locale)]:'<span class="italic text-gray-400">'.concat(e["travel_title_".concat(this.otherLocale)],"</span>")},initWithPicked:function(){var t=this;this.$refs.asset.forEach((function(a){Number(a.getAttribute("id"))!==Number(t.pickedAsset.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")}))},handlePickOneAsset:function(t){var e=this;this.$refs.asset.forEach((function(a){e.pickedAsset&&e.pickedAsset.asset_id===t.asset_id?a.classList.remove("opacity-50"):Number(a.getAttribute("id"))!==Number(t.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")})),this.pickedAsset=t},handleAssetPick:function(t,e){var n,o=this;(e.stopPropagation(),e.preventDefault(),"one"===this.pick&&(this.handlePickOneAsset(t),this.$emit("pick",t)),"multiple"===this.pick)&&((!this.pickLimit||this.pickedAssetsIds.length<this.pickLimit||this.pickedAssetsIds.length===this.pickLimit&&!e.target.checked)&&(e.target.checked?(n="add",this.pickedAssetsIds.push(t.asset_id)):(n="remove",this.pickedAssetsIds=this.pickedAssetsIds.filter((function(a){return a!==t.asset_id}))),this.pickedAssetsIds.length===this.pickLimit?this.$refs.assetContainer.forEach((function(a){o.pickedAssetsIds.includes(Number(a.getAttribute("id").replace("container_","")))||(a.classList.add("pointer-events-none"),a.classList.add("opacity-50"))})):this.$refs.assetContainer.forEach((function(a){a.classList.remove("pointer-events-none"),a.classList.remove("opacity-50")})),this.$emit("picks",this.pickedAssetsIds,t,n)))},handleEdit:function(t){this.assetToEdit=t,this.setVisible(!0),this.setModalId("asset-edit")},handleRemove:function(t){this.assetToRemove=t,this.setVisible(!0),this.setModalId("asset-remove")},removeAsset:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/api/assets/delete",{ids:[t.assetToRemove.asset_id],names:[t.assetToRemove.asset_name]});case 3:t.$toast.success(t.$t("assets.removed_success")),t.$emit("change"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.$toast.error(t.$t("assets.removed_error"));case 11:return e.prev=11,t.closeRemoveModal(),t.assetToRemove=null,e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,7,11,15]])})))()},updateAsset:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=m(m({},e),{},(l={},Object(r.a)(l,"asset_desc_".concat(n.locale),t.description),Object(r.a)(l,"asset_title_".concat(n.locale),t.title),Object(r.a)(l,"asset_article_ids",JSON.stringify(t.article_ids.map((function(t){return Number(t.article_id)})))),Object(r.a)(l,"asset_travel_id",Number(t.travel.travel_id)),l)),o.prev=1,o.next=4,n.$axios.put("/api/assets/".concat(e.asset_id),c);case 4:n.$toast.success(n.$t("assets.updated_success")),n.$emit("change"),n.assetToEdit=null,o.next=13;break;case 9:o.prev=9,o.t0=o.catch(1),console.log(o.t0),n.$toast.error(n.$t("assets.updated_error"));case 13:case"end":return o.stop()}}),o,null,[[1,9]])})))()},closeRemoveModal:function(){this.setVisible(!1),this.setModalId(null)},handleFilter:function(t){t.travel_id?this.filters.travel=this.filters.travel===t.travel_id?null:t.travel_id:this.filters.place=this.filters.place===t.label?null:t.label}})},v=(n(312),n(24)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"m-6"},[n("div",{staticClass:"flex my-4"},[n("div",{staticClass:"w-1/2 flex flex-col items-center"},[n("h4",[t._v(t._s(t.$t("assets.filter_by_travel")))]),t._v(" "),n("div",{staticClass:"flex flex-wrap justify-center w-full"},t._l(t.data.travels,(function(e){return n("Tag",{key:e.travel_id,staticClass:"mr-2 my-2",attrs:{tag:e["travel_title_"+t.locale],selectable:"",selected:t.filters.travel===e.travel_id},on:{click:function(n){return t.handleFilter(e)}}})})),1)]),t._v(" "),n("div",{staticClass:"w-1/2 flex flex-col items-center"},[n("h4",[t._v(t._s(t.$t("assets.filter_by_place")))]),t._v(" "),n("div",{staticClass:"flex flex-wrap justify-center w-full"},t._l(t.places,(function(e){return n("Tag",{key:e.key,staticClass:"mr-2 my-2",attrs:{tag:e.label,selectable:"",selected:t.filters.place===e.label},on:{click:function(n){return t.handleFilter(e)}}})})),1)])]),t._v(" "),n("div",{staticClass:"flex flex-wrap justify-center"},[t._l(t.filteredAssets,(function(e,i){return n("div",{key:i,ref:"assetContainer",refInFor:!0,class:{"w-64 mr-4 my-2 relative":!0,"h-72 border border-grey-100":!t.pick},attrs:{id:"container_"+e.asset_id}},["multiple"===t.pick?n("span",{staticClass:"absolute top-0 right-0"},[n("input",{staticClass:"mr-2 mt-2 z-20",attrs:{type:"checkbox"},domProps:{checked:t.pickedAssetsIds.includes(e.asset_id)},on:{change:function(n){return t.handleAssetPick(e,n)}}})]):t._e(),t._v(" "),n("div",{class:{"backdrop-container max-h-2/3 overflow-hidden relative flex justify-center items-center":!t.pick}},[t.pick?t._e():n("div",{staticClass:"backdrop opacity-0 absolute inset-0 h-full w-full hover:opacity-100 transition-opacity duration-300 bg-blue-100 bg-opacity-50"}),t._v(" "),t.pick?t._e():n("div",{staticClass:"backdrop-content z-10 flex absolute inset-0 justify-center items-center opacity-0"},[n("Btn",{attrs:{"icon-btn":"",icon:"pencil"},on:{click:function(n){return t.handleEdit(e)}}}),t._v(" "),n("Btn",{attrs:{"icon-btn":"",type:"secondary",icon:"bin"},on:{click:function(n){return t.handleRemove(e)}}})],1),t._v(" "),n("img",{ref:"asset",refInFor:!0,class:{"max-h-2/3":!t.pick,"cursor-pointer":t.pick,"w-full overflow-hidden":!0},attrs:{id:e.asset_id,src:e.asset_src},on:{click:function(n){return t.handleAssetPick(e,n)}}})]),t._v(" "),t.pick?t._e():n("div",{staticClass:"asset__infos p-4"},[e["asset_title_"+t.$i18n.locale]?n("p",{staticClass:"font-bold text-lg"},[t._v("\n            "+t._s(e["asset_title_"+t.$i18n.locale])+"\n          ")]):t._e(),t._v(" "),n("p",{staticClass:"text-sm text-gray-600"},[t._v("\n            "+t._s(t.$t("assets.uploaded"))+"\n            "+t._s(t.getUploadDate(e.asset_name))+"\n          ")]),t._v(" "),e["asset_desc_"+t.$i18n.locale]?n("p",{staticClass:"text-sm text-gray-600"},[t._v("\n            "+t._s(t.$t("assets.description"))+"\n            "+t._s(e["asset_desc_"+t.$i18n.locale])+"\n          ")]):t._e(),t._v(" "),e.asset_travel_id?n("p",{staticClass:"text-sm text-gray-600 font-bold",domProps:{innerHTML:t._s(t.getTravelTitle(e.asset_travel_id))}}):t._e()])])})),t._v(" "),t.filteredAssets.length?t._e():n("div",{staticClass:"flex justify-center max-w-1/4 my-16"},[t._v("\n        "+t._s(t.$t("assets.filtered_empty"))+"\n      ")])],2),t._v(" "),"asset-remove"===t.modalId?n("RemoveModal",{on:{confirm:t.removeAsset,cancel:t.closeRemoveModal}}):t._e(),t._v(" "),"asset-edit"===t.modalId?n("EditAssetModal",{attrs:{travels:t.data.travels,articles:t.data.articles,image:t.assetToEdit},on:{confirm:t.updateAsset,cancel:t.closeRemoveModal}}):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Tag:n(303).default,Btn:n(287).default,RemoveModal:n(293).default,EditAssetModal:n(326).default})},326:function(t,e,n){"use strict";n.r(e);n(19),n(27),n(82),n(17),n(48),n(36),n(37),n(28),n(56),n(18);var o=n(9),r=n(286),l=n(20);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{image:r.a.object.def(null),articles:r.a.array.def([]),travels:r.a.array.def([])},data:function(){return{locale:"",model:{name:"",title:"",description:"",article_ids:[],travel:null}}},mounted:function(){var t=this.$i18n.locale;this.locale=t;var e=this.image,n=e.asset_name,o=e.asset_article_ids,r=e.asset_travel_id;this.model={name:n,title:this.image["asset_title_".concat(t)],description:this.image["asset_desc_".concat(t)],article_ids:o?this.articles.filter((function(article){return o.includes(article.article_id)})):[],travel:r?this.travels.find((function(t){return t.travel_id===r})):null}},methods:d(d({},Object(l.b)("modal",["setVisible","setModalId"])),{},{handleConfirm:function(){this.$emit("confirm",this.model,this.image),this.closeModal()},handleCancel:function(){this.closeModal()},closeModal:function(){this.setModalId(null),this.setVisible(!1)},handleReduce:function(option){return option["article_title_".concat(this.locale)]}})},m=n(24),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"modal"}},[n("div",[n("div",{staticClass:"h-full flex"},[n("div",{staticClass:"m-8"},[n("img",{staticClass:"h-48",attrs:{src:t.image.asset_src}})]),t._v(" "),n("div",{staticClass:"mr-8 mb-8 max-w-1/2"},[n("InputText",{attrs:{label:t.$t("assets.edit.name"),disabled:""},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),t._v(" "),n("InputText",{attrs:{label:t.$t("assets.edit.title")},model:{value:t.model.title,callback:function(e){t.$set(t.model,"title",e)},expression:"model.title"}}),t._v(" "),n("Textarea",{attrs:{label:t.$t("assets.edit.description")},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),t._v(" "),n("Select",{attrs:{multiple:"",label:t.$t("assets.edit.articles"),options:t.articles,"option-label":"article_title_"+t.locale},model:{value:t.model.article_ids,callback:function(e){t.$set(t.model,"article_ids",e)},expression:"model.article_ids"}}),t._v(" "),n("Select",{attrs:{label:t.$t("assets.edit.travel"),options:t.travels,"option-label":"travel_title_"+t.locale},model:{value:t.model.travel,callback:function(e){t.$set(t.model,"travel",e)},expression:"model.travel"}})],1)]),t._v(" "),n("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[n("div",{staticClass:"flex justify-end"},[n("Btn",{attrs:{label:t.$t("general.confirm")},on:{click:t.handleConfirm}}),t._v(" "),n("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:t.handleCancel}})],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputText:n(291).default,Textarea:n(299).default,Select:n(294).default,Btn:n(287).default})},334:function(t,e,n){"use strict";n.r(e);n(19),n(27),n(17),n(48),n(36),n(37),n(28),n(18),n(32);var o=n(4),r=n(9),l=n(286),c=n(20);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:{id:l.a.string.def("new-block"),type:l.a.string.def("paragraph"),content:l.a.any.def(null),edit:l.a.bool.def(!1),assets:l.a.array.def([]),data:l.a.object.def({})},data:function(){return{imageType:"desktop",model:{desktop:null,mobile:null,playlist:""}}},computed:f({},Object(c.c)("modal",["modalId"])),methods:f(f({},Object(c.b)("modal",["setVisible","setModalId"])),{},{getTools:function(t){return"map-description"===t?["map"]:"anecdote"===t?["anecdote"]:[]},selectImage:function(t){this.imageType=t,this.setModalId("editor-asset"),this.setVisible(!0)},handleConfirm:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(content="",["image","playlist"].includes(t.type)){e.next=7;break}return e.next=4,t.$refs.textEditor.saveContent();case 4:content=e.sent,e.next=8;break;case 7:"image"===t.type?content={content:{desktop:t.model.desktop||t.content.desktop,mobile:t.model.mobile||t.content.mobile}}:"playlist"===t.type&&(content={content:t.model[t.type]});case 8:t.$emit("confirm",t.type,content,t.id);case 9:case"end":return e.stop()}}),e)})))()},handleCancel:function(){this.$emit("cancel")},handleConfirmImage:function(t){this.model[this.imageType]=t}})},h=n(24),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-2"},["image"===t.type?n("div",{staticClass:"flex justify-center"},[n("div",{staticClass:"h-full flex justify-center"},[t.edit||t.model.desktop?n("img",{staticClass:"h-48",attrs:{src:t.model.desktop?t.model.desktop.asset_src:t.content.desktop.asset_src}}):t._e(),t._v(" "),n("div",{class:{"h-full flex items-center ml-4":t.edit||t.model.desktop,"flex justify-center mx-4":!t.edit}},[n("Btn",{attrs:{"icon-btn":"",icon:"pencil",label:t.$t("general.desktop")},on:{click:function(e){return t.selectImage("desktop")}}})],1)]),t._v(" "),n("div",{staticClass:"h-full flex justify-center"},[t.edit||t.model.mobile?n("img",{staticClass:"h-48",attrs:{src:t.model.mobile?t.model.mobile.asset_src:t.content.mobile.asset_src}}):t._e(),t._v(" "),n("div",{class:{"h-full flex items-center ml-4":t.edit||t.model.mobile,"flex justify-center mx-4":!t.edit}},[n("Btn",{attrs:{"icon-btn":"",icon:"pencil",label:t.$t("general.mobile")},on:{click:function(e){return t.selectImage("mobile")}}})],1)])]):"playlist"===t.type?n("div",[n("InputText",{attrs:{value:t.edit?t.content:""},model:{value:t.model.playlist,callback:function(e){t.$set(t.model,"playlist",e)},expression:"model.playlist"}})],1):n("div",[n("TextEditor",{ref:"textEditor",attrs:{name:"block-editor-comp-"+t.type,data:t.edit?t.content:null,anecdotes:t.data?t.data.anecdotes:null,tools:t.getTools(t.type)}})],1),t._v(" "),n("div",{staticClass:"flex justify-center my-2"},[n("Btn",{attrs:{label:t.$t("general.confirm")},on:{click:t.handleConfirm}}),t._v(" "),n("Btn",{attrs:{label:t.$t("general.cancel"),type:"secondary"},on:{click:t.handleCancel}})],1),t._v(" "),"editor-asset"===t.modalId?n("AssetsModal",{attrs:{assets:t.assets,data:t.data,picked:t.edit?t.content[t.imageType]:null},on:{confirm:t.handleConfirmImage}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Btn:n(287).default,InputText:n(291).default,TextEditor:n(354).default,AssetsModal:n(304).default})},345:function(t,e,n){"use strict";var o=n(316);n.n(o).a},346:function(t,e,n){(e=n(61)(!1)).push([t.i,"[id^=editor]{width:100%;min-width:50vw;padding:20px;border:1px solid #d3d3d3;min-height:200px}",""]),t.exports=e},347:function(t,e,n){"use strict";var o=n(317);n.n(o).a},348:function(t,e,n){(e=n(61)(!1)).push([t.i,"#map{height:100%;min-height:400px}#infowindow-content .title{font-weight:700}#infowindow-content{display:none}#map #infowindow-content{display:inline}",""]),t.exports=e},354:function(t,e,n){"use strict";n.r(e);n(19),n(60),n(27),n(17),n(53),n(21),n(36),n(37),n(28),n(18),n(32);var o=n(4),r=n(136),l=n(9),c=n(286),d=n(20),f=n(343),m=n.n(f),h=n(344),v=n.n(h),y=(n(41),n(48),n(134),n(56),n(38),n(83),n(330)),_=n(331),k=function(){function t(e){var n=e.api;e.config;Object(y.a)(this,t),this.api=n,this.store=window.$nuxt.$store,this.button=null,this._state=!1,this.address=void 0,this.input=null,this.mapInitialized=!1,this.tag="SPAN",this.class="map-point"}return Object(_.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:!0}}}]),Object(_.a)(t,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML='<svg class="fill-current w-4 h-4 icon cursor-pointer">\n                              <use xlink:href="#icon-location"></use>\n                            </svg>',this.button}},{key:"surround",value:function(t){this.state?this.unwrap(t):this.wrap(t)}},{key:"wrap",value:function(t){var e=t.extractContents(),n=document.createElement(this.tag),o=Math.floor(1e4*Math.random());n.classList.add(this.class),n.setAttribute("id","map-point-".concat(o)),n.appendChild(e),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(t){var e=this.api.selection.findParentTag(this.tag,this.class),text=t.extractContents();e.remove(),t.insertNode(text)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag);this.state=t&&Array.from(t.classList).includes("map-point"),this.mapPointId=t&&t.getAttribute("id"),this.state?this.showActions():this.hideActions()}},{key:"renderActions",value:function(){return this.anecdotePicker=document.createElement("input"),this.anecdotePicker.type="text",this.anecdotePicker.value="",this.anecdotePicker.hidden=!0,this.anecdotePicker}},{key:"showActions",value:function(){var t=this;console.log("show action",this.mapPointId),this.store.commit("modal/setVisible",!0),this.store.commit("modal/setModalId","map-point"),setTimeout((function(){t.mapInitialized||t.initMap(),document.querySelector(".confirm-map-point").addEventListener("click",(function(e){if(t.address){var n=t.address,address=n.address,o=n.lat,r=n.lng,l=document.querySelector("#".concat(t.mapPointId));l.getAttribute("data-address")||(l.setAttribute("data-address",address),l.setAttribute("data-lat",o),l.setAttribute("data-lng",r)),t.address=null,t.input.value="",t.store.commit("modal/setVisible",!1),t.store.commit("modal/setModalId",null),t.mapPoint=null,t.mapPointId=null}}))}))}},{key:"initMap",value:function(){var t=this,map=new window.google.maps.Map(document.getElementById("map"),{center:{lat:-33.8688,lng:151.2195},zoom:13});this.mapInitialized=!0,this.input=document.getElementById("pac-input");var e=new window.google.maps.places.Autocomplete(this.input);e.bindTo("bounds",map),e.setFields(["address_components","geometry","icon","name"]);var n=new window.google.maps.InfoWindow,o=document.getElementById("infowindow-content");n.setContent(o);var marker=new window.google.maps.Marker({map:map,anchorPoint:new window.google.maps.Point(0,-29)});e.addListener("place_changed",(function(){n.close(),marker.setVisible(!1);var r=e.getPlace();if(r.geometry){r.geometry.viewport?map.fitBounds(r.geometry.viewport):(map.setCenter(r.geometry.location),map.setZoom(17)),marker.setPosition(r.geometry.location),marker.setVisible(!0);var l=r.geometry.location.lat(),c=r.geometry.location.lng(),address="";r.address_components&&(address=[r.address_components[0]&&r.address_components[0].short_name||"",r.address_components[1]&&r.address_components[1].short_name||"",r.address_components[2]&&r.address_components[2].short_name||""].join(" ")),o&&(o.children["place-icon"].src=r.icon,o.children["place-name"].textContent=r.name,o.children["place-address"].textContent=address),n.open(map,marker),t.address={address:address,lat:l,lng:c}}else window.alert("No details available for input: '"+r.name+"'")}))}},{key:"hideActions",value:function(){}}]),t}(),O=function(){function t(e){var n=e.api;e.config;Object(y.a)(this,t),this.store=window.$nuxt.$store,this.api=n,this.button=null,this._state=!1,this.tag="SPAN",this.class="anecdote"}return Object(_.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.button.classList.toggle(this.api.styles.inlineToolButtonActive,t)}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:!0}}}]),Object(_.a)(t,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=' <svg class="fill-current w-4 h-4 icon cursor-pointer">\n                                <use xlink:href="#icon-file-empty"></use>\n                              </svg>',this.button}},{key:"surround",value:function(t){this.state?this.unwrap(t):this.wrap(t)}},{key:"wrap",value:function(t){var e=t.extractContents(),n=document.createElement(this.tag);n.classList.add(this.class),n.appendChild(e),t.insertNode(n),this.api.selection.expandToTag(n)}},{key:"unwrap",value:function(t){var e=this.api.selection.findParentTag(this.tag,this.class),text=t.extractContents();e.remove(),t.insertNode(text)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag);this.state=t&&Array.from(t.classList).includes("anecdote"),this.state?this.showActions(t):this.hideActions()}},{key:"renderActions",value:function(){return this.anecdotePicker=document.createElement("input"),this.anecdotePicker.type="text",this.anecdotePicker.value="",this.anecdotePicker.hidden=!0,this.anecdotePicker}},{key:"showActions",value:function(t){var e=this;this.store.commit("modal/setVisible",!0),this.store.commit("modal/setModalId","anecdote"),setTimeout((function(){document.querySelector(".confirm-anecdote").addEventListener("click",(function(n){var o=e.store.state.editor.value;t.classList.add("anecdote-".concat(o.anecdote_id)),t.setAttribute("data-title",o.anecdote_title),e.store.commit("modal/setVisible",!1),e.store.commit("modal/setModalId",null)}))}))}},{key:"hideActions",value:function(){}}]),t}(),w=function(t){var e={paragraph:"p"};return t.blocks.map((function(t){var n=document.createElement(e[t.type]);return n.innerHTML=t.data.text,n.outerHTML})).join("")};function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j={props:{name:c.a.string.def("editor"),data:c.a.object.def({}),anecdotes:c.a.array.def([]),tools:c.a.array.def([])},data:function(){return{editor:null,saveTrigger:!1,toolsMap:{list:v.a,map:{class:k,inlineToolbar:!0,config:{}},anecdote:{class:O,inlineToolbar:!0}}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(d.c)("modal",["modalId"])),watch:{saveTrigger:function(t,e){t!==e&&this.saveContent()}},mounted:function(){this.editor=new m.a({holder:"editor-".concat(this.name),tools:this.getTools(),data:this.data})},methods:{getTools:function(){var t=this,e={};return[].concat(Object(r.a)(this.tools),["list"]).map((function(n){e[n]=t.toolsMap[n]})),e},saveContent:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.editor.save();case 2:return n=e.sent,content=w(n),t.$emit("save",{content:content,rawContent:n}),e.abrupt("return",{content:content,rawContent:n});case 6:case"end":return e.stop()}}),e)})))()}}},C=(n(345),n(24)),component=Object(C.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"editor-"+t.name}}),t._v(" "),"anecdote"===t.modalId?n("AnecdoteModal",{attrs:{anecdotes:t.anecdotes}}):t._e(),t._v(" "),"map-point"===t.modalId?n("MapPointModal"):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AnecdoteModal:n(367).default,MapPointModal:n(368).default})},364:function(t,e,n){"use strict";n.r(e);var o=n(286),r={props:{id:o.a.string.def("block"),position:o.a.number.def(0),type:o.a.string.def(null),content:o.a.any.def(null),assets:o.a.array.def([]),data:o.a.object.def({}),rawContent:o.a.object.def({})},data:function(){return{isEditing:!1,actions:[{key:"edit",icon:"pencil"},{key:"remove",icon:"cross"},{key:"up",icon:"arrow-up2"},{key:"down",icon:"arrow-down2"}]}},methods:{handleAction:function(t){this.$emit(t.key,this.id),"edit"===t.key&&(this.isEditing=!0)},confirmModification:function(t,content,e){this.$emit("confirm",t,content,e),this.isEditing=!1}}},l=n(24),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isEditing?n("div",[n("hr"),t._v(" "),n("BlockEditorComp",{attrs:{id:t.id,edit:"",type:t.type,assets:t.assets,data:t.data,content:["image","playlist"].includes(t.type)?t.content:t.rawContent},on:{confirm:t.confirmModification,cancel:function(e){t.isEditing=!1}}})],1):n("div",[n("hr"),t._v(" "),n("div",{staticClass:"my-4"},[n("div",{staticClass:"flex justify-between mb-2"},[n("p",{staticClass:"uppercase"},[t._v(t._s(t.type))]),t._v(" "),n("div",{staticClass:"flex"},t._l(t.actions,(function(e){return n("div",{key:e.key,staticClass:"rounded-full w-8 h-8 mx-1 flex justify-center items-center cursor-pointer border-2 border-black",on:{click:function(n){return t.handleAction(e)}}},[n("Icon",{attrs:{name:e.icon}})],1)})),0)]),t._v(" "),"image"===t.type?n("div",{staticClass:"flex"},[n("div",{staticClass:"mr-2"},[n("img",{staticClass:"h-48",attrs:{src:t.content.desktop?t.content.desktop.asset_src:""}}),t._v(" "),n("p",[t._v(t._s(t.$t("general.desktop")))])]),t._v(" "),n("div",[n("img",{staticClass:"h-48",attrs:{src:t.content.mobile?t.content.mobile.asset_src:""}}),t._v(" "),n("p",[t._v(t._s(t.$t("general.mobile")))])])]):n("p",{domProps:{innerHTML:t._s(t.content)}})])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Icon:n(289).default,BlockEditorComp:n(334).default})},367:function(t,e,n){"use strict";n.r(e);n(19),n(27),n(17),n(36),n(37),n(28),n(18);var o=n(9),r=n(286),l=n(20);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{anecdotes:r.a.array.def([])},data:function(){return{anecdoteModel:{}}},methods:d(d({},Object(l.b)("editor",["setValue"])),{},{handleInput:function(input){this.setValue(input),this.anecdoteModel=input}})},m=n(24),component=Object(m.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"p-8"},[e("Select",{attrs:{options:this.anecdotes,"option-label":"anecdote_title",value:this.anecdoteModel},on:{input:this.handleInput}}),this._v(" "),e("div",{staticClass:"flex justify-end my-4"},[e("Btn",{attrs:{label:this.$t("general.confirm"),"additional-classes":"confirm-anecdote"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Select:n(294).default,Btn:n(287).default})},368:function(t,e,n){"use strict";n.r(e);var o={},r=(n(347),n(24)),component=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("portal",{attrs:{to:"modal"}},[e("div",{staticClass:"p-8"},[e("input-text",{attrs:{id:"pac-input",type:"text",placeholder:"Lieu - Luogo"}}),this._v(" "),e("div",{attrs:{id:"map"}}),this._v(" "),e("div",{attrs:{id:"infowindow-content"}},[e("img",{attrs:{id:"place-icon",src:"",width:"16",height:"16"}}),this._v(" "),e("span",{staticClass:"title",attrs:{id:"place-name"}}),e("br"),this._v(" "),e("span",{attrs:{id:"place-address"}})]),this._v(" "),e("div",{staticClass:"flex justify-end my-4"},[e("Btn",{attrs:{label:this.$t("general.confirm"),"additional-classes":"confirm-map-point"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputText:n(291).default,Btn:n(287).default})}}]);