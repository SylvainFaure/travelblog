(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{283:function(e,t,r){var content=r(289);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(103).default)("f280b1c0",content,!0,{sourceMap:!1})},288:function(e,t,r){"use strict";var n=r(283);r.n(n).a},289:function(e,t,r){(t=r(102)(!1)).push([e.i,".loader{border:16px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:120px;height:120px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}",""]),e.exports=t},296:function(e,t,r){"use strict";r.r(t);var n={},l=(r(288),r(22)),component=Object(l.a)(n,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-screen h-screen fixed bg-gray-200 inset-0 flex justify-center items-center z-50"},[t("div",{staticClass:"loader animation-spin"})])}],!1,null,null,null);t.default=component.exports},338:function(e,t,r){"use strict";r.r(t);r(17),r(30),r(18),r(53),r(46),r(47),r(31),r(19);var n=r(13);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={props:{tabs:r(276).a.array.def([])},data:function(){return{mappedTabs:[]}},mounted:function(){this.mappedTabs=this.tabs.map((function(e,i){return o(o({},e),{},{active:0===i})}))},methods:{handleTabClick:function(e){this.$emit("tab",e),this.mappedTabs=this.mappedTabs.map((function(t){return o(o({},t),{},{active:t.key===e.key})}))}}},f=r(22),component=Object(f.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex m-6"},e._l(e.mappedTabs,(function(t){return r("div",{key:t.key,class:{"font-bold border-b-2 border-gray-400":t.active,"cursor-pointer mr-8 py-2":!0},on:{click:function(r){return e.handleTabClick(t)}}},[e._v("\n    "+e._s(t.name)+"\n  ")])})),0)}),[],!1,null,null,null);t.default=component.exports},339:function(e,t,r){"use strict";r.r(t);r(17),r(60),r(30),r(18),r(20),r(46),r(47),r(31),r(14),r(32),r(19),r(33),r(310),r(25);var n=r(4),l=r(13),o=r(276),c=r(314);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={components:{FileUpload:r.n(c).a},props:{travels:o.a.array.def([])},data:function(){return{loading:!1,files:[],filesData:[]}},methods:{handleUpload:function(){this.$refs.upload.active=!0,this.loading=!0},inputFile:function(e,t){(!t||e&&t.name!==e.name)&&(console.log("PUSH NEW FILE DATA"),this.filesData.push(function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({id:e.id,name:e.name},{title_fr:"",title_it:"",place_fr:"",place_it:"",country_fr:"",country_it:"",desc_fr:"",desc_it:"",travel_id:""}))),e&&t&&!e.active&&t.active&&e.xhr},inputFilter:function(e,t,r){if(e&&!t&&!/\.(jpeg|jpe|jpg|gif|png|webp)$/i.test(e.name))return r();e.blob="";var n=window.URL||window.webkitURL;n&&n.createObjectURL&&(e.blob=n.createObjectURL(e.file))},uploadFiles:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,e.files.forEach((function(t,n){r.append("file[".concat(n,"]"),t.file),Object.keys(e.filesData[n]).forEach((function(t,i){r.append("infos[".concat(n,"][").concat(t,"]"),e.filesData[n][t])}))})),t.prev=2,t.next=5,e.$axios.post("/api/assets",r,{headers:{"Content-Type":"multipart/form-data"}});case 5:n=t.sent,console.log("RESPONSE",n),e.files=[],e.filesData=[],e.$toast.success(e.$t("assets.upload_success")),e.$emit("uploaded"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("ERROR",t.t0),e.$toast.error(e.$t("assets.upload_error"));case 17:return t.prev=17,e.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[2,13,17,20]])})))()}}},v=r(22),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-6"},[r("file-upload",{ref:"upload",attrs:{multiple:!0,"custom-action":e.uploadFiles},on:{"input-file":e.inputFile,"input-filter":e.inputFilter},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[e.files.length?e._e():r("btn",{attrs:{type:"primary",label:e.$t("assets.upload")}})],1),e._v(" "),r("div",{staticClass:"flex flex-wrap"},e._l(e.files,(function(t,i){return r("div",{key:i,staticClass:"mr-4 my-4 w-56"},[r("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.title")},model:{value:e.filesData[i]["title_"+e.$i18n.locale],callback:function(t){e.$set(e.filesData[i],"title_"+e.$i18n.locale,t)},expression:"filesData[i][`title_${$i18n.locale}`]"}}),e._v(" "),r("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.place")},model:{value:e.filesData[i]["place_"+e.$i18n.locale],callback:function(t){e.$set(e.filesData[i],"place_"+e.$i18n.locale,t)},expression:"filesData[i][`place_${$i18n.locale}`]"}}),e._v(" "),r("Select",{attrs:{placeholder:e.$t("assets.form.travel"),options:e.travels,"option-label":"travel_title_"+e.$i18n.locale,"reduce-fn":function(e){return e.travel_id}},model:{value:e.filesData[i].travel_id,callback:function(t){e.$set(e.filesData[i],"travel_id",t)},expression:"filesData[i].travel_id"}}),e._v(" "),r("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.country")},model:{value:e.filesData[i]["countries_"+e.$i18n.locale],callback:function(t){e.$set(e.filesData[i],"countries_"+e.$i18n.locale,t)},expression:"filesData[i][`countries_${$i18n.locale}`]"}}),e._v(" "),r("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.description")},model:{value:e.filesData[i]["desc_"+e.$i18n.locale],callback:function(t){e.$set(e.filesData[i],"desc_"+e.$i18n.locale,t)},expression:"filesData[i][`desc_${$i18n.locale}`]"}}),e._v(" "),r("img",{staticClass:"w-56",attrs:{src:t.blob}}),e._v(" "),r("p",{staticClass:"text-sm"},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)})),0),e._v(" "),r("btn",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&(!e.$refs.upload||!e.$refs.upload.active),expression:"files.length && (!$refs.upload || !$refs.upload.active)"}],attrs:{type:"primary",label:e.$t("assets.do_upload")},on:{click:e.handleUpload}}),e._v(" "),e.loading?r("Loader"):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:r(278).default,InputText:r(282).default,Select:r(285).default,Loader:r(296).default})},351:function(e,t,r){"use strict";r.r(t);r(14),r(32),r(33);var n=r(11),l=(r(25),r(4)),o={asyncData:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,l,o,c,f,d,v,m,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,l=[],o=[],c=[],t.prev=4,t.next=7,Promise.all([r.get("/api/assets"),r.get("/api/travels"),r.get("/api/articles")]);case 7:f=t.sent,d=Object(n.a)(f,3),v=d[0],m=d[1],h=d[2],l=v.data,o=m.data,c=h.data,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),console.log(t.t0);case 20:return t.abrupt("return",{assets:l,travels:o,articles:c});case 21:case"end":return t.stop()}}),t,null,[[4,17]])})))()},data:function(){return{activeTab:"library",tabs:[{key:"library",name:"Library"},{key:"organization",name:"Organization"}]}},methods:{reloadAssets:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/api/assets");case 2:r=t.sent,data=r.data,e.assets=data;case 5:case"end":return t.stop()}}),t)})))()}}},c=r(22),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Tabs",{attrs:{tabs:e.tabs},on:{tab:function(t){e.activeTab=t.key}}}),e._v(" "),"library"===e.activeTab?r("div",[r("AssetPickerUploader",{attrs:{travels:e.travels},on:{uploaded:e.reloadAssets}}),e._v(" "),r("AssetPickerLibrary",{attrs:{assets:e.assets,data:{travels:e.travels,articles:e.articles}},on:{change:e.reloadAssets}})],1):"organization"===e.activeTab?r("div"):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Tabs:r(338).default,AssetPickerUploader:r(339).default,AssetPickerLibrary:r(303).default})}}]);