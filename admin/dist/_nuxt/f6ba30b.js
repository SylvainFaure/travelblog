(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{278:function(e,t,n){"use strict";n.r(t);n(60);var l=n(276),r={props:{type:l.a.string.def("primary"),label:l.a.string.def("Save"),iconBtn:l.a.bool.def(!1),icon:l.a.string.def("checkmark"),additionalClasses:l.a.string.def("")},computed:{classes:function(){var e=this.iconBtn?"px-4 py-2":"p-2";return"bg-".concat(this.type||"primary"," ").concat(e)}}},o=n(22),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:[e.classes,e.additionalClasses,"border text-white rounded text-center"],attrs:{type:"button"},on:{click:function(t){return e.$emit("click")}}},[e.iconBtn?n("span",[n("Icon",{attrs:{name:e.icon}})],1):n("span",[e._v(e._s(e.label))])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:n(280).default})},280:function(e,t,n){"use strict";n.r(t);var l={props:{name:n(276).a.string.def("")}},r=n(22),component=Object(r.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({class:{"fill-current w-4 h-4 icon":!0,"cursor-pointer":!!this.$listeners}},this.$listeners),[t("use",{attrs:{"xlink:href":"#icon-"+this.name}})])}),[],!1,null,null,null);t.default=component.exports},282:function(e,t,n){"use strict";n.r(t);var l=n(276),r={props:{type:l.a.string.def("text"),name:l.a.string.def("input"),id:l.a.string.def("input"),label:l.a.string.def(""),placeholder:l.a.string.def(""),required:l.a.bool.def(!1),disabled:l.a.bool.def(!1),value:l.a.string.def(""),small:l.a.bool.def(!1)}},o=n(22),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"mt-2 mb-4":!e.small}},[e.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),n("input",{class:[e.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:e.id,type:e.type,name:e.name,required:e.required,disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("enter")},input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports},284:function(e,t,n){"use strict";n.r(t);var l={},r=n(22),component=Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("portal",{attrs:{to:"modal"}},[n("div",{staticClass:"flex flex-col justify-center items-center m-16"},[n("h4",{staticClass:"font-bold text-lg text-center mb-4"},[e._v(e._s(e.$t("general.sure")))]),e._v(" "),n("div",{staticClass:"flex justify-center"},[n("Btn",{attrs:{label:e.$t("general.confirm"),"additional-classes":"mr-4"},on:{click:function(t){return e.$emit("confirm")}}}),e._v(" "),n("Btn",{attrs:{label:e.$t("general.cancel"),type:"secondary"},on:{click:function(t){return e.$emit("cancel")}}})],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:n(278).default})},285:function(e,t,n){"use strict";n.r(t);var l=n(315),r=n.n(l),o=n(276),c=(n(316),{components:{vSelect:r.a},props:{label:o.a.string.def(null),placeholder:o.a.string.def(null),options:o.a.array.def([]),optionLabel:o.a.string.def("label"),multiple:o.a.bool.def(!1),taggable:o.a.bool.def(!1),pushTags:o.a.bool.def(!1),value:o.a.oneOfType([o.a.object,o.a.array]).def(null),small:o.a.bool.def(!1)}}),d=(n(318),n(22)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),n("v-select",{attrs:{options:e.options,label:e.optionLabel,multiple:e.multiple,taggable:e.taggable,"push-tags":e.pushTags,placeholder:e.placeholder,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1)}),[],!1,null,null,null);t.default=component.exports},286:function(e,t,n){"use strict";n.r(t);var l=n(276),r={props:{name:l.a.string.def("textarea"),placeholder:l.a.string.def(""),label:l.a.string.def(null),required:l.a.bool.def(!1),rows:l.a.number.def(4),value:l.a.string.def(""),classes:l.a.string.def("")}},o=n(22),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.label?n("h4",{staticClass:"label font-bold my-4"},[n("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),n("textarea",{class:[e.classes,"w-full p-2 rounded border border-grey-600"],attrs:{name:e.name,placeholder:e.placeholder,required:e.required,rows:e.rows},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Textarea:n(286).default})},287:function(e,t,n){var content=n(319);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(103).default)("2bea4cae",content,!0,{sourceMap:!1})},290:function(e,t,n){var content=n(321);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(103).default)("fba0ba2a",content,!0,{sourceMap:!1})},303:function(e,t,n){"use strict";n.r(t);n(17),n(40),n(30),n(18),n(48),n(53),n(189),n(46),n(47),n(31),n(38),n(56),n(61),n(63),n(19),n(25);var l=n(4),r=n(13),o=n(349),c=n(276),d=n(26);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={props:{assets:c.a.array.def([]),pick:c.a.string.def(null),picked:c.a.oneOfType([c.a.array,c.a.object]).def(null),data:c.a.object.def({}),pickLimit:c.a.number.def(null)},data:function(){return{locale:"",pickedAsset:null,pickedAssetsIds:[],assetToRemove:null,assetToEdit:null}},computed:m({},Object(d.c)("modal",["modalId"])),mounted:function(){var e=this;this.locale=this.$i18n.locale,this.picked&&("multiple"===this.pick?this.pickedAssetsIds=this.picked.map((function(p){return p.asset_id})):(this.pickedAsset=this.picked,this.$nextTick((function(){e.initWithPicked()}))))},methods:m(m({},Object(d.b)("modal",["setVisible","setModalId"])),{},{getUploadDate:function(e){var t=e.split("_")[0];return Object(o.a)(new Date(Number(t)),"dd/MM/yyyy")},initWithPicked:function(){var e=this;this.$refs.asset.forEach((function(a){Number(a.getAttribute("id"))!==Number(e.pickedAsset.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")}))},handlePickOneAsset:function(e){var t=this;this.$refs.asset.forEach((function(a){t.pickedAsset&&t.pickedAsset.asset_id===e.asset_id?a.classList.remove("opacity-50"):Number(a.getAttribute("id"))!==Number(e.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")})),this.pickedAsset=e},handleAssetPick:function(e,t){var n,l=this;(t.stopPropagation(),t.preventDefault(),"one"===this.pick&&(this.handlePickOneAsset(e),this.$emit("pick",e)),"multiple"===this.pick)&&((!this.pickLimit||this.pickedAssetsIds.length<this.pickLimit||this.pickedAssetsIds.length===this.pickLimit&&!t.target.checked)&&(t.target.checked?(n="add",this.pickedAssetsIds.push(e.asset_id)):(n="remove",this.pickedAssetsIds=this.pickedAssetsIds.filter((function(a){return a!==e.asset_id}))),this.pickedAssetsIds.length===this.pickLimit?this.$refs.assetContainer.forEach((function(a){l.pickedAssetsIds.includes(Number(a.getAttribute("id").replace("container_","")))||(a.classList.add("pointer-events-none"),a.classList.add("opacity-50"))})):this.$refs.assetContainer.forEach((function(a){a.classList.remove("pointer-events-none"),a.classList.remove("opacity-50")})),this.$emit("picks",this.pickedAssetsIds,e,n)))},handleEdit:function(e){this.assetToEdit=e,this.setVisible(!0),this.setModalId("asset-edit")},handleRemove:function(e){this.assetToRemove=e,this.setVisible(!0),this.setModalId("asset-remove")},removeAsset:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/assets/delete",{ids:[e.assetToRemove.asset_id],names:[e.assetToRemove.asset_name]});case 3:e.$toast.success(e.$t("assets.removed_success")),e.$emit("change"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e.$toast.error(e.$t("assets.removed_error"));case 11:return t.prev=11,e.closeRemoveModal(),e.assetToRemove=null,t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,7,11,15]])})))()},updateAsset:function(e,t){var n=this;return Object(l.a)(regeneratorRuntime.mark((function l(){var o,c;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return c=m(m({},t),{},(o={},Object(r.a)(o,"asset_desc_".concat(n.locale),e.description),Object(r.a)(o,"asset_title_".concat(n.locale),e.title),Object(r.a)(o,"asset_article_ids",JSON.stringify(e.article_ids.map((function(e){return Number(e.article_id)})))),Object(r.a)(o,"asset_travel_id",Number(e.travel.travel_id)),o)),l.prev=1,l.next=4,n.$axios.put("/api/assets/".concat(t.asset_id),c);case 4:n.$toast.success(n.$t("assets.updated_success")),n.$emit("change"),n.assetToEdit=null,l.next=13;break;case 9:l.prev=9,l.t0=l.catch(1),console.log(l.t0),n.$toast.error(n.$t("assets.updated_error"));case 13:case"end":return l.stop()}}),l,null,[[1,9]])})))()},closeRemoveModal:function(){this.setVisible(!1),this.setModalId(null)}})},h=(n(320),n(22)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"m-6"},[n("div",[e._v("tags et filtres")]),e._v(" "),n("div",{staticClass:"flex flex-wrap"},e._l(e.assets,(function(t,i){return n("div",{key:i,ref:"assetContainer",refInFor:!0,class:{"w-64 mr-4 my-2 relative":!0,"h-72 border border-grey-100":!e.pick},attrs:{id:"container_"+t.asset_id}},["multiple"===e.pick?n("span",{staticClass:"absolute top-0 right-0"},[n("input",{staticClass:"mr-2 mt-2 z-20",attrs:{type:"checkbox"},domProps:{checked:e.pickedAssetsIds.includes(t.asset_id)},on:{change:function(n){return e.handleAssetPick(t,n)}}})]):e._e(),e._v(" "),n("div",{class:{"backdrop-container max-h-2/3 overflow-hidden relative flex justify-center items-center":!e.pick}},[e.pick?e._e():n("div",{staticClass:"backdrop opacity-0 absolute inset-0 h-full w-full hover:opacity-100 transition-opacity duration-300 bg-blue-100 bg-opacity-50"}),e._v(" "),e.pick?e._e():n("div",{staticClass:"backdrop-content z-10 flex absolute inset-0 justify-center items-center opacity-0"},[n("Btn",{attrs:{"icon-btn":"",icon:"pencil"},on:{click:function(n){return e.handleEdit(t)}}}),e._v(" "),n("Btn",{attrs:{"icon-btn":"",type:"secondary",icon:"bin"},on:{click:function(n){return e.handleRemove(t)}}})],1),e._v(" "),n("img",{ref:"asset",refInFor:!0,class:{"max-h-2/3":!e.pick,"cursor-pointer":e.pick,"w-full overflow-hidden":!0},attrs:{id:t.asset_id,src:t.asset_src},on:{click:function(n){return e.handleAssetPick(t,n)}}})]),e._v(" "),e.pick?e._e():n("div",{staticClass:"asset__infos p-4"},[t["asset_title_"+e.$i18n.locale]?n("p",{staticClass:"font-bold text-lg"},[e._v("\n            "+e._s(t["asset_title_"+e.$i18n.locale])+"\n          ")]):e._e(),e._v(" "),n("p",{staticClass:"text-sm text-gray-600"},[e._v("\n            "+e._s(e.$t("assets.uploaded"))+"\n            "+e._s(e.getUploadDate(t.asset_name))+"\n          ")]),e._v(" "),t["asset_desc_"+e.$i18n.locale]?n("p",{staticClass:"text-sm text-gray-600"},[e._v("\n            "+e._s(e.$t("assets.description"))+"\n            "+e._s(t["asset_desc_"+e.$i18n.locale])+"\n          ")]):e._e()])])})),0),e._v(" "),"asset-remove"===e.modalId?n("RemoveModal",{on:{confirm:e.removeAsset,cancel:e.closeRemoveModal}}):e._e(),e._v(" "),"asset-edit"===e.modalId?n("EditAssetModal",{attrs:{travels:e.data.travels,articles:e.data.articles,image:e.assetToEdit},on:{confirm:e.updateAsset,cancel:e.closeRemoveModal}}):e._e()],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:n(278).default,RemoveModal:n(284).default,EditAssetModal:n(342).default})},318:function(e,t,n){"use strict";var l=n(287);n.n(l).a},319:function(e,t,n){(t=n(102)(!1)).push([e.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),e.exports=t},320:function(e,t,n){"use strict";var l=n(290);n.n(l).a},321:function(e,t,n){(t=n(102)(!1)).push([e.i,".backdrop,.backdrop-content{transition:opacity .3s}.backdrop-container:hover>.backdrop,.backdrop-container:hover>.backdrop-content{opacity:1}.backdrop-container:hover>.backdrop{filter:blur(5px) grayscale(.7)}",""]),e.exports=t},342:function(e,t,n){"use strict";n.r(t);n(17),n(30),n(80),n(18),n(48),n(46),n(47),n(31),n(56),n(19);var l=n(13),r=n(276),o=n(26);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{image:r.a.object.def(null),articles:r.a.array.def([]),travels:r.a.array.def([])},data:function(){return{locale:"",model:{name:"",title:"",description:"",article_ids:[],travel:null}}},mounted:function(){var e=this.$i18n.locale;this.locale=e;var t=this.image,n=t.asset_name,l=t.asset_article_ids,r=t.asset_travel_id;this.model={name:n,title:this.image["asset_title_".concat(e)],description:this.image["asset_desc_".concat(e)],article_ids:l?this.articles.filter((function(article){return JSON.parse(l).includes(article.article_id)})):[],travel:r?this.travels.find((function(e){return e.travel_id===r})):null}},methods:d(d({},Object(o.b)("modal",["setVisible","setModalId"])),{},{handleConfirm:function(){this.$emit("confirm",this.model,this.image),this.closeModal()},handleCancel:function(){this.closeModal()},closeModal:function(){this.setModalId(null),this.setVisible(!1)},handleReduce:function(option){return option["article_title_".concat(this.locale)]}})},m=n(22),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("portal",{attrs:{to:"modal"}},[n("div",[n("div",{staticClass:"h-full flex"},[n("div",{staticClass:"m-8"},[n("img",{staticClass:"h-48",attrs:{src:e.image.asset_src}})]),e._v(" "),n("div",{staticClass:"mr-8 mb-8 max-w-1/2"},[n("InputText",{attrs:{label:e.$t("assets.edit.name"),disabled:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),e._v(" "),n("InputText",{attrs:{label:e.$t("assets.edit.title")},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),e._v(" "),n("Textarea",{attrs:{label:e.$t("assets.edit.description")},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}}),e._v(" "),n("Select",{attrs:{multiple:"",label:e.$t("assets.edit.articles"),options:e.articles,"option-label":"article_title_"+e.locale},model:{value:e.model.article_ids,callback:function(t){e.$set(e.model,"article_ids",t)},expression:"model.article_ids"}}),e._v(" "),n("Select",{attrs:{label:e.$t("assets.edit.travel"),options:e.travels,"option-label":"travel_title_"+e.locale},model:{value:e.model.travel,callback:function(t){e.$set(e.model,"travel",t)},expression:"model.travel"}})],1)]),e._v(" "),n("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[n("div",{staticClass:"flex justify-end"},[n("Btn",{attrs:{label:"Confirm"},on:{click:e.handleConfirm}}),e._v(" "),n("Btn",{attrs:{label:"Cancel",type:"secondary"},on:{click:e.handleCancel}})],1)])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{InputText:n(282).default,Textarea:n(286).default,Select:n(285).default,Btn:n(278).default})}}]);