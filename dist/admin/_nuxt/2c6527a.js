(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{354:function(e,t,n){"use strict";n.r(t);n(19),n(30),n(17),n(46),n(47),n(31),n(18);var o=n(12),c=n(283),r=n(26);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{anecdote:c.a.object.def({}),assets:c.a.array.def([])},data:function(){return{title:"",content:[],locale:"",mounted:!1}},mounted:function(){this.locale=this.$i18n.locale,this.title=this.anecdote&&this.anecdote.anecdote_title?this.anecdote.anecdote_title:"",this.content=this.anecdote&&this.anecdote.anecdote_content?this.anecdote.anecdote_content:[],this.mounted=!0},methods:d(d({},Object(r.b)("modal",["setVisible","setModalId"])),{},{handleConfirm:function(){var e=this.$refs.anecdoteContent.getBlocks();this.$emit("confirm",{anecdote_id:this.anecdote.anecdote_id,anecdote_title:this.title,anecdote_content:JSON.stringify(e)}),this.closeModal()},handleCancel:function(){this.closeModal()},closeModal:function(){this.setModalId(null),this.setVisible(!1)}})},v=n(23),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("portal",{attrs:{to:"modal"}},[n("div",[n("div",{staticClass:"m-8"},[n("InputText",{attrs:{label:e.$t("anecdotes.title")},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),e.mounted?n("BlockEditor",{ref:"anecdoteContent",attrs:{label:e.$t("anecdotes.content"),blocks:e.content,assets:e.assets}}):e._e()],1),e._v(" "),n("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[n("div",{staticClass:"flex justify-end"},[n("Btn",{attrs:{label:e.$t("general.confirm")},on:{click:e.handleConfirm}}),e._v(" "),n("Btn",{attrs:{label:e.$t("general.cancel"),type:"secondary"},on:{click:e.handleCancel}})],1)])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{InputText:n(288).default,BlockEditor:n(299).default,Btn:n(284).default})},376:function(e,t,n){"use strict";n.r(t);n(19),n(30),n(17),n(46),n(47),n(31),n(16),n(36),n(18),n(37);var o=n(12),c=n(15),r=(n(32),n(4)),l=n(26);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o,r,l,d,f,v,m,h,O,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,o=e.$axios,r=n.i18n.locale,l=[],d=[],f=[],t.prev=5,t.next=8,Promise.all([o.get("/api/anecdotes"),o.get("/api/articles"),o.get("/api/assets")]);case 8:v=t.sent,m=Object(c.a)(v,3),h=m[0],O=m[1],y=m[2],l=h.data,d=O.data,f=y.data,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),console.warn(t.t0);case 21:return t.abrupt("return",{locale:r,anecdotes:l,articles:d,assets:f});case 22:case"end":return t.stop()}}),t,null,[[5,18]])})))()},data:function(){return{columns:["title","actions"],anecdoteToDelete:null,anecdoteToEdit:null}},computed:f({},Object(l.c)("modal",["modalId"])),methods:f(f({},Object(l.b)("modal",["setVisible","setModalId"])),{},{reloadData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/api/anecdotes");case 3:n=t.sent,data=n.data,e.anecdotes=data||[],t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.warn(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getColumnValue:function(col,e){return e["anecdote_".concat(col)]},openRemoveModal:function(e){this.anecdoteToDelete=e,this.setModalId("remove-anecdote"),this.setVisible(!0)},closeModal:function(){this.setModalId(null),this.setVisible(!1)},removeAnecdote:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.delete("/api/anecdotes/".concat(e.anecdoteToDelete.anecdote_id));case 3:e.$toast.success(e.$t("anecdotes.remove.success")),e.closeModal(),e.anecdoteToDelete=null,e.reloadData(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.warn(t.t0),e.$toast.error(e.$t("anecdotes.remove.error"));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},saveAnecdote:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.anecdote_id){n.next=13;break}return n.prev=1,n.next=4,t.$axios.post("/api/anecdotes",e);case 4:t.$toast.success(t.$t("anecdotes.save.success")),t.reloadData(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t.$toast.error(t.$t("anecdotes.save.error"));case 11:n.next=23;break;case 13:return n.prev=13,n.next=16,t.$axios.put("/api/anecdotes/".concat(e.anecdote_id),e);case 16:t.$toast.success(t.$t("anecdotes.save.success")),t.reloadData(),n.next=23;break;case 20:n.prev=20,n.t1=n.catch(13),t.$toast.error(t.$t("anecdotes.save.error"));case 23:case"end":return n.stop()}}),n,null,[[1,8],[13,20]])})))()},openModifyModal:function(e){this.anecdoteToEdit=e||{},this.setVisible(!0),this.setModalId("edit-anecdote")}})},m=n(23),component=Object(m.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"anecdotes-page flex justify-between"},[n("div",{staticClass:"sidebar"}),e._v(" "),n("div",{staticClass:"anecdotes-page__container m-4 w-2/3"},[n("table",{staticClass:"table-fixed w-full"},[n("thead",{staticClass:"border-t-2 border-blue-500"},[n("tr",e._l(e.columns,(function(col){return n("th",{key:col,class:{"px-4 py-2":!0,"w-1/4":"desc"!==col,"w-1/2":"desc"===col}},[e._v("\n            "+e._s(e.$t("anecdotes."+col))+"\n          ")])})),0)]),e._v(" "),n("tbody",e._l(e.anecdotes,(function(t,i){return n("tr",{key:t.anecdote_id,class:{"bg-gray-200":i%2==0}},e._l(e.columns,(function(col,o){return n("td",{key:col+"-"+o,staticClass:"border-b-2 border px-4 py-2"},["actions"!==col?n("div",{domProps:{innerHTML:e._s(e.getColumnValue(col,t))}}):n("div",{staticClass:"flex justify-center"},[n("Icon",{staticClass:"mx-4",attrs:{name:"pencil"},on:{click:function(n){return e.openModifyModal(t)}}}),e._v(" "),n("Icon",{staticClass:"mx-4",attrs:{name:"bin"},on:{click:function(n){return e.openRemoveModal(t)}}})],1)])})),0)})),0)]),e._v(" "),n("div",{staticClass:"flex justify-end w-full my-4"},[n("Btn",{attrs:{"icon-btn":"",icon:"plus"},on:{click:e.openModifyModal}})],1)]),e._v(" "),"remove-anecdote"===e.modalId?n("RemoveModal",{on:{confirm:e.removeAnecdote,cancel:e.closeModal}}):e._e(),e._v(" "),"edit-anecdote"===e.modalId?n("EditAnecdoteModal",{attrs:{anecdote:e.anecdoteToEdit,assets:e.assets},on:{confirm:e.saveAnecdote,cancel:e.closeModal}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:n(287).default,Btn:n(284).default,RemoveModal:n(290).default,EditAnecdoteModal:n(354).default})}}]);