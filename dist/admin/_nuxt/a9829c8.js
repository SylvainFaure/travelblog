/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[49,3,12,32,36,59],{471:function(e,t,r){"use strict";r.r(t);r(57);var n=r(470),o={props:{type:n.a.string.def("primary"),label:n.a.string.def("Save"),iconBtn:n.a.bool.def(!1),icon:n.a.string.def("checkmark"),additionalClasses:n.a.string.def("")},computed:{classes:function(){var e=this.iconBtn?"px-4 py-2":"p-2";return"cursor-pointer bg-".concat(this.type||"primary"," ").concat("raw"===this.type?"":"border text-white"," ").concat(e)}}},l=r(36),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("button",{class:[e.classes,e.additionalClasses,"rounded text-center flex items-center"],attrs:{type:"button"},on:{click:function(t){return e.$emit("click")}}},[e.iconBtn?e._e():t("span",[e._v(e._s(e.label))]),e._v(" "),e.icon&&!e.iconBtn?t("span",{staticClass:"pl-2"},[t("Icon",{attrs:{name:e.icon}})],1):t("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.label,expression:"label"}]},[t("Icon",{attrs:{name:e.icon}})],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:r(472).default})},472:function(e,t,r){"use strict";r.r(t);r(473),r(26);var n=r(470),o={props:{name:n.a.string.def(""),small:n.a.bool.def(!1)}},l=r(36),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("svg",e._g({class:{"fill-current icon":!0,"cursor-pointer":!!e.$listeners,"w-2 h-2":e.small,"w-4 h-4":!e.small}},e.$listeners),[t("use",{attrs:{"xlink:href":"#icon-".concat(e.name)}})])}),[],!1,null,null,null);t.default=component.exports},474:function(e,t,r){"use strict";r.r(t);r(473),r(26);var n=r(470),o={props:{type:n.a.string.def("text"),name:n.a.string.def("input"),id:n.a.string.def("input"),label:n.a.string.def(""),placeholder:n.a.string.def(""),required:n.a.bool.def(!1),disabled:n.a.bool.def(!1),value:n.a.string.def(""),small:n.a.bool.def(!1)}},l=r(36),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{class:{"mt-2 mb-4":!e.small}},[e.label?t("h4",{staticClass:"label font-bold my-4"},[t("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),t("input",{class:[e.small?"text-xs":"","w-full p-2 rounded border"],attrs:{id:e.id,type:e.type,name:e.name,required:e.required,disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("enter")},input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports},477:function(e,t,r){"use strict";r.r(t);var n=r(510),o=r.n(n),l=r(470),c=(r(511),{components:{vSelect:o.a},props:{label:l.a.string.def(null),sublabel:l.a.string.def(null),placeholder:l.a.string.def(null),options:l.a.array.def([]),optionLabel:l.a.string.def("label"),multiple:l.a.bool.def(!1),taggable:l.a.bool.def(!1),pushTags:l.a.bool.def(!1),value:l.a.oneOfType([l.a.object,l.a.array]).def(null),small:l.a.bool.def(!1)}}),d=(r(485),r(36)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("h4",{staticClass:"label font-bold my-4"},[t("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),e.sublabel?t("p",[e._v(e._s(e.sublabel))]):e._e(),e._v(" "),t("v-select",{attrs:{options:e.options,label:e.optionLabel,multiple:e.multiple,taggable:e.taggable,"push-tags":e.pushTags,placeholder:e.placeholder,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1)}),[],!1,null,null,null);t.default=component.exports},478:function(e,t,r){var content=r(486);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(85).default)("afdcce92",content,!0,{sourceMap:!1})},482:function(e,t,r){"use strict";r.r(t);r(26);var n=r(470),o={props:{name:n.a.string.def("textarea"),placeholder:n.a.string.def(""),label:n.a.string.def(null),required:n.a.bool.def(!1),rows:n.a.number.def(4),value:n.a.string.def(""),classes:n.a.string.def("")}},l=r(36),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("h4",{staticClass:"label font-bold my-4"},[t("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),t("textarea",{class:[e.classes,"w-full p-2 rounded border border-grey-600"],attrs:{name:e.name,placeholder:e.placeholder,required:e.required,rows:e.rows},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Textarea:r(482).default})},484:function(e,t,r){"use strict";r.r(t);var n={},o=r(36),component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("portal",{attrs:{to:"modal"}},[t("div",{staticClass:"flex flex-col justify-center items-center m-16"},[t("h4",{staticClass:"font-bold text-lg text-center mb-4"},[e._v(e._s(e.$t("general.sure")))]),e._v(" "),t("div",{staticClass:"flex justify-center"},[t("Btn",{attrs:{label:e.$t("general.confirm"),"additional-classes":"mr-4"},on:{click:function(t){return e.$emit("confirm")}}}),e._v(" "),t("Btn",{attrs:{label:e.$t("general.cancel"),type:"secondary"},on:{click:function(t){return e.$emit("cancel")}}})],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:r(471).default})},485:function(e,t,r){"use strict";r(478)},486:function(e,t,r){var n=r(84)(!1);n.push([e.i,'.vs__dropdown-toggle{border-width:1px}.label{position:relative;overflow:hidden;display:flex;align-items:center}.label:after{content:"";position:absolute;padding-left:2px;width:100%;height:1px;background-color:#000}',""]),e.exports=n},491:function(e,t,r){var content=r(508);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(85).default)("79a66dfc",content,!0,{sourceMap:!1})},495:function(e,t,r){"use strict";r.r(t);r(44),r(58),r(25),r(39),r(40);var n=r(6),o=r(13),l=(r(52),r(30),r(11),r(51),r(27),r(70),r(505),r(499),r(138),r(20),r(18),r(46),r(586)),c=r(470),d=r(31);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={props:{assets:c.a.array.def([]),pick:c.a.string.def(null),picked:c.a.oneOfType([c.a.array,c.a.object]).def(null),data:c.a.object.def({}),pickLimit:c.a.number.def(null)},data:function(){var e=this.$i18n.locale;return{locale:e,otherLocale:"fr"===e?"it":"fr",pickedAsset:null,pickedAssetsIds:[],assetToRemove:null,assetToEdit:null,filters:{travel:null,place:null}}},computed:h(h({},Object(d.c)("modal",["modalId"])),{},{places:function(){var e=this;return this.data.articles.map((function(article){var t=article["article_place_".concat(e.locale)];if(t)return{key:t.toLowerCase().replaceAll(" ","_"),label:t}})).filter((function(e){return!!e}))},filteredAssets:function(){var e=this;return this.assets.filter((function(t){return e.filters.travel&&e.filters.place?e.filters.travel===Number(t.asset_travel_id)&&!!t["asset_place_".concat(e.locale)]&&e.filters.place===t["asset_place_".concat(e.locale)]:!e.filters.travel&&!e.filters.place||(e.filters.travel===Number(t.asset_travel_id)||e.filters.place===t["asset_place_".concat(e.locale)])}))}}),mounted:function(){var e=this;this.locale=this.$i18n.locale,this.picked&&("multiple"===this.pick?this.pickedAssetsIds=this.picked.map((function(p){return p.asset_id})):(this.pickedAsset=this.picked,this.$nextTick((function(){e.initWithPicked()}))))},methods:h(h({},Object(d.b)("modal",["setVisible","setModalId"])),{},{getUploadDate:function(e){var t=e.split("_")[0];return Object(l.a)(new Date(Number(t)),"dd/MM/yyyy")},getTravelTitle:function(e){var t=this.data.travels.find((function(t){return t.travel_id===e}));return t["travel_title_".concat(this.locale)]?t["travel_title_".concat(this.locale)]:'<span class="italic text-gray-400">'.concat(t["travel_title_".concat(this.otherLocale)],"</span>")},initWithPicked:function(){var e=this;this.$refs.asset.forEach((function(a){Number(a.getAttribute("id"))!==Number(e.pickedAsset.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")}))},handlePickOneAsset:function(e){var t=this;this.$refs.asset.forEach((function(a){t.pickedAsset&&t.pickedAsset.asset_id===e.asset_id?a.classList.remove("opacity-50"):Number(a.getAttribute("id"))!==Number(e.asset_id)?a.classList.add("opacity-50"):a.classList.remove("opacity-50")})),this.pickedAsset=e},handleAssetPick:function(e,t){var r,n=this;(t.stopPropagation(),t.preventDefault(),"one"===this.pick&&(this.handlePickOneAsset(e),this.$emit("pick",e)),"multiple"===this.pick)&&((!this.pickLimit||this.pickedAssetsIds.length<this.pickLimit||this.pickedAssetsIds.length===this.pickLimit&&!t.target.checked)&&(t.target.checked?(r="add",this.pickedAssetsIds.push(e.asset_id)):(r="remove",this.pickedAssetsIds=this.pickedAssetsIds.filter((function(a){return a!==e.asset_id}))),this.pickedAssetsIds.length===this.pickLimit?this.$refs.assetContainer.forEach((function(a){n.pickedAssetsIds.includes(Number(a.getAttribute("id").replace("container_","")))||(a.classList.add("pointer-events-none"),a.classList.add("opacity-50"))})):this.$refs.assetContainer.forEach((function(a){a.classList.remove("pointer-events-none"),a.classList.remove("opacity-50")})),this.$emit("picks",this.pickedAssetsIds,e,r)))},handleEdit:function(e){this.assetToEdit=e,this.setVisible(!0),this.setModalId("asset-edit")},handleRemove:function(e){this.assetToRemove=e,this.setVisible(!0),this.setModalId("asset-remove")},removeAsset:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/assets/delete",{ids:[e.assetToRemove.asset_id],names:[e.assetToRemove.asset_name]});case 3:e.$toast.success(e.$t("assets.removed_success")),e.$emit("change"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e.$toast.error(e.$t("assets.removed_error"));case 11:return t.prev=11,e.closeRemoveModal(),e.assetToRemove=null,t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,7,11,15]])})))()},updateAsset:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=h(h({},t),{},(l={},Object(o.a)(l,"asset_desc_".concat(r.locale),e.description),Object(o.a)(l,"asset_title_".concat(r.locale),e.title),Object(o.a)(l,"asset_article_ids",JSON.stringify(e.article_ids.map((function(e){return Number(e.article_id)})))),Object(o.a)(l,"asset_travel_id",Number(e.travel.travel_id)),l)),n.prev=1,n.next=4,r.$axios.put("/api/assets/".concat(t.asset_id),c);case 4:r.$toast.success(r.$t("assets.updated_success")),r.$emit("change"),r.assetToEdit=null,n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),r.$toast.error(r.$t("assets.updated_error"));case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},closeRemoveModal:function(){this.setVisible(!1),this.setModalId(null)},handleFilter:function(e){e.travel_id?this.filters.travel=this.filters.travel===e.travel_id?null:e.travel_id:this.filters.place=this.filters.place===e.label?null:e.label}})},m=(r(507),r(36)),component=Object(m.a)(v,(function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"m-6"},[t("div",{staticClass:"flex my-4"},[t("div",{staticClass:"w-1/2 flex flex-col items-center"},[t("h4",[e._v(e._s(e.$t("assets.filter_by_travel")))]),e._v(" "),t("div",{staticClass:"flex flex-wrap justify-center w-full"},e._l(e.data.travels,(function(r){return t("Tag",{key:r.travel_id,staticClass:"mr-2 my-2",attrs:{tag:r["travel_title_".concat(e.locale)],selectable:"",selected:e.filters.travel===r.travel_id},on:{click:function(t){return e.handleFilter(r)}}})})),1)]),e._v(" "),t("div",{staticClass:"w-1/2 flex flex-col items-center"},[t("h4",[e._v(e._s(e.$t("assets.filter_by_place")))]),e._v(" "),t("div",{staticClass:"flex flex-wrap justify-center w-full"},e._l(e.places,(function(r){return t("Tag",{key:r.key,staticClass:"mr-2 my-2",attrs:{tag:r.label,selectable:"",selected:e.filters.place===r.label},on:{click:function(t){return e.handleFilter(r)}}})})),1)])]),e._v(" "),t("div",{staticClass:"flex flex-wrap justify-center"},[e._l(e.filteredAssets,(function(r,i){return t("div",{key:i,ref:"assetContainer",refInFor:!0,class:{"w-64 mr-4 my-2 relative":!0,"h-80 border border-grey-100":!e.pick},attrs:{id:"container_".concat(r.asset_id)}},["multiple"===e.pick?t("span",{staticClass:"absolute top-0 right-0"},[t("input",{staticClass:"mr-2 mt-2 z-20",attrs:{type:"checkbox"},domProps:{checked:e.pickedAssetsIds.includes(r.asset_id)},on:{change:function(t){return e.handleAssetPick(r,t)}}})]):e._e(),e._v(" "),t("div",{class:{"backdrop-container max-h-2/3 overflow-hidden relative flex justify-center items-center":!e.pick}},[e.pick?e._e():t("div",{staticClass:"backdrop opacity-0 absolute inset-0 h-full w-full hover:opacity-100 transition-opacity duration-300 bg-blue-100 bg-opacity-50"}),e._v(" "),e.pick?e._e():t("div",{staticClass:"backdrop-content z-10 flex absolute inset-0 justify-center items-center opacity-0"},[t("Btn",{attrs:{"icon-btn":"",icon:"pencil"},on:{click:function(t){return e.handleEdit(r)}}}),e._v(" "),t("Btn",{attrs:{"icon-btn":"",type:"secondary",icon:"bin"},on:{click:function(t){return e.handleRemove(r)}}})],1),e._v(" "),t("img",{ref:"asset",refInFor:!0,class:{"max-h-2/3":!e.pick,"cursor-pointer":e.pick,"w-full overflow-hidden":!0},attrs:{id:r.asset_id,src:r.asset_src},on:{click:function(t){return e.handleAssetPick(r,t)}}})]),e._v(" "),e.pick?e._e():t("div",{staticClass:"asset__infos p-4"},[r["asset_title_".concat(e.$i18n.locale)]?t("p",{staticClass:"font-bold text-lg"},[e._v("\n            "+e._s(r["asset_title_".concat(e.$i18n.locale)])+"\n          ")]):e._e(),e._v(" "),r["asset_place_".concat(e.$i18n.locale)]?t("p",{staticClass:"font-bold text-sm"},[e._v("\n            "+e._s(r["asset_place_".concat(e.$i18n.locale)])+"\n          ")]):e._e(),e._v(" "),t("p",{staticClass:"text-sm text-gray-600"},[e._v("\n            "+e._s(e.$t("assets.uploaded"))+"\n            "+e._s(e.getUploadDate(r.asset_name))+"\n          ")]),e._v(" "),r["asset_desc_".concat(e.$i18n.locale)]?t("p",{staticClass:"text-sm text-gray-600"},[e._v("\n            "+e._s(e.$t("assets.description"))+"\n            "+e._s(r["asset_desc_".concat(e.$i18n.locale)])+"\n          ")]):e._e(),e._v(" "),r.asset_travel_id?t("p",{staticClass:"text-sm text-gray-600 font-bold",domProps:{innerHTML:e._s(e.getTravelTitle(r.asset_travel_id))}}):e._e()])])})),e._v(" "),e.filteredAssets.length?e._e():t("div",{staticClass:"flex justify-center max-w-1/4 my-16"},[e._v("\n        "+e._s(e.$t("assets.filtered_empty"))+"\n      ")])],2),e._v(" "),"asset-remove"===e.modalId?t("RemoveModal",{on:{confirm:e.removeAsset,cancel:e.closeRemoveModal}}):e._e(),e._v(" "),"asset-edit"===e.modalId?t("EditAssetModal",{attrs:{travels:e.data.travels,articles:e.data.articles,image:e.assetToEdit},on:{confirm:e.updateAsset,cancel:e.closeRemoveModal}}):e._e()],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Tag:r(496).default,Btn:r(471).default,RemoveModal:r(484).default,EditAssetModal:r(500).default})},496:function(e,t,r){"use strict";r.r(t);r(57);var n=r(470),o={props:{deletable:n.a.bool.def(!1),selectable:n.a.bool.def(!1),selected:n.a.bool.def(!1),tag:n.a.string.def("")},computed:{color:function(){var e=["gray","indigo","red","orange","yellow","green","teal","blue","purple","pink"];return"".concat(this.selectable&&!this.selected?"border-2 border-":"text-white bg-").concat(e[Math.floor(Math.random()*(e.length-1))],"-500")}}},l=r(36),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{class:[e.color,"text-xs rounded-md px-2 py-1",{"cursor-pointer":e.selectable}],on:{click:function(t){return e.$emit("click")}}},[t("span",[e._v(e._s(e.tag?"#".concat(e.tag):"# No place"))]),e._v(" "),e.deletable?t("span",{staticClass:"cursor-pointer font-bold",on:{click:function(t){return e.$emit("remove",e.tag)}}},[e._v("x")]):e._e()])}),[],!1,null,null,null);t.default=component.exports},499:function(e,t,r){"use strict";var n=r(14),o=r(7),l=r(4),c=r(108),d=r(24),f=r(15),h=r(182),v=r(62),m=r(107),_=r(267),y=r(3),k=r(86).f,x=r(59).f,O=r(19).f,w=r(502),j=r(503).trim,$="Number",A=o.Number,C=A.prototype,T=o.TypeError,E=l("".slice),I=l("".charCodeAt),S=function(e){var t=_(e,"number");return"bigint"==typeof t?t:D(t)},D=function(e){var t,r,n,o,l,c,d,code,f=_(e,"number");if(m(f))throw T("Cannot convert a Symbol value to a number");if("string"==typeof f&&f.length>2)if(f=j(f),43===(t=I(f,0))||45===t){if(88===(r=I(f,2))||120===r)return NaN}else if(48===t){switch(I(f,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+f}for(c=(l=E(f,2)).length,d=0;d<c;d++)if((code=I(l,d))<48||code>o)return NaN;return parseInt(l,n)}return+f};if(c($,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var P,R=function(e){var t=arguments.length<1?0:A(S(e)),r=this;return v(C,r)&&y((function(){w(r)}))?h(Object(t),r,R):t},N=n?k(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),F=0;N.length>F;F++)f(A,P=N[F])&&!f(R,P)&&O(R,P,x(A,P));R.prototype=C,C.constructor=R,d(o,$,R,{constructor:!0})}},500:function(e,t,r){"use strict";r.r(t);r(26),r(18),r(46);var n=r(13),o=(r(30),r(11),r(44),r(58),r(138),r(25),r(39),r(20),r(40),r(470)),l=r(31);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{image:o.a.object.def(null),articles:o.a.array.def([]),travels:o.a.array.def([])},data:function(){return{locale:"",model:{name:"",title:"",place:"",description:"",article_ids:[],travel:null}}},mounted:function(){var e=this.$i18n.locale;this.locale=e;var t=this.image,r=t.asset_name,n=t.asset_article_ids,o=t.asset_travel_id;this.model={name:r,title:this.image["asset_title_".concat(e)],place:this.image["asset_place_".concat(e)],description:this.image["asset_desc_".concat(e)],article_ids:n?this.articles.filter((function(article){return n.includes(article.article_id)})):[],travel:o?this.travels.find((function(e){return e.travel_id===o})):null}},methods:d(d({},Object(l.b)("modal",["setVisible","setModalId"])),{},{handleConfirm:function(){this.$emit("confirm",this.model,this.image),this.closeModal()},handleCancel:function(){this.closeModal()},closeModal:function(){this.setModalId(null),this.setVisible(!1)},handleReduce:function(option){return option["article_title_".concat(this.locale)]}})},h=r(36),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t("portal",{attrs:{to:"modal"}},[t("div",[t("div",{staticClass:"h-full flex"},[t("div",{staticClass:"m-8"},[t("img",{staticClass:"h-48",attrs:{src:e.image.asset_src}})]),e._v(" "),t("div",{staticClass:"mr-8 mb-8 w-full max-w-2/3"},[t("InputText",{attrs:{label:e.$t("assets.edit.name"),disabled:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),e._v(" "),t("InputText",{attrs:{label:e.$t("assets.edit.title")},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),e._v(" "),t("InputText",{attrs:{label:e.$t("assets.edit.place")},model:{value:e.model.place,callback:function(t){e.$set(e.model,"place",t)},expression:"model.place"}}),e._v(" "),t("Textarea",{attrs:{label:e.$t("assets.edit.description")},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}}),e._v(" "),t("Select",{attrs:{multiple:"",label:e.$t("assets.edit.articles"),options:e.articles,"option-label":"article_title_".concat(e.locale)},model:{value:e.model.article_ids,callback:function(t){e.$set(e.model,"article_ids",t)},expression:"model.article_ids"}}),e._v(" "),t("Select",{attrs:{label:e.$t("assets.edit.travel"),options:e.travels,"option-label":"travel_title_".concat(e.locale)},model:{value:e.model.travel,callback:function(t){e.$set(e.model,"travel",t)},expression:"model.travel"}})],1)]),e._v(" "),t("div",{staticClass:"sticky bottom-0 w-full translate-x-0 p-2 bg-white border-t-2 border-gray-500"},[t("div",{staticClass:"flex justify-end"},[t("Btn",{attrs:{label:e.$t("general.confirm")},on:{click:e.handleConfirm}}),e._v(" "),t("Btn",{attrs:{label:e.$t("general.cancel"),type:"secondary"},on:{click:e.handleCancel}})],1)])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{InputText:r(474).default,Textarea:r(482).default,Select:r(477).default,Btn:r(471).default})},502:function(e,t,r){var n=r(4);e.exports=n(1..valueOf)},503:function(e,t,r){var n=r(4),o=r(41),l=r(16),c=r(504),d=n("".replace),f="["+c+"]",h=RegExp("^"+f+f+"*"),v=RegExp(f+f+"*$"),m=function(e){return function(t){var r=l(o(t));return 1&e&&(r=d(r,h,"")),2&e&&(r=d(r,v,"")),r}};e.exports={start:m(1),end:m(2),trim:m(3)}},504:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},505:function(e,t,r){r(506)},506:function(e,t,r){"use strict";var n=r(2),o=r(8),l=r(4),c=r(41),d=r(9),f=r(47),h=r(140),v=r(16),m=r(63),_=r(183),y=r(268),k=r(10),x=r(34),O=k("replace"),w=TypeError,j=l("".indexOf),$=l("".replace),A=l("".slice),C=Math.max,T=function(e,t,r){return r>e.length?-1:""===t?r:j(e,t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,l,k,E,I,S,D,P,R=c(this),N=0,F=0,L="";if(!f(e)){if((r=h(e))&&(n=v(c(_(e))),!~j(n,"g")))throw w("`.replaceAll` does not allow non-global regexes");if(l=m(e,O))return o(l,e,R,t);if(x&&r)return $(v(R),e,t)}for(k=v(R),E=v(e),(I=d(t))||(t=v(t)),S=E.length,D=C(1,S),N=T(k,E,0);-1!==N;)P=I?v(t(E,N,k)):y(E,k,N,[],void 0,t),L+=A(k,F,N)+P,F=N+S,N=T(k,E,N+D);return F<k.length&&(L+=A(k,F)),L}})},507:function(e,t,r){"use strict";r(491)},508:function(e,t,r){var n=r(84)(!1);n.push([e.i,".backdrop,.backdrop-content{transition:opacity .3s}.backdrop-container:hover>.backdrop,.backdrop-container:hover>.backdrop-content{opacity:1}.backdrop-container:hover>.backdrop{filter:blur(5px) grayscale(.7)}",""]),e.exports=n},509:function(e,t,r){var n=r(8);e.exports=function(e){return n(Set.prototype.values,e)}},515:function(e,t,r){var content=r(522);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(85).default)("cc19d234",content,!0,{sourceMap:!1})},521:function(e,t,r){"use strict";r(515)},522:function(e,t,r){var n=r(84)(!1);n.push([e.i,".loader{border:16px solid #f3f3f3;border-top-color:#3498db;border-radius:50%;width:120px;height:120px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}",""]),e.exports=n},528:function(e,t,r){"use strict";r.r(t);var n={},o=(r(521),r(36)),component=Object(o.a)(n,(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"w-screen h-screen fixed bg-gray-200 inset-0 flex justify-center items-center z-50"},[e("div",{staticClass:"loader animation-spin"})])}],!1,null,null,null);t.default=component.exports},532:function(e,t,r){e.exports=function(){"use strict";var e=function(e){var t=new XMLHttpRequest;return t.open(e.method||"GET",e.url),t.responseType="json",e.headers&&Object.keys(e.headers).forEach((function(r){t.setRequestHeader(r,e.headers[r])})),t},t=function(e,body){return new Promise((function(t,r){e.onload=function(){if(e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.response)}catch(t){n=e.response}t(n)}else r(e.response)},e.onerror=function(){return r(e.response)},e.send(JSON.stringify(body))}))},r=function(e,data){var body=new FormData;for(var t in data)body.append(t,data[t]);return new Promise((function(t,r){e.onload=function(){if(e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.response)}catch(t){n=e.response}t(n)}else r(e.response)},e.onerror=function(){return r(e.response)},e.send(body)}))};function n(r){var n=e(r);return t(n,r.body)}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,r){l(this,t),this.file=e,this.options=r,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return o(t,[{key:"createChunks",value:function(){this.chunks=[];for(var e=0,t=this.chunkSize;e<this.fileSize;)this.chunks.push({blob:this.file.file.slice(e,t),startOffset:e,active:!1,retries:this.maxRetries}),t=(e=t)+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach((function(e){e.xhr.abort(),e.active=!1})),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var e=this;return this.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),this.start(),this.promise}},{key:"start",value:function(){var e=this;n({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then((function(t){if("success"!==t.status)return e.file.response=t,e.reject("server");e.sessionId=t.data.session_id,e.chunkSize=t.data.end_offset,e.createChunks(),e.startChunking()})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startChunking",value:function(){for(var i=0;i<this.maxActiveChunks;i++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(0===this.chunksUploading.length)return this.finish()}}},{key:"uploadChunk",value:function(t){var n=this;t.progress=0,t.active=!0,this.updateFileProgress(),t.xhr=e({method:"POST",headers:this.headers,url:this.action}),t.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(t.progress=Math.round(e.loaded/e.total*100))}),!1),r(t.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:t.startOffset,chunk:t.blob})).then((function(e){if(t.active=!1,"success"===e.status)t.uploaded=!0;else if(t.retries--<=0)return n.stopChunks(),n.reject("upload");n.uploadNextChunk()})).catch((function(){if(t.active=!1,t.retries--<=0)return n.stopChunks(),n.reject("upload");n.uploadNextChunk()}))}},{key:"finish",value:function(){var e=this;this.updateFileProgress(),this.stopSpeedCalc(),n({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then((function(t){if(e.file.response=t,"success"!==t.status)return e.reject("server");e.resolve(t)})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startSpeedCalc",value:function(){var e=this;this.file.speed=0;var t=0;this.speedInterval||(this.speedInterval=window.setInterval((function(){var r=e.progress/100*e.fileSize;e.file.speed=r-t,t=r}),1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}},{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var e=this,t=this.chunksUploaded.length/this.chunks.length*100,r=this.chunksUploading.reduce((function(progress,t){return progress+(0|t.progress)/e.chunks.length}),0);return Math.min(t+r,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter((function(e){return!e.active&&!e.uploaded}))}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter((function(e){return!!e.xhr&&!!e.active}))}},{key:"chunksUploaded",get:function(){return this.chunks.filter((function(e){return!!e.uploaded}))}}]),t}();function d(template,style,script,e,t,r,n,o,l,c){"boolean"!=typeof n&&(l=o,o=n,n=!1);var d,f="function"==typeof script?script.options:script;if(template&&template.render&&(f.render=template.render,f.staticRenderFns=template.staticRenderFns,f._compiled=!0,t&&(f.functional=!0)),e&&(f._scopeId=e),r?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),style&&style.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},f._ssrRegister=d):style&&(d=n?function(){style.call(this,c(this.$root.$options.shadowRoot))}:function(e){style.call(this,o(e))}),d)if(f.functional){var h=f.render;f.render=function(e,t){return d.call(t),h(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,d):[d]}return script}var f=d,h=void 0,v=void 0,m=void 0,_=f({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{attrs:{type:"file",name:e.$parent.name,id:e.$parent.inputId||e.$parent.name,accept:e.$parent.accept,capture:e.$parent.capture,disabled:e.$parent.disabled,webkitdirectory:e.$parent.directory&&e.$parent.features.directory,directory:e.$parent.directory&&e.$parent.features.directory,multiple:e.$parent.multiple&&e.$parent.features.html5},on:{change:e.change}})},staticRenderFns:[]},h,{methods:{change:function(e){this.$parent.addInputFile(e.target),e.target.files?(e.target.value="",e.target.files.length&&!/safari/i.test(navigator.userAgent)&&(e.target.type="",e.target.type="file")):(this.$destroy(),new this.constructor({parent:this.$parent,el:this.$el}))}}},v,!1,m,void 0,void 0),y=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function x(e){if(Array.isArray(e)){for(var i=0,t=Array(e.length);i<e.length;i++)t[i]=e[i];return t}return Array.from(e)}var O={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:c},w={components:{InputFile:_},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{},multiple:{type:Boolean},maximum:{type:Number,default:function(){return this.multiple?0:1}},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:Object},data:{type:Object,default:Object},timeout:{type:Number,default:0},drop:{default:!1},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{default:Array},value:{type:Array,default:Array},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return O}}},data:function(){return{files:this.value,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,uploading:0,destroy:!1}},mounted:function(){var input=document.createElement("input");if(input.type="file",input.multiple=!0,window.FormData&&input.files?("boolean"!=typeof input.webkitdirectory&&"boolean"!=typeof input.directory||(this.features.directory=!0),this.features.html5&&void 0!==input.ondrop&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var i=0;i<this.files.length;i++){var e=this.files[i];this.maps[e.id]=e}this.$nextTick((function(){var e=this;this.$parent?(this.$parent.$forceUpdate(),this.$parent.$nextTick((function(){e.watchDrop(e.drop)}))):this.watchDrop(this.drop)}))},beforeDestroy:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1)},computed:{uploaded:function(){for(var e=void 0,i=0;i<this.files.length;i++)if((e=this.files[i]).fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(O,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]}},watch:{active:function(e){this.watchActive(e)},dropActive:function(){this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},value:function(e){if(this.files!==e){this.files=e;var t=this.maps;this.maps={};for(var i=0;i<this.files.length;i++){var r=this.files[i];this.maps[r.id]=r}for(var n in this.maps){var o=this.maps[n],l=t[n];o!==l&&this.emitFile(o,l)}for(var c in t)this.maps[c]||this.emitFile(void 0,t[c])}}},methods:{clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var i=0;i<e.length;i++)this.emitFile(void 0,e[i])}return!0},get:function(e){return!!e&&("object"===(void 0===e?"undefined":k(e))?this.maps[e.id]||!1:this.maps[e]||!1)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addIndex,r=e,n=r instanceof Array;n||(r=[r]);for(var o=[],i=0;i<r.length;i++){var l=r[i];this.features.html5&&l instanceof Blob&&(l={file:l,size:l.size,name:l.webkitRelativePath||l.relativePath||l.name||"unknown",type:l.type});var c=!1;if(!1===l.fileObject||(l.fileObject||"undefined"!=typeof Element&&l.el instanceof Element||"undefined"!=typeof Blob&&l.file instanceof Blob)&&(c=!0),c&&((l=y({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},l,{response:{},progress:"0.00",speed:0})).data=y({},this.data,l.data?l.data:{}),l.headers=y({},this.headers,l.headers?l.headers:{})),l.id||(l.id=Math.random().toString(36).substr(2)),!this.emitFilter(l,void 0)){if(this.maximum>1&&o.length+this.files.length>=this.maximum)break;if(o.push(l),1===this.maximum)break}}if(!o.length)return!1;1===this.maximum&&this.clear();var d=void 0;if(!0===t||0===t)d=o.concat(this.files);else if(t){var f;(f=d=this.files.concat([])).splice.apply(f,[t,0].concat(o))}else d=this.files.concat(o);this.files=d;for(var h=0;h<o.length;h++){var v=o[h];this.maps[v.id]=v}this.emitInput();for(var m=0;m<o.length;m++)this.emitFile(o[m],void 0);return n?o:o[0]},addInputFile:function(e){var t=[];if(e.files)for(var i=0;i<e.files.length;i++){var r=e.files[i];t.push({size:r.size,name:r.webkitRelativePath||r.relativePath||r.name,type:r.type,file:r})}else{var n=e.value.replace(/\\/g,"/").split("/");delete e.__vuex__,t.push({name:n[n.length-1],el:e})}return this.add(t)},addDataTransfer:function(e){var t=this,r=[];if(e.items&&e.items.length){for(var n=[],i=0;i<e.items.length;i++){var o=e.items[i];(o=o.getAsEntry?o.getAsEntry()||o.getAsFile():o.webkitGetAsEntry&&o.webkitGetAsEntry()||o.getAsFile())&&n.push(o)}return new Promise((function(e,o){var l=function o(i){var l=n[i];if(!l||t.maximum>0&&r.length>=t.maximum)return e(t.add(r));t.getEntry(l).then((function(e){r.push.apply(r,x(e)),o(i+1)}))};l(0)}))}if(e.files.length){for(var l=0;l<e.files.length&&(r.push(e.files[l]),!(this.maximum>0&&r.length>=this.maximum));l++);return Promise.resolve(this.add(r))}return Promise.resolve([])},getEntry:function(e){var t=this,path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(r,n){if(e.isFile)e.file((function(e){r([{size:e.size,name:path+e.name,type:e.type,file:e}])}));else if(e.isDirectory&&t.dropDirectory){var o=[],l=e.createReader();!function n(){l.readEntries((function(l){!function c(i){return!l[i]&&0===i||t.maximum>0&&o.length>=t.maximum?r(o):l[i]?void t.getEntry(l[i],path+e.name+"/").then((function(e){o.push.apply(o,x(e)),c(i+1)})):n()}(0)}))}()}else r([])}))},replace:function(e,t){var r=this.get(e),n=this.get(t);if(!r||!n||r===n)return!1;var o=this.files.concat([]),l=o.indexOf(r),c=o.indexOf(n);return-1!==l&&-1!==c&&(o[l]=n,o[c]=r,this.files=o,this.emitInput(),!0)},remove:function(e){var t=this.get(e);if(t){if(this.emitFilter(void 0,t))return!1;var r=this.files.concat([]),n=r.indexOf(t);if(-1===n)return console.error("remove",t),!1;r.splice(n,1),this.files=r,delete this.maps[t.id],this.emitInput(),this.emitFile(void 0,t)}return t},update:function(e,data){var t=this.get(e);if(t){var r=y({},t,data);if(!t.fileObject||!t.active||r.active||r.error||r.success||(r.error="abort"),this.emitFilter(r,t))return!1;var n=this.files.concat([]),o=n.indexOf(t);return-1===o?(console.error("update",t),!1):(n.splice(o,1,r),this.files=n,delete this.maps[t.id],this.maps[r.id]=r,this.emitInput(),this.emitFile(r,t),r)}return!1},emitFilter:function(e,t){var r=!1;return this.$emit("input-filter",e,t,(function(){return r=!0})),r},emitFile:function(e,t){this.$emit("input-file",e,t),!(e&&e.fileObject&&e.active)||t&&t.active?e&&e.fileObject&&e.active||!t||!t.fileObject||!t.active||this.uploading--:(this.uploading++,this.$nextTick((function(){var t=this;setTimeout((function(){t.upload(e).then((function(){(e=t.get(e))&&e.fileObject&&t.update(e,{active:!1,success:!e.error})})).catch((function(r){t.update(e,{active:!1,success:!1,error:r.code||r.error||r.message||r})}))}),parseInt(50*Math.random()+50,10))}))),!this.active||Boolean(e)===Boolean(t)&&e.active===t.active||this.watchActive(!0)},emitInput:function(){this.$emit("input",this.files)},upload:function(e){var t=this.get(e);if(!t)return Promise.reject("not_exists");if(!t.fileObject)return Promise.reject("file_object");if(t.error)return Promise.reject(t.error);if(t.success)return Promise.resolve(t);var r=this.extensions;if(r&&(r.length||void 0===r.length)&&("object"===(void 0===r?"undefined":k(r))&&r instanceof RegExp||("string"==typeof r&&(r=r.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),r=new RegExp("\\.("+r.join("|").replace(/\./g,"\\.")+")$","i")),-1===t.name.search(r)))return Promise.reject("extension");if(this.size>0&&t.size>=0&&t.size>this.size)return Promise.reject("size");if(this.customAction)return this.customAction(t,this);if(this.features.html5){if(this.shouldUseChunkUpload(t))return this.uploadChunk(t);if(t.putAction)return this.uploadPut(t);if(t.postAction)return this.uploadHtml5(t)}return t.postAction?this.uploadHtml4(t):Promise.reject("No action configured")},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var t=this.chunkOptions.handler;return e.chunk=new t(e,this.chunkOptions),e.chunk.upload()},uploadPut:function(e){var t=[],r=void 0;for(var n in e.data)null!=(r=e.data[n])&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));var o=t.length?(-1===e.putAction.indexOf("?")?"?":"&")+t.join("&"):"",l=new XMLHttpRequest;return l.open("PUT",e.putAction+o),this.uploadXhr(l,e,e.file)},uploadHtml5:function(e){var form=new window.FormData,t=void 0;for(var r in e.data)(t=e.data[r])&&"object"===(void 0===t?"undefined":k(t))&&"function"!=typeof t.toString?t instanceof File?form.append(r,t,t.name):form.append(r,JSON.stringify(t)):null!=t&&form.append(r,t);form.append(this.name,e.file,e.file.filename||e.name);var n=new XMLHttpRequest;return n.open("POST",e.postAction),this.uploadXhr(n,e,form)},uploadXhr:function(e,t,body){var r=this,n=t,o=0,l=0;e.upload.onprogress=function(e){if(n=r.get(n),e.lengthComputable&&n&&n.fileObject&&n.active){var t=Math.round(Date.now()/1e3);t!==o&&(o=t,n=r.update(n,{progress:(e.loaded/e.total*100).toFixed(2),speed:e.loaded-l}),l=e.loaded)}};var c=setInterval((function(){if(!(n=r.get(n))||!n.fileObject||n.success||n.error||!n.active){c&&(clearInterval(c),c=!1);try{e.abort(),e.timeout=1}catch(e){}}}),100);return new Promise((function(t,o){var l=void 0,d=function(d){if(!l){if(l=!0,c&&(clearInterval(c),c=!1),!(n=r.get(n)))return o("not_exists");if(!n.fileObject)return o("file_object");if(n.error)return o(n.error);if(!n.active)return o("abort");if(n.success)return t(n);var data={};switch(d.type){case"timeout":case"abort":data.error=d.type;break;case"error":e.status?e.status>=500?data.error="server":e.status>=400&&(data.error="denied"):data.error="network";break;default:e.status>=500?data.error="server":e.status>=400?data.error="denied":data.progress="100.00"}if(e.responseText){var f=e.getResponseHeader("Content-Type");f&&-1!==f.indexOf("/json")?data.response=JSON.parse(e.responseText):data.response=e.responseText}return(n=r.update(n,data)).error?o(n.error):t(n)}};for(var f in e.onload=d,e.onerror=d,e.onabort=d,e.ontimeout=d,n.timeout&&(e.timeout=n.timeout),n.headers)e.setRequestHeader(f,n.headers[f]);n=r.update(n,{xhr:e}),e.send(body)}))},uploadHtml4:function(e){var t=this,r=e,n=function(e){27===e.keyCode&&e.preventDefault()},iframe=document.createElement("iframe");iframe.id="upload-iframe-"+r.id,iframe.name="upload-iframe-"+r.id,iframe.src="about:blank",iframe.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var form=document.createElement("form");form.action=r.postAction,form.name="upload-form-"+r.id,form.setAttribute("method","POST"),form.setAttribute("target","upload-iframe-"+r.id),form.setAttribute("enctype","multipart/form-data");var o=void 0,input=void 0;for(var l in r.data)(o=r.data[l])&&"object"===(void 0===o?"undefined":k(o))&&"function"!=typeof o.toString&&(o=JSON.stringify(o)),null!=o&&((input=document.createElement("input")).type="hidden",input.name=l,input.value=o,form.appendChild(input));form.appendChild(r.el),document.body.appendChild(iframe).appendChild(form);var c=function(){var e=void 0;try{iframe.contentWindow&&(e=iframe.contentWindow.document)}catch(e){}if(!e)try{e=iframe.contentDocument?iframe.contentDocument:iframe.document}catch(t){e=iframe.document}return e&&e.body?e.body.innerHTML:null};return new Promise((function(e,o){setTimeout((function(){if(!(r=t.update(r,{iframe:iframe})))return o("not_exists");var l=setInterval((function(){(r=t.get(r))&&r.fileObject&&!r.success&&!r.error&&r.active||(l&&(clearInterval(l),l=!1),iframe.onabort({type:r?"abort":"not_exists"}))}),100),d=void 0,f=function(f){if(!d){if(d=!0,l&&(clearInterval(l),l=!1),document.body.removeEventListener("keydown",n),!(r=t.get(r)))return o("not_exists");if(!r.fileObject)return o("file_object");if(r.error)return o(r.error);if(!r.active)return o("abort");if(r.success)return e(r);var h=c(),data={};switch(f.type){case"abort":data.error="abort";break;case"error":r.error?data.error=r.error:data.error=null===h?"network":"denied";break;default:r.error?data.error=r.error:null===data?data.error="network":data.progress="100.00"}if(null!==h){if(h&&"{"===h.substr(0,1)&&"}"===h.substr(h.length-1,1))try{h=JSON.parse(h)}catch(e){}data.response=h}return(r=t.update(r,data)).error?o(r.error):e(r)}};iframe.onload=f,iframe.onerror=f,iframe.onabort=f,document.body.addEventListener("keydown",n),form.submit()}),50)})).then((function(e){return iframe.parentNode&&iframe.parentNode.removeChild(iframe),e})).catch((function(e){return iframe.parentNode&&iframe.parentNode.removeChild(iframe),e}))},watchActive:function(e){for(var t=void 0,r=0;t=this.files[r];)if(r++,t.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;t.active||t.error||t.success||this.update(t,{active:!0})}else t.active&&this.update(t,{active:!1});0===this.uploading&&(this.active=!1)},watchDrop:function(e){var t=e;if(this.features.drop){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDragenter,!1),document.removeEventListener("dragleave",this.onDragleave,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch(e){}t?"string"==typeof t?t=document.querySelector(t)||this.$root.$el.querySelector(t):!0===t&&(t=this.$parent.$el):t=!1,this.dropElement=t,this.dropElement&&(document.addEventListener("dragenter",this.onDragenter,!1),document.addEventListener("dragleave",this.onDragleave,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},onDragenter:function(e){if(e.preventDefault(),!this.dropActive&&e.dataTransfer){var dt=e.dataTransfer;dt.files&&dt.files.length?this.dropActive=!0:dt.types?(dt.types.indexOf&&-1!==dt.types.indexOf("Files")||dt.types.contains&&dt.types.contains("Files"))&&(this.dropActive=!0):this.dropActive=!0}},onDragleave:function(e){e.preventDefault(),this.dropActive&&("HTML"===e.target.nodeName||e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1)},onDragover:function(e){e.preventDefault()},onDocumentDrop:function(){this.dropActive=!1},onDrop:function(e){e.preventDefault(),this.addDataTransfer(e.dataTransfer)}}},j="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function $(e){return function(e,style){return T(e,style)}}var A=document.head||document.getElementsByTagName("head")[0],C={};function T(e,t){var r=j?t.media||"default":e,style=C[r]||(C[r]={ids:new Set,styles:[]});if(!style.ids.has(e)){style.ids.add(e);var code=t.source;if(t.map&&(code+="\n/*# sourceURL="+t.map.sources[0]+" */",code+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),style.element||(style.element=document.createElement("style"),style.element.type="text/css",t.media&&style.element.setAttribute("media",t.media),A.appendChild(style.element)),"styleSheet"in style.element)style.styles.push(code),style.element.styleSheet.cssText=style.styles.filter(Boolean).join("\n");else{var n=style.ids.size-1,o=document.createTextNode(code),l=style.element.childNodes;l[n]&&style.element.removeChild(l[n]),l.length?style.element.insertBefore(o,l[n]):style.element.appendChild(o)}}}var E=void 0,I=void 0,S=f({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{class:e.className},[e._t("default"),e._v(" "),r("label",{attrs:{for:e.inputId||e.name}}),e._v(" "),r("input-file")],2)},staticRenderFns:[]},(function(e){e&&e("data-v-76d380b6_0",{source:".file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block}.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0}",map:void 0,media:void 0})}),w,E,!1,I,$,void 0);function D(e){return e&&e.default||e}return D(Object.freeze({default:S}))}()},533:function(e,t,r){r(534)},534:function(e,t,r){"use strict";r(270)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(271))},535:function(e,t,r){"use strict";r(2)({target:"Set",proto:!0,real:!0,forced:!0},{addAll:r(536)})},536:function(e,t,r){"use strict";var n=r(8),o=r(22),l=r(5);e.exports=function(){for(var e=l(this),t=o(e.add),r=0,c=arguments.length;r<c;r++)n(t,e,arguments[r]);return e}},537:function(e,t,r){"use strict";r(2)({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:r(272)})},538:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(8),c=r(22),d=r(5),f=r(71),h=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){var t=d(this),r=new(f(t,o("Set")))(t),n=c(r.delete);return h(e,(function(e){l(n,r,e)})),r}})},539:function(e,t,r){"use strict";var n=r(2),o=r(5),l=r(28),c=r(509),d=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=o(this),r=c(t),n=l(e,arguments.length>1?arguments[1]:void 0);return!d(r,(function(e,r){if(!n(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},540:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(8),c=r(22),d=r(5),f=r(28),h=r(71),v=r(509),m=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=d(this),r=v(t),n=f(e,arguments.length>1?arguments[1]:void 0),_=new(h(t,o("Set"))),y=c(_.add);return m(r,(function(e){n(e,e,t)&&l(y,_,e)}),{IS_ITERATOR:!0}),_}})},541:function(e,t,r){"use strict";var n=r(2),o=r(5),l=r(28),c=r(509),d=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=o(this),r=c(t),n=l(e,arguments.length>1?arguments[1]:void 0);return d(r,(function(e,r){if(n(e,e,t))return r(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},542:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(8),c=r(22),d=r(5),f=r(71),h=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){var t=d(this),r=new(f(t,o("Set"))),n=c(t.has),v=c(r.add);return h(e,(function(e){l(n,t,e)&&l(v,r,e)})),r}})},543:function(e,t,r){"use strict";var n=r(2),o=r(8),l=r(22),c=r(5),d=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){var t=c(this),r=l(t.has);return!d(e,(function(e,n){if(!0===o(r,t,e))return n()}),{INTERRUPTED:!0}).stopped}})},544:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(8),c=r(22),d=r(9),f=r(5),h=r(141),v=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){var t=h(this),r=f(e),n=r.has;return d(n)||(r=new(o("Set"))(e),n=c(r.has)),!v(t,(function(e,t){if(!1===l(n,r,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},545:function(e,t,r){"use strict";var n=r(2),o=r(8),l=r(22),c=r(5),d=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){var t=c(this),r=l(t.has);return!d(e,(function(e,n){if(!1===o(r,t,e))return n()}),{INTERRUPTED:!0}).stopped}})},546:function(e,t,r){"use strict";var n=r(2),o=r(4),l=r(5),c=r(16),d=r(509),f=r(21),h=o([].join),v=[].push;n({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=l(this),r=d(t),n=void 0===e?",":c(e),o=[];return f(r,v,{that:o,IS_ITERATOR:!0}),h(o,n)}})},547:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(28),c=r(8),d=r(22),f=r(5),h=r(71),v=r(509),m=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=f(this),r=v(t),n=l(e,arguments.length>1?arguments[1]:void 0),_=new(h(t,o("Set"))),y=d(_.add);return m(r,(function(e){c(y,_,n(e,e,t))}),{IS_ITERATOR:!0}),_}})},548:function(e,t,r){"use strict";var n=r(2),o=r(22),l=r(5),c=r(509),d=r(21),f=TypeError;n({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=l(this),r=c(t),n=arguments.length<2,h=n?void 0:arguments[1];if(o(e),d(r,(function(r){n?(n=!1,h=r):h=e(h,r,r,t)}),{IS_ITERATOR:!0}),n)throw f("Reduce of empty set with no initial value");return h}})},549:function(e,t,r){"use strict";var n=r(2),o=r(5),l=r(28),c=r(509),d=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=o(this),r=c(t),n=l(e,arguments.length>1?arguments[1]:void 0);return d(r,(function(e,r){if(n(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},550:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(8),c=r(22),d=r(5),f=r(71),h=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){var t=d(this),r=new(f(t,o("Set")))(t),n=c(r.delete),v=c(r.add);return h(e,(function(e){l(n,r,e)||l(v,r,e)})),r}})},551:function(e,t,r){"use strict";var n=r(2),o=r(23),l=r(22),c=r(5),d=r(71),f=r(21);n({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){var t=c(this),r=new(d(t,o("Set")))(t);return f(e,l(r.add),{that:r}),r}})},559:function(e,t,r){"use strict";r.r(t);r(26),r(25),r(18),r(30),r(11),r(39),r(20),r(40);var n=r(13);r(51);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={props:{tabs:r(470).a.array.def([])},data:function(){return{mappedTabs:[]}},mounted:function(){this.mappedTabs=this.tabs.map((function(e,i){return l(l({},e),{},{active:0===i})}))},methods:{handleTabClick:function(e){this.$emit("tab",e),this.mappedTabs=this.mappedTabs.map((function(t){return l(l({},t),{},{active:t.key===e.key})}))}}},d=r(36),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex m-6"},e._l(e.mappedTabs,(function(r){return t("div",{key:r.key,class:{"font-bold border-b-2 border-gray-400":r.active,"cursor-pointer mr-8 py-2":!0},on:{click:function(t){return e.handleTabClick(r)}}},[e._v("\n    "+e._s(r.name)+"\n  ")])})),0)}),[],!1,null,null,null);t.default=component.exports},560:function(e,t,r){"use strict";r.r(t);r(26),r(18),r(30),r(39),r(40);var n=r(6),o=r(13),l=(r(52),r(11),r(20),r(27),r(32),r(33),r(553),r(269),r(25),r(57),r(470)),c=r(532);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var f={components:{FileUpload:r.n(c).a},props:{travels:l.a.array.def([])},data:function(){return{loading:!1,files:[],filesData:[]}},methods:{handleUpload:function(){this.$refs.upload.active=!0,this.loading=!0},handleFillEverything:function(e,t){this.filesData.forEach((function(r){r[t]=e}))},inputFile:function(e,t){(!t||e&&t.name!==e.name)&&(console.log("PUSH NEW FILE DATA"),this.filesData.push(function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({id:e.id,name:e.name},{title_fr:"",title_it:"",place_fr:"",place_it:"",country_fr:"",country_it:"",desc_fr:"",desc_it:"",travel_id:""}))),e&&t&&!e.active&&t.active&&e.xhr},inputFilter:function(e,t,r){if(e&&!t&&!/\.(jpeg|jpe|jpg|gif|png|webp)$/i.test(e.name))return r();e.blob="";var n=window.URL||window.webkitURL;n&&n.createObjectURL&&(e.blob=n.createObjectURL(e.file))},uploadFiles:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,e.files.forEach((function(t,n){r.append("file[".concat(n,"]"),t.file),Object.keys(e.filesData[n]).forEach((function(t,i){var o="travel_id"===t?e.filesData[n][t].travel_id:e.filesData[n][t];r.append("infos[".concat(n,"][").concat(t,"]"),o)}))})),t.prev=2,t.next=5,e.$axios.post("/api/assets",r,{headers:{"Content-Type":"multipart/form-data"}});case 5:e.files=[],e.filesData=[],e.$toast.success(e.$t("assets.upload_success")),e.$emit("uploaded"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("ERROR",t.t0),e.$toast.error(e.$t("assets.upload_error"));case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,11,15,18]])})))()}}},h=f,v=r(36),component=Object(v.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-6"},[t("file-upload",{ref:"upload",attrs:{multiple:!0,"custom-action":e.uploadFiles},on:{"input-file":e.inputFile,"input-filter":e.inputFilter},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[e.files.length?e._e():t("btn",{attrs:{type:"primary",label:e.$t("assets.upload")}})],1),e._v(" "),t("div",{staticClass:"flex flex-wrap"},[e.files.length>=2?t("div",{staticClass:"mr-4 my-4 w-56"},[t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.title")},on:{input:function(t){return e.handleFillEverything(t,"title_".concat(e.$i18n.locale))}}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.place")},on:{input:function(t){return e.handleFillEverything(t,"place_".concat(e.$i18n.locale))}}}),e._v(" "),t("Select",{attrs:{placeholder:e.$t("assets.form.travel"),options:e.travels,"option-label":"travel_title_".concat(e.$i18n.locale)},on:{input:function(t){return e.handleFillEverything(t,"travel_id")}}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.country")},on:{input:function(t){return e.handleFillEverything(t,"country_".concat(e.$i18n.locale))}}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.description")},on:{input:function(t){return e.handleFillEverything(t,"desc_".concat(e.$i18n.locale))}}})],1):e._e(),e._v(" "),e._l(e.files,(function(r,i){return t("div",{key:i,staticClass:"mr-4 my-4 w-56"},[t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.title")},model:{value:e.filesData[i]["title_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"title_".concat(e.$i18n.locale),t)},expression:"filesData[i][`title_${$i18n.locale}`]"}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.place")},model:{value:e.filesData[i]["place_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"place_".concat(e.$i18n.locale),t)},expression:"filesData[i][`place_${$i18n.locale}`]"}}),e._v(" "),t("Select",{attrs:{placeholder:e.$t("assets.form.travel"),options:e.travels,"option-label":"travel_title_".concat(e.$i18n.locale)},model:{value:e.filesData[i].travel_id,callback:function(t){e.$set(e.filesData[i],"travel_id",t)},expression:"filesData[i].travel_id"}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.country")},model:{value:e.filesData[i]["country_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"country_".concat(e.$i18n.locale),t)},expression:"filesData[i][`country_${$i18n.locale}`]"}}),e._v(" "),t("input-text",{attrs:{small:"",placeholder:e.$t("assets.form.description")},model:{value:e.filesData[i]["desc_".concat(e.$i18n.locale)],callback:function(t){e.$set(e.filesData[i],"desc_".concat(e.$i18n.locale),t)},expression:"filesData[i][`desc_${$i18n.locale}`]"}}),e._v(" "),t("img",{staticClass:"w-56",attrs:{src:r.blob}}),e._v(" "),t("p",{staticClass:"text-sm"},[e._v("\n        "+e._s(r.name)+"\n      ")])],1)}))],2),e._v(" "),t("btn",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&(!e.$refs.upload||!e.$refs.upload.active),expression:"files.length && (!$refs.upload || !$refs.upload.active)"}],attrs:{type:"primary",label:e.$t("assets.do_upload")},on:{click:e.handleUpload}}),e._v(" "),e.loading?t("Loader"):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Btn:r(471).default,InputText:r(474).default,Select:r(477).default,Loader:r(528).default})},561:function(e,t,r){"use strict";r.r(t);r(11),r(20),r(30);var n=r(470),o=r(525),l={components:{draggable:r.n(o).a},props:{assets:n.a.array.def([]),travels:n.a.array.def([]),articles:n.a.array.def([])},data:function(){var e=this.$i18n.locale;return{locale:e,otherLocale:"fr"===e?"it":"fr",mounted:!1,assetsByTravel:{},filteredAssets:[],modifiedAssetsIds:{}}},mounted:function(){var e=this;this.locale=this.$i18n.locale,this.travels.forEach((function(t){e.$set(e.assetsByTravel,t.travel_id,e.assets.filter((function(e){return e.asset_travel_id===t.travel_id})))})),this.filteredAssets=this.assets.filter((function(e){return!e.asset_travel_id})),this.mounted=!0},methods:{handleAssetChange:function(e,t){if(e.added){var r=e.added.element;this.modifiedAssetsIds[r.asset_id]={past:r.asset_travel_id,present:t}}},getModifiedAssets:function(){return this.modifiedAssetsIds}}},c=r(36),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return e.mounted?t("div",{staticClass:"flex"},[t("div",{staticClass:"assets-list w-1/3 p-4"},[t("h3",[e._v(e._s(e.$t("assets.non_associated")))]),e._v(" "),t("draggable",{class:{"flex flex-wrap py-8":!!e.filteredAssets.length},attrs:{list:e.filteredAssets,group:{name:"assets",pull:!0,put:!0}},on:{change:e.handleAssetChange}},e._l(e.filteredAssets,(function(e){return t("div",{key:"asset-".concat(e.asset_id),staticClass:"draggable-asset__container mr-2 mb-2"},[t("img",{staticClass:"w-24",attrs:{src:e.asset_src}})])})),0),e._v(" "),e.filteredAssets.length?e._e():t("div",{staticClass:"my-4 text-xs"},[e._v(e._s(e.$t("assets.non_associated_empty")))])],1),e._v(" "),t("div",{staticClass:"travels-list w-2/3 bg-gray-200 p-4 h-3/4 overflow-y-scroll"},e._l(e.travels,(function(r){return t("div",{key:"travel-".concat(r.travel_id)},[t("h3",{class:r["travel_title_".concat(e.locale)]?"":"italic text-gray-500"},[e._v("\n        "+e._s(r["travel_title_".concat(e.locale)]?r["travel_title_".concat(e.locale)]:r["travel_title_".concat(e.otherLocale)])+"\n      ")]),e._v(" "),t("draggable",{class:{"flex flex-wrap py-4":!!e.assetsByTravel[r.travel_id].length},attrs:{list:e.assetsByTravel[r.travel_id],group:{name:"assets",pull:!0,put:!0}},on:{change:function(t){return e.handleAssetChange(t,r.travel_id)}}},e._l(e.assetsByTravel[r.travel_id],(function(e){return t("div",{key:"asset-travel-".concat(e.asset_id)},[t("img",{staticClass:"w-24 mr-2 mb-2",attrs:{src:e.asset_src}})])})),0),e._v(" "),e.assetsByTravel[r.travel_id].length?e._e():t("div",{staticClass:"my-4 text-xs"},[e._v(e._s(e.$t("assets.travel_empty")))])],1)})),0)]):e._e()}),[],!1,null,null,null);t.default=component.exports},562:function(e,t,r){"use strict";r.r(t);var n=r(179),o=(r(11),r(20),r(30),r(44),r(58),r(57),r(45),r(32),r(533),r(535),r(537),r(538),r(539),r(540),r(541),r(542),r(543),r(544),r(545),r(546),r(547),r(548),r(549),r(550),r(551),r(33),r(470)),l=r(525),c={components:{draggable:r.n(l).a},props:{assets:o.a.array.def([]),travels:o.a.array.def([]),articles:o.a.array.def([])},data:function(){var e=this.$i18n.locale;return{locale:e,otherLocale:"fr"===e?"it":"fr",mounted:!1,assetsByArticle:{},modifiedAssetsIds:{}}},mounted:function(){var e=this;this.locale=this.$i18n.locale,this.articles.forEach((function(article){e.$set(e.assetsByArticle,article.article_id,e.assets.filter((function(e){return e.asset_article_ids.includes(article.article_id)})))})),this.mounted=!0},methods:{handleAssetChange:function(e,t){if(e.added){var r=e.added.element,o=!!this.modifiedAssetsIds[r.asset_id]?[].concat(Object(n.a)(r.asset_article_ids),Object(n.a)(this.modifiedAssetsIds[r.asset_id].present)):Object(n.a)(r.asset_article_ids);this.modifiedAssetsIds[r.asset_id]={past:r.asset_article_ids,present:Array.from(new Set([].concat(Object(n.a)(o),[t])))}}},removeAssetFromArticle:function(e,t){var r=!!this.modifiedAssetsIds[e.asset_id];this.modifiedAssetsIds[e.asset_id]={past:e.asset_article_ids,present:r?this.modifiedAssetsIds[e.asset_id].present.filter((function(a){return a!==e.asset_id})):e.asset_article_ids.filter((function(a){return a!==t}))},this.assetsByArticle[t]=this.assetsByArticle[t].filter((function(a){return a.asset_id!==e.asset_id}))},getModifiedAssets:function(){return this.modifiedAssetsIds}}},d=r(36),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return e.mounted?t("div",{staticClass:"flex"},[t("div",{staticClass:"assets-list w-1/3 p-4 h-3/4 overflow-y-scroll"},[t("h3",[e._v(e._s(e.$t("assets.non_associated")))]),e._v(" "),t("draggable",{class:{"flex flex-wrap py-8":!!e.assets.length},attrs:{list:e.assets,group:{name:"assets",pull:"clone",put:!1}},on:{change:e.handleAssetChange}},e._l(e.assets,(function(e){return t("div",{key:"asset-".concat(e.asset_id),staticClass:"draggable-asset__container mr-2 mb-2"},[t("img",{staticClass:"w-24",attrs:{src:e.asset_src}})])})),0)],1),e._v(" "),t("div",{staticClass:"articles-list w-2/3 bg-gray-200 p-4 h-3/4 overflow-y-scroll"},e._l(e.articles,(function(article){return t("div",{key:"article-".concat(article.article_id)},[t("h3",{class:article["article_title_".concat(e.locale)]?"":"italic text-gray-500"},[e._v("\n        "+e._s(article["article_title_".concat(e.locale)]?article["article_title_".concat(e.locale)]:article["article_title_".concat(e.otherLocale)])+"\n      ")]),e._v(" "),t("draggable",{class:{"flex flex-wrap py-4":!!e.assetsByArticle[article.article_id].length},attrs:{list:e.assetsByArticle[article.article_id],group:{name:"assets",pull:!1,put:!0}},on:{change:function(t){return e.handleAssetChange(t,article.article_id)}}},e._l(e.assetsByArticle[article.article_id],(function(r){return t("div",{key:"asset-article-".concat(r.asset_id),staticClass:"relative"},[t("span",{staticClass:"absolute top-0 right-0 my-2 mr-4 text-white",on:{click:function(t){return e.removeAssetFromArticle(r,article.article_id)}}},[t("Icon",{attrs:{name:"cross",small:""}})],1),e._v(" "),t("img",{staticClass:"w-24 mr-2 mb-2",attrs:{src:r.asset_src}})])})),0),e._v(" "),e.assetsByArticle[article.article_id].length?e._e():t("div",{staticClass:"my-4 text-xs"},[e._v("\n        "+e._s(e.$t("assets.article_empty"))+"\n      ")])],1)})),0)]):e._e()}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:r(472).default})},589:function(e,t,r){"use strict";r.r(t);var n=r(13),o=r(12),l=r(6);r(52),r(11),r(32),r(33),r(20),r(25),r(138),r(499),r(18),r(30),r(39),r(40);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={asyncData:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,l,c,d,f,h,v,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=[],l=[],c=[],t.prev=4,t.next=7,Promise.all([r.get("/api/assets"),r.get("/api/travels"),r.get("/api/articles")]);case 7:d=t.sent,f=Object(o.a)(d,3),h=f[0],v=f[1],m=f[2],n=h.data,l=v.data,c=m.data,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),console.log(t.t0);case 20:return t.abrupt("return",{assets:n,travels:l,articles:c});case 21:case"end":return t.stop()}}),t,null,[[4,17]])})))()},data:function(){return{activeTab:"library",tabs:[{key:"library",name:this.$t("assets.library")},{key:"travel-assets",name:this.$t("assets.travel_assets")},{key:"article-assets",name:this.$t("assets.article_assets")}]}},methods:{reloadAssets:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/api/assets");case 2:r=t.sent,data=r.data,e.assets=data;case 5:case"end":return t.stop()}}),t)})))()},saveAssociatedAssets:function(){var e=this,t="travel-assets"===this.activeTab?"travel":"article";try{var r={};"travel"===t&&(r=this.$refs.travelAssets.getModifiedAssets()),"article"===t&&(r=this.$refs.articleAssets.getModifiedAssets()),Object.keys(r).forEach(function(){var n=Object(l.a)(regeneratorRuntime.mark((function n(o){var l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r[o].past===r[o].present){n.next=11;break}return n.prev=1,l=e.assets.find((function(a){return a.asset_id===Number(o)})),c=d(d({},l),{},{asset_article_ids:"travel"===t?JSON.stringify(l.asset_article_ids):JSON.stringify(r[o].present),asset_travel_id:"travel"===t?r[o].present:l.asset_travel_id}),n.next=6,e.$axios.put("/api/assets/".concat(o),c);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.warn(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()),this.$toast.success(this.$t("assets.updated_success")),this.reloadAssets()}catch(e){console.warn(e),this.$toast.error(this.$t("assets.updated_error"))}}}},h=f,v=r(36),component=Object(v.a)(h,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"flex justify-between"},[t("Tabs",{attrs:{tabs:e.tabs},on:{tab:function(t){e.activeTab=t.key}}}),e._v(" "),t("div",{staticClass:"self-center mr-4"},["library"!==e.activeTab?t("Btn",{attrs:{"icon-btn":"",icon:"floppy-disk"},on:{click:e.saveAssociatedAssets}}):e._e()],1)],1),e._v(" "),"library"===e.activeTab?t("div",[t("AssetPickerUploader",{attrs:{travels:e.travels},on:{uploaded:e.reloadAssets}}),e._v(" "),t("AssetPickerLibrary",{attrs:{assets:e.assets,data:{travels:e.travels,articles:e.articles}},on:{change:e.reloadAssets}})],1):"travel-assets"===e.activeTab?t("div",[t("DraggableTravelAssets",{ref:"travelAssets",attrs:{assets:e.assets,travels:e.travels,articles:e.articles}}),e._v(" "),t("div",{staticClass:"w-full flex justify-end"},[t("Btn",{staticClass:"m-4",attrs:{"icon-btn":"",icon:"floppy-disk"},on:{click:e.saveAssociatedAssets}})],1)],1):"article-assets"===e.activeTab?t("div",[t("DraggableArticleAssets",{ref:"articleAssets",attrs:{assets:e.assets,travels:e.travels,articles:e.articles}}),e._v(" "),t("div",{staticClass:"w-full flex justify-end"},[t("Btn",{staticClass:"m-4",attrs:{"icon-btn":"",icon:"floppy-disk"},on:{click:e.saveAssociatedAssets}})],1)],1):e._e()])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Tabs:r(559).default,Btn:r(471).default,AssetPickerUploader:r(560).default,AssetPickerLibrary:r(495).default,DraggableTravelAssets:r(561).default,DraggableArticleAssets:r(562).default})}}]);