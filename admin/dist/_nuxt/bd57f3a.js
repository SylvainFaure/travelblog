(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{341:function(e,t,r){"use strict";r.r(t);r(17),r(30),r(18),r(46),r(47),r(31),r(19),r(25);var l=r(4),o=r(13),n=r(276),c=r(26),d=r(299);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{assets:n.a.array.def([]),travels:n.a.array.def([]),categories:n.a.array.def([])},data:function(){return{isNew:!0,mounted:!1,model:{id:"",published:!1,published_date:"",title:"",category:{},cover:null,countries:[],dates:[],hashtags:"",playlist:"",slug:"",short_desc:"",long_desc:""}}},computed:m(m({},Object(c.c)("modal",["visible","modalId"])),{},{locale:function(){return this.$i18n.locale}}),mounted:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,data,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isNew="new"===e.$route.params.id,e.isNew){t.next=14;break}return t.prev=2,t.next=5,e.$axios.get("/api/travels/".concat(e.$route.params.id));case 5:r=t.sent,(data=r.data)?(l=Object(d.a)("travel",{data:data[0],locale:e.locale,otherData:{travels:e.travels,assets:e.assets,categories:e.categories}}),e.model=l,e.mounted=!0):e.mounted=!0,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.warn(t.t0),e.$router.push("/travels");case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},methods:m(m({},Object(c.b)("modal",["setVisible","setModalId"])),{},{saveTravel:function(){this.model.long_desc=this.$refs.longDescription.getBlocks();var e=Object(d.b)("travel",{data:this.model,store:this.$store.state,locale:this.locale});e.travel_id?this.updateTravel(e):this.createTravel(e)},createTravel:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var l,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.post("/api/travels",e);case 3:l=r.sent,data=l.data,t.$toast.success(t.$t("travel.save.success")),t.$router.push("/travels/".concat(data.travel_id)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),t.$toast.error(t.$t("travel.save.error"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},updateTravel:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.put("/api/travels/".concat(e.travel_id),e);case 3:t.$toast.success(t.$t("travel.update.success")),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),console.log(r.t0),t.$toast.error(t.$t("travel.update.error"));case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()},publishTravel:function(){},removeTravel:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.delete("/api/travels/".concat(e.model.id));case 3:e.$toast.success(e.$t("travel.remove.success")),e.closeRemoveModal(),e.$router.push("/travels"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.warn(t.t0),e.$toast.error(e.$t("travel.remove.error"));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},openRemoveModal:function(){this.setVisible(!0),this.setModalId("remove-travel")},closeRemoveModal:function(){this.setVisible(!1),this.setModalId(null)}})},h=r(22),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("EntityActions",{attrs:{"is-new":e.isNew},on:{save:e.saveTravel,publish:e.publishTravel,remove:e.openRemoveModal}},[e.mounted?r("form",[r("InputText",{attrs:{label:e.$t("travel.title")},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),e._v(" "),e.categories?r("Select",{attrs:{label:e.$t("travel.category"),options:e.categories,"option-label":"category_label_"+e.locale},model:{value:e.model.category,callback:function(t){e.$set(e.model,"category",t)},expression:"model.category"}}):e._e(),e._v(" "),r("ChooseImage",{attrs:{image:e.model.cover,assets:e.assets,label:e.$t("travel.cover")},on:{change:function(t){e.model.cover=t}}}),e._v(" "),r("InputTags",{attrs:{label:e.$t("travel.countries"),value:e.model.countries},on:{change:function(t){e.model.countries=t}}}),e._v(" "),r("Datepicker",{attrs:{label:e.$t("travel.dates"),model:e.model.dates},on:{change:function(t){e.model.dates=t}}}),e._v(" "),r("InputTags",{attrs:{label:e.$t("travel.hashtags"),value:e.model.hashtags},on:{change:function(t){e.model.hashtags=t}}}),e._v(" "),r("InputText",{attrs:{label:e.$t("travel.playlist")},model:{value:e.model.playlist,callback:function(t){e.$set(e.model,"playlist",t)},expression:"model.playlist"}}),e._v(" "),r("InputText",{attrs:{label:e.$t("travel.slug")},model:{value:e.model.slug,callback:function(t){e.$set(e.model,"slug",t)},expression:"model.slug"}}),e._v(" "),r("Textarea",{attrs:{label:e.$t("travel.short_desc")},model:{value:e.model.short_desc,callback:function(t){e.$set(e.model,"short_desc",t)},expression:"model.short_desc"}}),e._v(" "),r("BlockEditor",{ref:"longDescription",attrs:{label:e.$t("travel.long_desc"),addons:["map-description"],blocks:e.model.long_desc,assets:e.assets}})],1):e._e()]),e._v(" "),"remove-travel"===e.modalId?r("RemoveModal",{on:{confirm:e.removeTravel,cancel:e.closeRemoveModal}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{InputText:r(282).default,Select:r(285).default,ChooseImage:r(304).default,InputTags:r(344).default,Datepicker:r(305).default,Textarea:r(286).default,BlockEditor:r(306).default,EntityActions:r(307).default,RemoveModal:r(284).default})},344:function(e,t,r){"use strict";r.r(t);r(30);var l=r(276),o={props:{value:l.a.array.def([]),label:l.a.string.def(null),options:l.a.array.def([])},data:function(){return{inputModel:"",tags:[]}},mounted:function(){this.value&&(this.tags=this.value)},methods:{addTag:function(){this.tags.push(this.inputModel),this.inputModel="",this.$emit("change",this.tags)},removeTag:function(e){this.tags=this.tags.filter((function(t){return t!==e})),this.$emit("change",this.tags)}}},n=r(22),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.label?r("h4",{staticClass:"label font-bold my-4"},[r("span",{staticClass:"bg-white z-10 pr-6"},[e._v(e._s(e.label))])]):e._e(),e._v(" "),r("div",{staticClass:"flex flex-wrap"},e._l(e.tags,(function(t){return r("Tag",{key:t,staticClass:"mr-2 my-2",attrs:{tag:t,deletable:""},on:{remove:e.removeTag}})})),1),e._v(" "),r("div",{staticClass:"relative"},[r("InputText",{on:{enter:e.addTag},model:{value:e.inputModel,callback:function(t){e.inputModel=t},expression:"inputModel"}}),e._v(" "),r("div",{staticClass:"cursor-pointer text-white absolute right-0 top-0 h-full w-12 bg-gray-600 flex justify-center items-center",on:{click:e.addTag}},[r("Icon",{attrs:{name:"plus"}})],1)],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Tag:r(346).default,InputText:r(282).default,Icon:r(280).default})},346:function(e,t,r){"use strict";r.r(t);var l=r(276),o={props:{deletable:l.a.bool.def(!1),tag:l.a.string.def("")},computed:{color:function(){var e=["gray","indigo","red","orange","yellow","green","teal","blue","purple","pink"];return"bg-".concat(e[Math.floor(Math.random()*(e.length-1))],"-500")}}},n=r(22),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:[e.color,"text-white text-xs rounded-md px-2 py-1"]},[r("span",[e._v(e._s(e.tag?"#"+e.tag:"# No place"))]),e._v(" "),e.deletable?r("span",{staticClass:"cursor-pointer font-bold",on:{click:function(t){return e.$emit("remove",e.tag)}}},[e._v("x")]):e._e()])}),[],!1,null,null,null);t.default=component.exports},355:function(e,t,r){"use strict";r.r(t);r(14),r(32),r(33);var l=r(11),o=(r(25),r(4)),n={asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,c,d,v,m,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,o=[],n=[],c=[],t.prev=4,t.next=7,Promise.all([r.get("/api/assets"),r.get("/api/travels"),r.get("/api/categories")]);case 7:d=t.sent,v=Object(l.a)(d,3),m=v[0],f=v[1],h=v[2],o=m.data,n=f.data,c=h.data,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),console.log(t.t0);case 20:return t.abrupt("return",{assets:o,travels:n,categories:c});case 21:case"end":return t.stop()}}),t,null,[[4,17]])})))()}},c=r(22),component=Object(c.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("TravelForm",{attrs:{assets:this.assets,travels:this.travels,categories:this.categories}})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{TravelForm:r(341).default})}}]);